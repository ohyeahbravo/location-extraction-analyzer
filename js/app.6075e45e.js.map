{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/VizWidget.vue?3d97","webpack:///./src/components/widgets/OriginCountries.vue?0462","webpack:///./src/App.vue?cd9c","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?cc82","webpack:///./src/components/ControlBar.vue?615e","webpack:///src/components/ControlBar.vue","webpack:///./src/components/ControlBar.vue?02b1","webpack:///./src/components/ControlBar.vue","webpack:///./src/components/SetBar.vue?f77a","webpack:///./src/components/VennDiagram.vue?213a","webpack:///src/components/VennDiagram.vue","webpack:///./src/components/VennDiagram.vue?247b","webpack:///./src/components/VennDiagram.vue","webpack:///src/components/SetBar.vue","webpack:///./src/components/SetBar.vue?ab58","webpack:///./src/components/SetBar.vue","webpack:///./src/components/VizGrid.vue?8d61","webpack:///./src/components/VizWidget.vue?b6ca","webpack:///./src/components/widgets/MapVerOne.vue?ffbc","webpack:///./src/components/widgets/Tooltip.vue?f55d","webpack:///src/components/widgets/Tooltip.vue","webpack:///./src/components/widgets/Tooltip.vue?48e7","webpack:///./src/components/widgets/Tooltip.vue?6095","webpack:///./src/components/widgets/ChartTooltip.vue?ddf1","webpack:///src/components/widgets/ChartTooltip.vue","webpack:///./src/components/widgets/ChartTooltip.vue?ccd9","webpack:///./src/components/widgets/ChartTooltip.vue?4ae0","webpack:///./src/components/widgets/Pie.vue?afc9","webpack:///src/components/widgets/Pie.vue","webpack:///./src/components/widgets/Pie.vue?30be","webpack:///./src/components/widgets/Pie.vue","webpack:///./src/components/widgets/Flower.vue?91be","webpack:///src/components/widgets/Flower.vue","webpack:///./src/components/widgets/Flower.vue?5748","webpack:///./src/components/widgets/Flower.vue","webpack:///./src/components/widgets/MiniMap.vue?17a0","webpack:///src/components/widgets/MiniMap.vue","webpack:///./src/components/widgets/MiniMap.vue?bee6","webpack:///./src/components/widgets/MiniMap.vue","webpack:///src/components/widgets/MapVerOne.vue","webpack:///./src/components/widgets/MapVerOne.vue?5b16","webpack:///./src/components/widgets/MapVerOne.vue","webpack:///./src/components/widgets/OldMap.vue?00b5","webpack:///./src/components/LayerToggle.vue?9a52","webpack:///src/components/LayerToggle.vue","webpack:///./src/components/LayerToggle.vue?bdfd","webpack:///./src/components/LayerToggle.vue","webpack:///src/components/widgets/OldMap.vue","webpack:///./src/components/widgets/OldMap.vue?d9e0","webpack:///./src/components/widgets/OldMap.vue","webpack:///./src/components/widgets/Map.vue?872e","webpack:///src/components/widgets/Map.vue","webpack:///./src/components/widgets/Map.vue?7e9f","webpack:///./src/components/widgets/Map.vue","webpack:///./src/components/widgets/ErrorDistance.vue?b71f","webpack:///src/components/widgets/ErrorDistance.vue","webpack:///./src/components/widgets/ErrorDistance.vue?f085","webpack:///./src/components/widgets/ErrorDistance.vue","webpack:///./src/components/widgets/OriginCountries.vue?19d1","webpack:///src/components/widgets/OriginCountries.vue","webpack:///./src/components/widgets/OriginCountries.vue?15af","webpack:///./src/components/widgets/OriginCountries.vue","webpack:///./src/components/widgets/LocatedCountries.vue?d5fa","webpack:///src/components/widgets/LocatedCountries.vue","webpack:///./src/components/widgets/LocatedCountries.vue?3d41","webpack:///./src/components/widgets/LocatedCountries.vue","webpack:///./src/components/widgets/TextLength.vue?2532","webpack:///src/components/widgets/TextLength.vue","webpack:///./src/components/widgets/TextLength.vue?24d6","webpack:///./src/components/widgets/TextLength.vue","webpack:///./src/components/widgets/NGramFrequency.vue?8734","webpack:///src/components/widgets/NGramFrequency.vue","webpack:///./src/components/widgets/NGramFrequency.vue?195c","webpack:///./src/components/widgets/NGramFrequency.vue","webpack:///./src/components/widgets/SingleMetrics.vue?b5f1","webpack:///src/components/widgets/SingleMetrics.vue","webpack:///./src/components/widgets/SingleMetrics.vue?e118","webpack:///./src/components/widgets/SingleMetrics.vue","webpack:///src/components/VizWidget.vue","webpack:///./src/components/VizWidget.vue?81b4","webpack:///./src/components/VizWidget.vue","webpack:///src/components/VizGrid.vue","webpack:///./src/components/VizGrid.vue?6c99","webpack:///./src/components/VizGrid.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/components/ControlBar.vue?9317","webpack:///./src/components/widgets/SingleMetrics.vue?6fed","webpack:///./src/components/widgets/OldMap.vue?27a7","webpack:///./src/components/widgets/TextLength.vue?e5de","webpack:///./src/components/SetBar.vue?4294","webpack:///./src/components/LayerToggle.vue?85da","webpack:///./src/components/widgets/ChartTooltip.vue?33c4","webpack:///./src/components/widgets/Tooltip.vue?8960","webpack:///./src/components/widgets/NGramFrequency.vue?78e0","webpack:///./src/components/widgets/Map.vue?e96c","webpack:///./src/components/widgets/Flower.vue?c667","webpack:///./src/components/widgets/MapVerOne.vue?0dcb","webpack:///./src/components/widgets/LocatedCountries.vue?e63f","webpack:///./src/components/widgets/Pie.vue?4efa","webpack:///./src/components/widgets/ErrorDistance.vue?c220"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticRenderFns","component","staticClass","style","background","$vuetify","theme","themes","isDark","attrs","model","callback","$$v","dialog","expression","setName","on","cancelAddSet","_v","addSet","slot","editMode","_l","set","idx","isClosable","color","dragStart","allowDrop","promptSetOperation","$event","delSet","_s","hit_set","dropped_set","selectedOnDiagram","_e","dialogAddDisabled","staticStyle","width","height","gridLayout","isDraggable","isResizable","item","x","y","w","h","onResized","widget","isEditable","resized","widgetId","addSetToWidget","$store","state","widgets","getSetColor","delSetFromWidget","tag","class","containerClass","componentId","chartId","selected","sets","selectionMode","update","resizeInfo","accessToken","mapStyle","zoom","onMapLoaded","marker","id","coords","size","source","features","hoverOnChart","clickOnChart","range","ref","isLine","isArc","isDotOrigin","isDotLocated","isLineCountry","isArcCountry","isPieOrigin","isPieLocated","isFlowerOrigin","isFlowerLocated","clusterLockSwitchLabel","isClusterLocked","minimapShown","minimapPayload","_m","tweet","user","screen_name","text","place","full_name","predicted","dist","getCountryName","country","origin","located","count","getStyleWithColor","layout","maxBounds","toggleLayer","$emit","rainbow","setSpectrum","setNumberRange","roseCreated","isRosePieOrigin","isRosePieLocated","directives","rawName","sliderMin","sliderMax","bin","chartContainerId","goToPreviousPage","goToNextPage","n_items","tfBar","N","slider_data","slider_layout","topPercent","sortIndex","colorAll","goToFirstPage","lengths","goToLastPage","axes","scopedSlots","_u","fn","toggle","selectedAxes","icon","proxy","Vue","use","VueRouter","routes","path","Home","router","base","process","getCountryStats","members","origins","forEach","member","country_code","connections","min","Infinity","max","keys","getTextStats","unigrams","bigrams","trigrams","n_unigrams","n_bigrams","n_trigrams","ngrams","grams","gram","token","unigrams_arr","sort","first","second","bigrams_arr","trigrams_arr","quantile_value","hist_count","uniq_unigram","_","map","uniq_bigram","uniq_trigram","quantiles_unigram","quantiles_bigram","quantiles_trigram","quantiles_unigram_hist","quantiles_bigram_hist","quantiles_trigram_hist","quantile","tf","1","2","3","tf_quantiles","tf_quantiles_hist","4","tf_normalized","getMetrics","textStats","totalNumWords","totalNumLetters","totalTextLen","users","dists","acc_country","acc","accD","words","split","wordLength","word","avgWordLength","toLowerCase","replace","ttr","Number","parseFloat","toFixed","mean","median","Vuex","Store","maxNsets","0","5","6","7","8","unused_colors","color_for_all","highlightColor","directSetSelectionSignal","mutations","dataReceived","payload","dir","bearing","turf","coordinates","countryStats","newMembers","concat","stats","allSet","colors","chroma","scale","commit","resetSelection","updateSelection","toggleEditMode","newMode","toggleSelectionMode","updateDirectSetSelectionSignal","triggerSetSelection","log","metrics","newSet","unshift","delete","delAllSet","indexOf","addToSelection","actions","Vuetify","icons","iconfont","light","primary","secondary","accent","shades","black","config","productionTip","store","vuetify","render","App","$mount"],"mappings":"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mBACA,oBACA,YAIA,QA5DA,WA4DA,WACA,8CACA,gDACA,oBAEA,gBACA,YACA,mDACA,oDAGA,SACA,SADA,WAEA,UACA,4CACA,KACA,OAGA,KAFA,2BACA,2BAIA,KAFA,2BACA,2BAIA,KAFA,2BACA,6BAGA,OAGA,KAFA,4BACA,4BAIA,KAFA,4BACA,4BAIA,KAFA,4BACA,8BAGA,YACA,YACA,iBACA,YACA,YACA,oBACA,YACA,YACA,kBACA,YACA,YACA,qBACA,UACA,gDACA,KACA,OAGA,KAFA,2BACA,2BAIA,KAFA,2BACA,2BAIA,KAFA,2BACA,6BAGA,OAGA,KAFA,4BACA,4BAIA,KAFA,4BACA,4BAIA,KAFA,4BACA,8BAGA,YACA,gBACA,iBACA,YACA,gBACA,oBACA,YACA,gBACA,kBACA,YACA,gBACA,qBACA,UACA,GACA,KACA,OAGA,MAFA,6BACA,2BAIA,MAFA,6BACA,2BAIA,MAFA,6BACA,6BAGA,MACA,GACA,KACA,OAGA,MAFA,8BACA,4BAIA,MAFA,8BACA,4BAIA,MAFA,8BACA,8BAGA,YACA,aACA,iBACA,YACA,aACA,oBACA,YACA,aACA,kBACA,YACA,aACA,qBACA,+CACA,8CACA,iDACA,+CACA,mDAEA,KA1HA,WA2HA,mCACA,sBACA,uBAGA,cACA,iDACA,+CACA,4BACA,MACA,cACA,SAGA,cACA,MACA,KACA,EACA,YACA,EACA,WACA,GAEA,oBACA,SACA,cACA,MACA,OACA,EACA,YACA,EACA,WACA,GAEA,oBACA,SAGA,cACA,MACA,KACA,EACA,YACA,EACA,WACA,GAEA,oDACA,4BACA,MACA,cACA,SAGA,cACA,MACA,OACA,EACA,YACA,EACA,WACA,GAEA,QACA,gDAEA,4BACA,MACA,cACA,UAGA,OAnMA,SAmMA,GACA,kBACA,iBACA,yCACA,SACA,uBACA,MAEA,EADA,+BACA,0BACA,yBACA,4BAEA,WACA,0BACA,6CACA,IAEA,cAEA,CACA,QACA,kBACA,YACA,gCAEA,aACA,8BAEA,6BACA,WACA,KACA,OACA,SAGA,uCACA,IAEA,UACA,YACA,cAIA,kDAGA,QAlPA,SAkPA,GACA,OACA,YACA,aAGA,cACA,iBACA,+BAGA,wBAGA,gCACA,WACA,EACA,8CACA,IACA,gCACA,WACA,EACA,6CACA,GAEA,8CACA,iBAEA,8BAEA,+BACA,WACA,EACA,6CACA,IACA,+BACA,WACA,EACA,4CACA,GAEA,6DACA,6BAEA,2BACA,sDACA,IACA,2BACA,qDACA,GAEA,qDACA,0BAGA,uDACA,0BAEA,gDAGA,OACA,OADA,SACA,cACA,IACA,gDACA,oBAEA,gBACA,cAGA,YAVA,WAWA,gBACA,aAEA,QAdA,WAeA,gBACA,eC/YqV,ICOjV,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,oBCkCf,GACA,cACA,YACA,eAEA,UACA,WADA,WAEA,mCAEA,KAJA,WAKA,+BAEA,kBAPA,WAQA,oCAKA,KAlBA,WAmBA,OACA,UACA,WACA,wBACA,iBACA,aACA,qBACA,aACA,YACA,gBACA,kBAEA,iBAGA,SACA,UADA,SACA,GACA,oBAEA,OAJA,SAIA,GACA,yCACA,gCAEA,UARA,SAQA,GACA,oDAEA,mBAXA,SAWA,GACA,uBACA,+CACA,kCACA,iCACA,cACQ,KAAR,UACA,uBAGA,OArBA,WAqBA,WACA,KAMA,GALA,2DACA,iBACA,8CAEA,sBACA,mBACA,OACA,kBACA,WAEA,+BACA,eACA,oBACA,2DACA,+BAEA,kBAGA,aA1CA,WA0CA,WACA,eACA,oBACA,2DACA,+BAEA,iBAEA,aAlDA,WAmDA,mDACA,mDACA,0DACA,yDACA,EACA,GAEA,sDACA,EACA,0CAEA,kBACA,qCACA,yCACA,uCAEA,0DACA,sCACA,IAGA,kBAxEA,SAwEA,GACA,oBC/JgV,ICQ5U,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCnBX,EAAS,WAAa,IAAI9C,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACW,MAAM,CAAC,OAASf,EAAI+C,WAAW,UAAU,G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,WAOA,OANA,kDACA,wBACA,wCAGA,kBACA,GAEA,uBA5BA,WA6BA,6CACA,qBAIA,SACA,OADA,SACA,cACA,4BAEA,0CAEA,+BACA,mBACA,qCACA,GACA,eACA,YACA,MACA,SACA,QACA,2BACA,4BAEA,YACA,gBACA,eAEA,UACA,aACA,aACA,mCACA,qBACA,mCACA,wBAIA,0BACA,OACA,eACA,YACA,MACA,SACA,QACA,uBACA,wBAEA,YACA,oBACA,gBAEA,UACA,aACA,aACA,mCACA,yBACA,mCACA,4BAIA,8BAGA,gDACA,+BACA,OACA,eACA,MACA,yBACA,wBAEA,WACA,kBAEA,0BAEA,4BACA,yBACA,yBAEA,wBAGA,gDACA,iBACA,GACA,CACA,aACA,cACA,gBACA,kBACA,YACA,CACA,sBACA,4BACA,wBACA,eACA,2BAEA,iCAGA,mBACA,mCAMA,UAzGA,SAyGA,qBAEA,mBAEA,gDACA,SACA,mCACA,qBACA,aAEA,gBACA,4BACA,yBACA,aAEA,wBAGA,gDACA,iBACA,GACA,CACA,aACA,cACA,gBACA,kBACA,YAIA,CACA,sBACA,oCACA,yBAEA,sCACA,iBACA,uBACA,mBACA,yBACA,sBACA,gCAbA,4CACA,mBAkBA,YAxJA,SAwJA,GACA,eACA,0CAEA,2BACA,0CACA,uCAGA,SAjKA,WAkKA,4CACA,yCACA,2BACA,mDACA,qBACA,oCACA,+BAEA,2CACA,4BACA,qDACA,sBACA,qCACA,iCAIA,kBAnLA,WAmLA,WACA,oDACA,yBAIA,SAzLA,SAyLA,GACA,0CACA,OACA,wCACA,wCAIA,YAjMA,SAiMA,GAEA,uDAIA,2BAGA,wDAGA,yCACA,2BAGA,UAjNA,SAiNA,GAEA,sDAIA,yCAGA,YA1NA,SA0NA,GAEA,sCAGA,WACA,uCACA,kCACA,mCAGA,8DACA,0DACA,0DACA,0DAGA,+BACA,2BACA,iCACA,8BACA,+BACA,mCACA,qDAGA,OApPA,SAoPA,GAUA,GARA,2DAEA,WACA,0CACA,eAIA,GACA,kCACA,8BACA,8BACA,8BAEA,oBACA,MACA,OAGA,2BAGA,YA5QA,SA4QA,gBAEA,KACA,GACA,CACA,aACA,cACA,gBACA,kBACA,YACA,CACA,sBACA,+BACA,2BACA,iDAEA,wBAEA,oCACA,mDAEA,+BACA,+BACA,mBACA,uCAKA,GACA,CACA,aACA,cACA,gBACA,kBACA,YACA,CACA,sBACA,8BAMA,kCACA,qBACA,sCAEA,uCACA,8BAVA,qBACA,qCAEA,sCACA,4BAWA,kBACA,mBACA,qBACA,uBAEA,qCACA,gDAEA,yCACA,iBACA,0BACA,mBACA,4BACA,sBACA,mCAEA,+BACA,yCAKA,YAxVA,WAwVA,WACA,KACA,qBAiBA,OAhBA,+BACA,6BACA,+BAEA,yCACA,yBACA,yCACA,yBACA,yCACA,yBACA,yCACA,yBAEA,gBAGA,GAGA,SA9WA,SA8WA,GACA,0DACA,IACA,CACA,kBACA,kBACA,mBAEA,KAEA,UAGA,iBA3XA,SA2XA,GACA,sBACA,+BACA,uCACA,KACA,KAIA,CACA,YACA,gCAJA,8CACA,MAKA,UAGA,mBA3YA,SA2YA,GACA,QACA,KACA,GACA,yBACA,2CACA,cACA,UAGA,cArZA,SAqZA,cACA,kBACA,KACA,iBACA,qDAEA,uBAEA,qDAGA,qCACA,+BACA,+BAEA,sCAKA,qBAEA,gCACA,cAEA,kDAEA,MACA,aACA,iBACA,YACA,oBACA,GACA,cACA,GACA,oBACA,EACA,EACA,EACA,UAOA,kBAncA,SAmcA,SACA,0BACA,wCACA,sBAGA,aAzcA,SAycA,cACA,KACA,KACA,gDACA,oBACA,IACA,WAEA,8BACA,+CACA,eAGA,SACA,KACA,8BACA,4CACA,IACA,mCACA,4BACA,wBAEA,mCACA,4BACA,2BAIA,IAcA,EACA,EAfA,mBACA,KACA,UACA,6DAEA,UACA,6DAEA,EACA,cACA,MAGA,kBAIA,kBACA,SACA,KACA,KACA,KAUA,GARA,oCACA,oBACA,UACA,qCACA,0BACA,gBAGA,aACA,SACA,QACA,SACA,SACA,QACA,UAEA,WACA,WACA,iBACA,kBAEA,OACA,2BACA,+BACA,uBACA,SACA,OACA,OACA,YAEA,UAGA,KACA,KACA,KACA,KACA,KAEA,oCACA,oBACA,UAEA,kBACA,0BACA,gBAGA,cACA,QACA,SACA,SACA,QACA,UAEA,WACA,WACA,iBACA,kBAEA,GACA,8BACA,QACA,0BACA,uBACA,SACA,OACA,OACA,YAEA,gBAGA,qBACA,KACA,OACA,SACA,SACA,QACA,SACA,SACA,SACA,QACA,UAEA,oCACA,wBACA,0BACA,uBACA,GACA,QACA,MACA,OACA,MACA,QACA,MACA,OACA,OACA,WACA,OACA,gBAEA,QACA,IACA,OACA,QACA,MACA,OACA,MACA,QACA,MACA,OACA,OAEA,OACA,QACA,oCAEA,gBACA,WACA,sBAGA,gEACA,IACA,MACA,EACA,WAcA,GACA,8BACA,kCACA,uBACA,SACA,OACA,OACA,aACA,YAEA,cAKA,gBAEA,0BACA,iBAEA,2BACA,mBACA,2BACA,sBACA,8BAGA,mBApqBA,SAoqBA,GACA,sBACA,GACA,mBACA,cACA,SACA,mCACA,UAgBA,aACA,0CACA,6BAEA,iDACA,2BACA,iCACA,4CAEA,+BACA,uBAGA,YAxsBA,SAwsBA,gBACA,4BACA,GACA,WACA,iBACA,6BACA,aAgFA,OA5EA,qCACA,cACA,mDACA,kCACA,cAEA,yDAEA,cACA,YACA,kBAKA,CACA,OACA,MACA,aACA,cACA,eACA,aAEA,iBACA,wDACA,4CACA,6CACA,mCACA,wDACA,6CACA,6DACA,uCACA,8BACA,uCACA,gCAGA,mCACA,oDACA,oDAEA,uBAGA,sBACA,aACA,uCACA,wDACA,0DAEA,uCACA,6CACA,eACA,6CACA,kBAIA,2CACA,cAEA,yDACA,sDACA,oBACA,sBACA,qDAEA,2CACA,iCACA,4CACA,eACA,4CACA,kBAIA,GACA,WACA,MACA,UACA,MACA,mBACA,MACA,kBACA,MACA,iBACA,MACA,kBACA,iCACA,gDACA,eACA,gDACA,iBAEA,MACA,kBACA,aACA,wBACA,6BACA,kCACA,eACA,MACA,OAEA,oCACA,yCACA,eACA,yCACA,iBAEA,MAEA,oBACA,qBAGA,aAt0BA,SAs0BA,cACA,WACA,wCACA,wBAEA,yBACA,2CACA,CACA,SACA,8BACA,qBAEA,GACA,sBACA,qCACA,CACA,oBACA,wBAEA,iCACA,OACA,IACA,IACA,cAKA,SAaA,GAZA,6BACA,QACA,eACA,YACA,sBAEA,UACA,aACA,2CAIA,4CACA,OACA,eACA,MACA,yBACA,aAGA,yCAEA,gDACA,yBACA,aAEA,sBACA,SAEA,+BACA,sBACA,wBACA,OACA,KACA,eACA,WACA,uBACA,OAKA,iBACA,cACA,WACA,oBACA,EACA,qBACA,GACA,iCACA,GACA,iCACA,EACA,kCAEA,qBACA,qBAEA,+BAEA,kBACA,aAEA,SACA,uBACA,SACA,mBACA,iBACA,kBACA,4BACA,aAEA,qBACA,SACA,cAKA,aAl7BA,SAk7BA,GACA,eACQ,IAAR,KAEA,uBACA,QACA,sBACA,kCACA,8BAIA,wCACA,2DAKA,OACA,OADA,SACA,GACA,wCACA,oBAEA,WALA,SAKA,GACA,uDACA,OACA,mBAEA,cAVA,SAUA,cACA,0DACA,kCACA,mBAGA,yBACA,YACA,yCAEA,cApBA,SAoBA,cACA,GAEA,wCACA,8CACA,iBACA,4BACA,+BACA,mBACA,kCAEA,+BAEA,gCACA,oBAFA,uBAIA,+BACA,iCACA,kBAKA,+BACA,iCACA,uBAGA,8CACA,+BACA,oBACA,+BAEA,kBACA,8CACA,kBACA,sBAJA,uBAQA,oBACA,MACA,SAIA,KAlEA,SAkEA,cACA,eACA,yBACA,2BACA,CACA,SACA,KACA,uBACA,iDACA,oDAEA,4CACA,8CAGA,kBAjFA,WAiFA,WACA,iCACA,uBACA,gBACA,oBACA,yBAIA,OA1FA,SA0FA,GACA,4BAEA,MA7FA,SA6FA,GACA,2BAEA,YAhGA,SAgGA,GACA,kCAEA,aAnGA,SAmGA,GACA,mCAEA,cAtGA,SAsGA,GACA,oCAEA,aAzGA,SAyGA,GACA,mCAEA,YA5GA,SA4GA,GACA,kCAEA,aA/GA,SA+GA,GACA,mCAEA,eAlHA,SAkHA,GACA,qCAEA,gBArHA,SAqHA,GACA,wCCh5Ck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A,8BACA,4BACA,kCACA,sCAGA,kBAfA,WAgBA,mDAEA,aAlBA,WAkBA,WACA,WAOA,OANA,kDACA,wBACA,wCAGA,kBACA,GAEA,uBA5BA,WA6BA,6CACA,qBAIA,SACA,OADA,SACA,cACA,4BAEA,0CAEA,+BACA,uBACA,qCACA,GACA,eACA,YACA,MACA,SACA,QACA,2BACA,4BAEA,YACA,gBACA,eAEA,UACA,aACA,aACA,mCACA,qBACA,mCACA,wBAIA,0BACA,OACA,eACA,YACA,MACA,SACA,QACA,uBACA,wBAEA,YACA,oBACA,gBAEA,UACA,aACA,aACA,mCACA,yBACA,mCACA,4BAIA,8BAGA,gDACA,+BACA,OACA,eACA,MACA,yBACA,wBAEA,WACA,kBAEA,0BAEA,4BACA,yBACA,yBAEA,wBAGA,gDACA,iBACA,GACA,CACA,aACA,cACA,gBACA,kBACA,YACA,CACA,sBACA,4BACA,wBACA,eACA,2BAEA,iCAGA,mBACA,mCAMA,UAzGA,SAyGA,qBAEA,mBAEA,gDACA,SACA,mCACA,qBACA,aAEA,gBACA,4BACA,yBACA,aAEA,wBAGA,gDACA,iBACA,GACA,CACA,aACA,cACA,gBACA,kBACA,YAIA,CACA,sBACA,oCACA,yBAEA,sCACA,iBACA,uBACA,mBACA,yBACA,sBACA,gCAbA,4CACA,mBAkBA,YAxJA,SAwJA,GACA,eACA,0CAEA,2BACA,0CACA,uCAGA,SAjKA,WAkKA,4CACA,yCACA,2BACA,mDACA,qBACA,oCACA,+BAEA,2CACA,4BACA,qDACA,sBACA,qCACA,iCAIA,kBAnLA,WAmLA,WACA,oDACA,yBAIA,SAzLA,SAyLA,GACA,0CACA,OACA,wCACA,wCAIA,YAjMA,SAiMA,GAEA,uDAIA,2BAGA,wDAGA,yCACA,2BAGA,UAjNA,SAiNA,GAEA,sDAIA,yCAGA,YA1NA,SA0NA,GAEA,sCAGA,WACA,uCACA,kCACA,mCAGA,8DACA,0DACA,0DACA,0DAGA,+BACA,2BACA,iCACA,8BACA,+BACA,mCACA,qDAGA,OApPA,SAoPA,GAUA,GARA,2DAEA,WACA,0CACA,eAIA,GACA,kCACA,8BACA,8BACA,8BAEA,oBACA,MACA,OAGA,2BAGA,YA5QA,SA4QA,gBAEA,KACA,GACA,CACA,aACA,cACA,gBACA,kBACA,YACA,CACA,sBACA,+BACA,2BACA,iDAEA,wBAEA,oCACA,mDAEA,+BACA,+BACA,mBACA,uCAKA,GACA,CACA,aACA,cACA,gBACA,kBACA,YACA,CACA,sBACA,8BAMA,kCACA,qBACA,sCAEA,uCACA,8BAVA,qBACA,qCAEA,sCACA,4BAWA,kBACA,mBACA,qBACA,uBAEA,qCACA,gDAEA,yCACA,iBACA,0BACA,mBACA,4BACA,sBACA,mCAEA,+BACA,yCAKA,YAxVA,WAwVA,WACA,KACA,qBAiBA,OAhBA,+BACA,6BACA,+BAEA,yCACA,yBACA,yCACA,yBACA,yCACA,yBACA,yCACA,yBAEA,gBAGA,GAGA,SA9WA,SA8WA,GACA,0DACA,IACA,CACA,kBACA,kBACA,mBAEA,KAEA,UAGA,iBA3XA,SA2XA,GACA,sBACA,+BACA,uCACA,KACA,KAIA,CACA,YACA,gCAJA,8CACA,MAKA,UAGA,mBA3YA,SA2YA,GACA,QACA,KACA,GACA,yBACA,2CACA,cACA,UAGA,cArZA,SAqZA,cACA,kBACA,KACA,iBACA,qDAEA,uBAEA,qDAGA,qCACA,+BACA,+BAEA,sCAKA,qBAEA,gCACA,cAEA,kDAEA,MACA,aACA,iBACA,YACA,oBACA,GACA,cACA,GACA,oBACA,EACA,EACA,EACA,UAOA,kBAncA,SAmcA,SACA,0BACA,wCACA,sBAGA,aAzcA,SAycA,cACA,KACA,KACA,gDACA,oBACA,IACA,WAEA,8BACA,+CACA,eAGA,SACA,KACA,8BACA,4CACA,IACA,mCACA,4BACA,wBAEA,mCACA,4BACA,2BAIA,IAcA,EACA,EAfA,mBACA,KACA,UACA,6DAEA,UACA,6DAEA,EACA,cACA,MAGA,kBAIA,kBACA,SACA,KACA,KACA,KAUA,GARA,oCACA,oBACA,UACA,qCACA,0BACA,gBAGA,aACA,SACA,QACA,SACA,SACA,QACA,UAEA,WACA,WACA,iBACA,kBAEA,OACA,2BACA,+BACA,uBACA,SACA,OACA,OACA,YAEA,UAGA,KACA,KACA,KACA,KACA,KAEA,oCACA,oBACA,UAEA,kBACA,0BACA,gBAGA,cACA,QACA,SACA,SACA,QACA,UAEA,WACA,WACA,iBACA,kBAEA,GACA,8BACA,QACA,0BACA,uBACA,SACA,OACA,OACA,YAEA,gBAGA,qBACA,KACA,OACA,SACA,SACA,QACA,SACA,SACA,SACA,QACA,UAEA,oCACA,wBACA,0BACA,uBACA,GACA,QACA,MACA,OACA,MACA,QACA,MACA,OACA,OACA,WACA,OACA,gBAEA,QACA,IACA,OACA,QACA,MACA,OACA,MACA,QACA,MACA,OACA,OAEA,OACA,QACA,oCAEA,gBACA,WACA,sBAGA,gEACA,IACA,MACA,EACA,WAcA,GACA,8BACA,kCACA,uBACA,SACA,OACA,OACA,aACA,YAEA,cAKA,gBAEA,0BACA,iBAEA,2BACA,mBACA,2BACA,sBACA,8BAGA,mBApqBA,SAoqBA,GACA,sBACA,GACA,mBACA,cACA,SACA,mCACA,UAgBA,aACA,0CACA,6BAEA,iDACA,2BACA,iCACA,4CAEA,+BACA,uBAGA,YAxsBA,SAwsBA,gBACA,4BACA,GACA,WACA,iBACA,6BACA,aAgFA,OA5EA,qCACA,cACA,mDACA,kCACA,cAEA,yDAEA,cACA,YACA,kBAKA,CACA,OACA,MACA,aACA,cACA,eACA,aAEA,iBACA,wDACA,4CACA,6CACA,mCACA,wDACA,6CACA,6DACA,uCACA,8BACA,uCACA,gCAGA,mCACA,oDACA,oDAEA,uBAGA,sBACA,aACA,uCACA,wDACA,0DAEA,uCACA,6CACA,eACA,6CACA,kBAIA,2CACA,cAEA,yDACA,sDACA,oBACA,sBACA,qDAEA,2CACA,iCACA,4CACA,eACA,4CACA,kBAIA,GACA,WACA,MACA,UACA,MACA,mBACA,MACA,kBACA,MACA,iBACA,MACA,kBACA,iCACA,gDACA,eACA,gDACA,iBAEA,MACA,kBACA,aACA,wBACA,6BACA,kCACA,eACA,MACA,OAEA,oCACA,yCACA,eACA,yCACA,iBAEA,MAEA,oBACA,qBAGI,YAt0BJ,WAu0BA,uBACA,qBACA,wBACA,uBAGA,aA70BA,SA60BA,cACA,WACA,wCACA,wBAEA,yBACA,2CACA,CACA,SACA,8BACA,qBAEA,GACA,sBACA,qCACA,CACA,oBACA,wBAEA,iCACA,OACA,IACA,IACA,cAKA,SAaA,GAZA,6BACA,QACA,eACA,YACA,sBAEA,UACA,aACA,2CAIA,4CACA,OACA,eACA,MACA,yBACA,aAGA,yCAEA,gDACA,yBACA,aAEA,sBACA,SAEA,+BACA,sBACA,wBACA,OACA,KACA,eACA,WACA,uBACA,OAKA,iBACA,cACA,WACA,oBACA,EACA,qBACA,GACA,iCACA,GACA,iCACA,EACA,kCAEA,qBACA,qBAEA,+BAEA,kBACA,aAEA,SACA,uBACA,SACA,mBACA,iBACA,kBACA,4BACA,aAEA,qBACA,SACA,cAKA,aAz7BA,SAy7BA,GACA,eACA,SACA,uBAEA,2CACA,qCACA,gEACA,QACA,OACA,WAGA,wCACA,2DAKA,OACA,OADA,SACA,GACA,wCACA,oBAEA,WALA,SAKA,GACA,uDACA,OACA,mBAEA,cAVA,SAUA,cACA,0DACA,kCACA,mBAGA,yBACA,YACA,yCAEA,cApBA,SAoBA,cACA,GAEA,wCACA,8CACA,iBACA,4BACA,+BACA,mBACA,kCAEA,+BAEA,gCACA,oBAFA,uBAIA,+BACA,iCACA,kBAKA,+BACA,iCACA,uBAGA,8CACA,+BACA,oBACA,+BAEA,kBACA,8CACA,kBACA,sBAJA,uBAQA,oBACA,MACA,SAIA,KAlEA,SAkEA,cACA,eACA,yBACA,2BACA,CACA,SACA,KACA,uBACA,iDACA,oDAEA,4CACA,8CAGA,kBAjFA,WAiFA,WACA,iCACA,uBACA,gBACA,oBACA,yBAIA,OA1FA,SA0FA,GACA,4BAEA,MA7FA,SA6FA,GACA,2BAEA,YAhGA,SAgGA,GACA,kCAEA,aAnGA,SAmGA,GACA,mCAEA,cAtGA,SAsGA,GACA,oCAEA,aAzGA,SAyGA,GA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,YACA,UACA,YAEA,CACA,sBACA,UACA,YAEA,CACA,qBACA,UACA,YAEA,CACA,qBACA,UACA,YAEA,CACA,YACA,UACA,YAEA,CACA,oBACA,UACA,YAEA,CACA,mBACA,UACA,YAEA,CACA,gBACA,UACA,YAEA,CACA,kBACA,UACA,YAEA,CACA,oBACA,UACA,YAEA,CACA,YACA,UACA,YAEA,CACA,gBACA,UACA,aAGA,QACA,QACA,KACA,KACA,KACA,KACA,OAEA,MACA,sBACA,QACA,oBAMA,UACA,iBADA,WAEA,iCAEA,YAJA,WAKA,oDAEA,aAPA,WAQA,sDAEA,KAVA,WAWA,0CACA,oCACA,+BAGA,SACA,OADA,WACA,WACA,2BACA,cACA,kBAEA,kCAIA,OAVA,SAUA,cACA,kCACA,sBAEA,wCACA,oCACA,4BACA,UAEA,OAKA,kCAGA,qBACA,gBACA,iBACA,MACA,gBAEA,WACA,QACA,iBAGA,oBAEA,UAxCA,SAwCA,cACA,iBACA,+BACA,uCACA,sCAEA,0BACA,iCACA,oBAEA,YAlDA,WAkDA,WACA,mBACA,qBACA,sBACA,EACA,6CAEA,sBACA,EACA,8CAGA,iCACA,4BACA,mBACA,EACA,kCAIA,0CACA,6BACA,qCACA,kCAEA,uCACA,8CAGA,mCACA,6CACA,wCACA,0CAGA,OACA,OADA,SACA,GACA,wCACA,oBAEA,WALA,SAKA,GACA,qDACA,UACA,iDACA,wBACA,MACA,4DACA,UAEA,aAdA,SAcA,cACA,uCACA,oBACA,2BAEA,8BAGA,sBACA,6CC3SsW,MCQlW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCmCf,IACE,KAAF,YACE,MAAF,gCACE,WAAF,CACI,UAAJ,GACI,OAAJ,GACI,IAAJ,GACI,cAAJ,GACI,gBAAJ,GACI,iBAAJ,GACI,WAAJ,GACI,eAAJ,GACI,cAAJ,IAEE,KAdF,WAeI,MAAJ,CACM,WAAN,OAGE,SAAF,CACI,OADJ,WAEM,OAAN,+CAEI,QAJJ,WAKM,MAAN,qBAEI,UAPJ,WASM,IAAN,8CACA,mBACA,gBACM,OAAN,GA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","file":"js/app.6075e45e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"faf9c306\",\"chunk-2d22497b\":\"38f4de6c\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/location-extraction-analyzer/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VizWidget.vue?vue&type=style&index=0&id=a146e334&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OriginCountries.vue?vue&type=style&index=0&id=6b3cdace&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <router-view></router-view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'App',\r\n\tmethods: {},\r\n\tcreated() {}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=bb38ab9a&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('v-app',{style:({ background: _vm.$vuetify.theme.themes[_vm.isDark].background })},[_c('v-container',{staticClass:\"ma-0 pa-0\",attrs:{\"fluid\":\"\",\"app\":\"\"}},[_c('v-row',{staticClass:\"mx-10 mt-4 pa-0\"},[_c('control-bar')],1),_c('v-row',{staticClass:\"mx-10 mt-2 pa-0\"},[_c('set-bar')],1),_c('v-sheet',{staticClass:\"mx-7 mt-2 pa-0\",attrs:{\"light\":\"\",\"color\":\"background\"}},[_c('viz-grid')],1)],1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"300px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"pt-5 pb-0\"},[_c('v-text-field',{attrs:{\"label\":\"Enter the set name\",\"required\":\"\"},model:{value:(_vm.setName),callback:function ($$v) {_vm.setName=$$v},expression:\"setName\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.cancelAddSet}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.addSet}},[_vm._v(\"Add\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-toolbar',{attrs:{\"light\":\"\",\"color\":\"background\",\"flat\":\"\"}},[_c('v-text-field',{attrs:{\"single-line\":\"\",\"filled\":\"\",\"rounded\":\"\",\"hide-details\":\"\",\"color\":\"grey darken-1\"}},[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"slot\":\"prepend-inner\"},slot:\"prepend-inner\"},[_vm._v(\"fa-search\")])],1),_c('v-spacer'),_c('v-switch',{staticClass:\"mr-1\",attrs:{\"inset\":\"\",\"hide-details\":\"\",\"label\":\"Edit Mode\"},model:{value:(_vm.editMode),callback:function ($$v) {_vm.editMode=$$v},expression:\"editMode\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-toolbar light color=\"background\" flat>\r\n        <v-text-field\r\n            single-line\r\n            filled\r\n            rounded\r\n            hide-details\r\n            color=\"grey darken-1\"\r\n        >\r\n            <v-icon slot=\"prepend-inner\" class=\"mr-2\">fa-search</v-icon>\r\n        </v-text-field>\r\n        <v-spacer></v-spacer>\r\n        <v-switch\r\n            v-model=\"editMode\"\r\n            inset\r\n            hide-details\r\n            label=\"Edit Mode\"\r\n            class=\"mr-1\"\r\n        ></v-switch>\r\n    </v-toolbar>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'ControlBar',\r\n    computed: {\r\n        editMode: {\r\n            get() {\r\n                return this.$store.state.editMode;\r\n            },\r\n            set(value) {\r\n                this.$store.commit('toggleEditMode', value);\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.v-toolbar {\r\n    font-family: 'Montserrat', sans-serif;\r\n    font-weight: 600;\r\n    .v-text-field {\r\n        font-family: 'Roboto', sans-serif;\r\n        font-weight: 400;\r\n    }\r\n}\r\n\r\n.v-text-field {\r\n    color: '#757575';\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ControlBar.vue?vue&type=template&id=694c4e8f&scoped=true&\"\nimport script from \"./ControlBar.vue?vue&type=script&lang=js&\"\nexport * from \"./ControlBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ControlBar.vue?vue&type=style&index=0&id=694c4e8f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"694c4e8f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-toolbar',{attrs:{\"flat\":\"\",\"light\":\"\",\"color\":\"#E7E7E7\"}},[_c('v-toolbar-title',{staticClass:\"ma-2\"},[_vm._v(\"SETS\")]),_c('v-chip-group',{staticClass:\"ml-2\",attrs:{\"show-arrows\":\"\",\"dark\":\"\"}},_vm._l((_vm.sets),function(set,idx){return _c('v-chip',{key:idx,staticClass:\"mr-3\",attrs:{\"draggable\":\"\",\"close\":_vm.isClosable,\"color\":set.color},on:{\"dragstart\":_vm.dragStart,\"dragover\":_vm.allowDrop,\"drop\":_vm.promptSetOperation,\"click:close\":function($event){return _vm.delSet(set.name)}}},[_vm._v(_vm._s(set.name))])}),1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"400px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('VennDiagram',{attrs:{\"width\":\"400\",\"height\":\"250\",\"hit_set\":_vm.hit_set,\"dropped_set\":_vm.dropped_set,\"dialog\":_vm.dialog},on:{\"selectedOnDiagram\":_vm.selectedOnDiagram}}),(_vm.setOperationSelected)?_c('v-card-text',{staticClass:\"pt-5 pb-0\"},[_c('v-text-field',{attrs:{\"dense\":\"\",\"hide-details\":\"\",\"single-line\":\"\",\"required\":\"\"},model:{value:(_vm.setName),callback:function ($$v) {_vm.setName=$$v},expression:\"setName\"}})],1):_vm._e(),_c('v-card-actions',[_c('v-card-text',{staticClass:\"pt-5 pb-0\"},[_c('v-text-field',{attrs:{\"label\":\"Enter the set name\",\"required\":\"\"},model:{value:(_vm.setName),callback:function ($$v) {_vm.setName=$$v},expression:\"setName\"}})],1),_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.cancelAddSet}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\",\"disabled\":_vm.dialogAddDisabled},on:{\"click\":_vm.addSet}},[_vm._v(\"Add\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"cursor\":\"pointer\"}},[_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":_vm.width,\"height\":_vm.height}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div style=\"cursor: pointer;\">\r\n        <canvas id=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport chroma from 'chroma-js';\r\n\r\nexport default {\r\n\tname: 'VennDiagram',\r\n\tprops: ['width', 'height', 'hit_set', 'dropped_set', 'dialog'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcanvas: null,\r\n\t\t\tcolors: {\r\n\t\t\t\tneitherButAll: {\r\n\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\tchroma: null,\r\n\t\t\t\t\t\trgb: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselected: {\r\n\t\t\t\t\t\tchroma: null,\r\n\t\t\t\t\t\trgb: null\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\thit_only: {\r\n\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\tchroma: null,\r\n\t\t\t\t\t\trgb: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselected: {\r\n\t\t\t\t\t\tchroma: null,\r\n\t\t\t\t\t\trgb: null\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdropped_only: {\r\n\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\tchroma: null,\r\n\t\t\t\t\t\trgb: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselected: {\r\n\t\t\t\t\t\tchroma: null,\r\n\t\t\t\t\t\trgb: null\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tintersect: {\r\n\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\tchroma: null,\r\n\t\t\t\t\t\trgb: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselected: {\r\n\t\t\t\t\t\tchroma: null,\r\n\t\t\t\t\t\trgb: null\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tselected: {\r\n\t\t\t\tneitherButAll: false,\r\n\t\t\t\thit_only: false,\r\n\t\t\t\tdropped_only: false,\r\n\t\t\t\tintersect: false\r\n\t\t\t},\r\n\t\t\tdefault_opacity: 0.3,\r\n\t\t\tselected_opacity: 0.8,\r\n\t\t\tradius: 85\r\n\t\t};\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.canvas = document.getElementById('canvas');\r\n\t\tObject.keys(this.selected).forEach(key => {\r\n\t\t\tthis.selected[key] = false;\r\n\t\t});\r\n\t\tthis.getColor();\r\n\t\tthis.draw();\r\n\t\tthis.canvas.addEventListener('hover', this.onClick);\r\n\t\tthis.canvas.addEventListener('click', this.onClick);\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tgetColor() {\r\n\t\t\tlet colorHitGL = chroma(\r\n\t\t\t\tthis.$store.state.sets[this.hit_set].color\r\n\t\t\t).gl();\r\n\t\t\tlet colorHitOverlayedDefault = chroma([\r\n\t\t\t\t((1 - this.default_opacity) * 1 +\r\n\t\t\t\t\tcolorHitGL[0] * this.default_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.default_opacity) * 1 +\r\n\t\t\t\t\tcolorHitGL[1] * this.default_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.default_opacity) * 1 +\r\n\t\t\t\t\tcolorHitGL[2] * this.default_opacity) *\r\n\t\t\t\t\t255\r\n\t\t\t]);\r\n\t\t\tlet colorHitOverlayedSelected = chroma([\r\n\t\t\t\t((1 - this.selected_opacity) * 1 +\r\n\t\t\t\t\tcolorHitGL[0] * this.selected_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.selected_opacity) * 1 +\r\n\t\t\t\t\tcolorHitGL[1] * this.selected_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.selected_opacity) * 1 +\r\n\t\t\t\t\tcolorHitGL[2] * this.selected_opacity) *\r\n\t\t\t\t\t255\r\n\t\t\t]);\r\n\t\t\tthis.colors[\r\n\t\t\t\t'hit_only'\r\n\t\t\t].default.chroma = colorHitOverlayedDefault;\r\n\t\t\tthis.colors[\r\n\t\t\t\t'hit_only'\r\n\t\t\t].default.rgb = colorHitOverlayedDefault.rgb();\r\n\t\t\tthis.colors[\r\n\t\t\t\t'hit_only'\r\n\t\t\t].selected.chroma = colorHitOverlayedSelected;\r\n\t\t\tthis.colors[\r\n\t\t\t\t'hit_only'\r\n\t\t\t].selected.rgb = colorHitOverlayedSelected.rgb();\r\n\t\t\tlet colorDroppedGL = chroma(\r\n\t\t\t\tthis.$store.state.sets[this.dropped_set].color\r\n\t\t\t).gl();\r\n\t\t\tlet colorDroppedOverlayedDefault = chroma([\r\n\t\t\t\t((1 - this.default_opacity) * 1 +\r\n\t\t\t\t\tcolorDroppedGL[0] * this.default_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.default_opacity) * 1 +\r\n\t\t\t\t\tcolorDroppedGL[1] * this.default_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.default_opacity) * 1 +\r\n\t\t\t\t\tcolorDroppedGL[2] * this.default_opacity) *\r\n\t\t\t\t\t255\r\n\t\t\t]);\r\n\t\t\tlet colorDroppedOverlayedSelected = chroma([\r\n\t\t\t\t((1 - this.selected_opacity) * 1 +\r\n\t\t\t\t\tcolorDroppedGL[0] * this.selected_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.selected_opacity) * 1 +\r\n\t\t\t\t\tcolorDroppedGL[1] * this.selected_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.selected_opacity) * 1 +\r\n\t\t\t\t\tcolorDroppedGL[2] * this.selected_opacity) *\r\n\t\t\t\t\t255\r\n\t\t\t]);\r\n\t\t\tthis.colors[\r\n\t\t\t\t'dropped_only'\r\n\t\t\t].default.chroma = colorDroppedOverlayedDefault;\r\n\t\t\tthis.colors[\r\n\t\t\t\t'dropped_only'\r\n\t\t\t].default.rgb = colorDroppedOverlayedDefault.rgb();\r\n\t\t\tthis.colors[\r\n\t\t\t\t'dropped_only'\r\n\t\t\t].selected.chroma = colorDroppedOverlayedSelected;\r\n\t\t\tthis.colors[\r\n\t\t\t\t'dropped_only'\r\n\t\t\t].selected.rgb = colorDroppedOverlayedSelected.rgb();\r\n\t\t\tlet colorHitDefaultNormalizedGL = chroma(\r\n\t\t\t\tcolorHitOverlayedDefault\r\n\t\t\t).gl();\r\n\t\t\tlet colorMixOverlayedDefault = chroma([\r\n\t\t\t\t((1 - this.default_opacity) * colorHitDefaultNormalizedGL[0] +\r\n\t\t\t\t\tcolorDroppedGL[0] * this.default_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.default_opacity) * colorHitDefaultNormalizedGL[1] +\r\n\t\t\t\t\tcolorDroppedGL[1] * this.default_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.default_opacity) * colorHitDefaultNormalizedGL[2] +\r\n\t\t\t\t\tcolorDroppedGL[2] * this.default_opacity) *\r\n\t\t\t\t\t255\r\n\t\t\t]);\r\n\t\t\tlet colorHitSelectedNormalizedGL = chroma(\r\n\t\t\t\tcolorHitOverlayedSelected\r\n\t\t\t).gl();\r\n\t\t\tlet colorMixOverlayedSelected = chroma([\r\n\t\t\t\t((1 - this.selected_opacity) * colorHitSelectedNormalizedGL[0] +\r\n\t\t\t\t\tcolorDroppedGL[0] * this.selected_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.selected_opacity) * colorHitSelectedNormalizedGL[1] +\r\n\t\t\t\t\tcolorDroppedGL[1] * this.selected_opacity) *\r\n\t\t\t\t\t255,\r\n\t\t\t\t((1 - this.selected_opacity) * colorHitSelectedNormalizedGL[2] +\r\n\t\t\t\t\tcolorDroppedGL[2] * this.selected_opacity) *\r\n\t\t\t\t\t255\r\n\t\t\t]);\r\n\t\t\tthis.colors[\r\n\t\t\t\t'intersect'\r\n\t\t\t].default.chroma = colorMixOverlayedDefault;\r\n\t\t\tthis.colors[\r\n\t\t\t\t'intersect'\r\n\t\t\t].default.rgb = colorMixOverlayedDefault.rgb();\r\n\t\t\tthis.colors[\r\n\t\t\t\t'intersect'\r\n\t\t\t].selected.chroma = colorMixOverlayedSelected;\r\n\t\t\tthis.colors[\r\n\t\t\t\t'intersect'\r\n\t\t\t].selected.rgb = colorMixOverlayedSelected.rgb();\r\n\t\t\tlet colorBG = chroma(this.$store.state.sets['all'].color);\r\n\t\t\tthis.colors['neitherButAll'].default.chroma = colorBG;\r\n\t\t\tthis.colors['neitherButAll'].default.rgb = colorBG.rgb();\r\n\t\t\tthis.colors['neitherButAll'].selected.chroma = colorBG;\r\n\t\t\tthis.colors['neitherButAll'].selected.rgb = colorBG.rgb();\r\n\t\t},\r\n\t\tdraw() {\r\n\t\t\tlet context = this.canvas.getContext('2d');\r\n\t\t\tlet centerleftX = this.canvas.width / 4;\r\n\t\t\tlet centerY = this.canvas.height / 2;\r\n\r\n\t\t\t// draw background (set 'neitherButAll')\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.rect(0, 0, this.canvas.width, this.canvas.height);\r\n\t\t\tlet color = chroma(this.$store.state.sets['all'].color)\r\n\t\t\t\t.alpha(this.default_opacity)\r\n\t\t\t\t.css();\r\n\t\t\tcontext.fillStyle = color;\r\n\t\t\tcontext.fill();\r\n\r\n\t\t\t// painting white first\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.arc(\r\n\t\t\t\tcenterleftX + 50,\r\n\t\t\t\tcenterY,\r\n\t\t\t\tthis.radius,\r\n\t\t\t\t0,\r\n\t\t\t\t2 * Math.PI,\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tcontext.fillStyle = 'white';\r\n\t\t\tcontext.fill();\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.arc(\r\n\t\t\t\tcenterleftX * 3 - 50,\r\n\t\t\t\tcenterY,\r\n\t\t\t\tthis.radius,\r\n\t\t\t\t0,\r\n\t\t\t\t2 * Math.PI,\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tcontext.fillStyle = 'white';\r\n\t\t\tcontext.fill();\r\n\r\n\t\t\t// first circle (hit_set)\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.arc(\r\n\t\t\t\tcenterleftX + 50,\r\n\t\t\t\tcenterY,\r\n\t\t\t\tthis.radius,\r\n\t\t\t\t0,\r\n\t\t\t\t2 * Math.PI,\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tcolor = color = chroma(this.$store.state.sets[this.hit_set].color)\r\n\t\t\t\t.alpha(this.default_opacity)\r\n\t\t\t\t.css();\r\n\t\t\tcontext.fillStyle = color;\r\n\t\t\tcontext.fill();\r\n\r\n\t\t\t// second circle (dropped set)\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.arc(\r\n\t\t\t\tcenterleftX * 3 - 50,\r\n\t\t\t\tcenterY,\r\n\t\t\t\tthis.radius,\r\n\t\t\t\t0,\r\n\t\t\t\t2 * Math.PI,\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tcolor = color = chroma(\r\n\t\t\t\tthis.$store.state.sets[this.dropped_set].color\r\n\t\t\t)\r\n\t\t\t\t.alpha(this.default_opacity)\r\n\t\t\t\t.css();\r\n\t\t\tcontext.fillStyle = color;\r\n\t\t\tcontext.fill();\r\n\t\t},\r\n\r\n\t\tredraw(target) {\r\n\t\t\tlet imageData = this.canvas\r\n\t\t\t\t.getContext('2d')\r\n\t\t\t\t.getImageData(0, 0, this.width, this.height);\r\n\t\t\tlet data = imageData.data;\r\n\t\t\tif (target == 'neitherButAll') {\r\n\t\t\t\tlet opacity;\r\n\t\t\t\tif (this.selected['neitherButAll'])\r\n\t\t\t\t\topacity = this.selected_opacity * 255;\r\n\t\t\t\telse opacity = this.default_opacity * 255;\r\n\t\t\t\tfor (let i = 0; i < data.length; i += 4) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tchroma.deltaE(\r\n\t\t\t\t\t\t\tchroma([data[i], data[i + 1], data[i + 2]]),\r\n\t\t\t\t\t\t\tthis.colors['neitherButAll'].default.chroma\r\n\t\t\t\t\t\t) < 1.0\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tdata[i + 3] = opacity;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlet color, type;\r\n\t\t\t\tif (this.selected[target]) {\r\n\t\t\t\t\ttype = 'default';\r\n\t\t\t\t\tcolor = this.colors[target].selected.rgb;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttype = 'selected';\r\n\t\t\t\t\tcolor = this.colors[target].default.rgb;\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < data.length; i += 4) {\r\n\t\t\t\t\tlet oldColor = chroma([\r\n\t\t\t\t\t\tdata[i],\r\n\t\t\t\t\t\tdata[i + 1],\r\n\t\t\t\t\t\tdata[i + 2]\r\n\t\t\t\t\t]);\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tchroma.deltaE(oldColor, this.colors[target][type].chroma) <\r\n\t\t\t\t\t\t1.0\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tdata[i] = color[0];\r\n\t\t\t\t\t\tdata[i + 1] = color[1];\r\n\t\t\t\t\t\tdata[i + 2] = color[2];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.canvas.getContext('2d').putImageData(imageData, 0, 0);\r\n\t\t},\r\n\r\n\t\tonClick(e) {\r\n\t\t\tconst mousePos = {\r\n\t\t\t\tx: e.offsetX,\r\n\t\t\t\ty: e.offsetY\r\n\t\t\t};\r\n\t\t\t// get pixel under cursor\r\n\t\t\tconst pixel = this.canvas\r\n\t\t\t\t.getContext('2d')\r\n\t\t\t\t.getImageData(mousePos.x, mousePos.y, 1, 1).data;\r\n\t\t\t// create hex color for that pixel\r\n\t\t\t// const color = `rgba(${pixel[0]},${pixel[1]},${pixel[2]},${pixel[3]})`;\r\n\t\t\tlet color = chroma([pixel[0], pixel[1], pixel[2]]);\r\n\t\t\t// check if the color difference is small enough to conclude they're the same\r\n\t\t\tif (\r\n\t\t\t\t(this.selected['neitherButAll'] &&\r\n\t\t\t\t\tchroma.deltaE(\r\n\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\tthis.colors['neitherButAll'].selected.chroma\r\n\t\t\t\t\t) < 1.0) ||\r\n\t\t\t\t(!this.selected['neitherButAll'] &&\r\n\t\t\t\t\tchroma.deltaE(\r\n\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\tthis.colors['neitherButAll'].default.chroma\r\n\t\t\t\t\t) < 1.0)\r\n\t\t\t) {\r\n\t\t\t\tthis.selected['neitherButAll'] = !this.selected[\r\n\t\t\t\t\t'neitherButAll'\r\n\t\t\t\t];\r\n\t\t\t\tthis.redraw('neitherButAll');\r\n\t\t\t} else if (\r\n\t\t\t\t(this.selected['dropped_only'] &&\r\n\t\t\t\t\tchroma.deltaE(\r\n\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\tthis.colors['dropped_only'].selected.chroma\r\n\t\t\t\t\t) < 1.0) ||\r\n\t\t\t\t(!this.selected['dropped_only'] &&\r\n\t\t\t\t\tchroma.deltaE(\r\n\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\tthis.colors['dropped_only'].default.chroma\r\n\t\t\t\t\t) < 1.0)\r\n\t\t\t) {\r\n\t\t\t\tthis.selected['dropped_only'] = !this.selected['dropped_only'];\r\n\t\t\t\tthis.redraw('dropped_only');\r\n\t\t\t} else if (\r\n\t\t\t\t(this.selected['hit_only'] &&\r\n\t\t\t\t\tchroma.deltaE(color, this.colors['hit_only'].selected.chroma) <\r\n\t\t\t\t\t\t1.0) ||\r\n\t\t\t\t(!this.selected['hit_only'] &&\r\n\t\t\t\t\tchroma.deltaE(color, this.colors['hit_only'].default.chroma) <\r\n\t\t\t\t\t\t1.0)\r\n\t\t\t) {\r\n\t\t\t\tthis.selected['hit_only'] = !this.selected['hit_only'];\r\n\t\t\t\tthis.redraw('hit_only');\r\n\t\t\t} else {\r\n\t\t\t\t// intersect\r\n\t\t\t\tthis.selected['intersect'] = !this.selected['intersect'];\r\n\t\t\t\tthis.redraw('intersect');\r\n\t\t\t}\r\n\t\t\tthis.$emit('selectedOnDiagram', this.selected);\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tdialog(dialog) {\r\n\t\t\tif (!dialog) {\r\n\t\t\t\tObject.keys(this.selected).forEach(key => {\r\n\t\t\t\t\tthis.selected[key] = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis.getColor();\r\n\t\t\t\tthis.draw();\r\n\t\t\t}\r\n\t\t},\r\n\t\tdropped_set() {\r\n\t\t\tthis.getColor();\r\n\t\t\tthis.draw();\r\n\t\t},\r\n\t\thit_set() {\r\n\t\t\tthis.getColor();\r\n\t\t\tthis.draw();\r\n\t\t}\r\n\t}\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VennDiagram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VennDiagram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VennDiagram.vue?vue&type=template&id=77000cff&\"\nimport script from \"./VennDiagram.vue?vue&type=script&lang=js&\"\nexport * from \"./VennDiagram.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <v-toolbar flat light color=\"#E7E7E7\">\r\n        <v-toolbar-title class=\"ma-2\">SETS</v-toolbar-title>\r\n        <v-chip-group class=\"ml-2\" show-arrows dark>\r\n            <v-chip\r\n                v-for=\"(set, idx) in sets\"\r\n                :key=\"idx\"\r\n                draggable\r\n                @dragstart=\"dragStart\"\r\n                @dragover=\"allowDrop\"\r\n                @drop=\"promptSetOperation\"\r\n                :close=\"isClosable\"\r\n                class=\"mr-3\"\r\n                :color=\"set.color\"\r\n                @click:close=\"delSet(set.name)\"\r\n            >{{ set.name }}</v-chip>\r\n        </v-chip-group>\r\n        <v-dialog v-model=\"dialog\" persistent max-width=\"400px\">\r\n            <v-card>\r\n                <VennDiagram\r\n                    width=\"400\"\r\n                    height=\"250\"\r\n                    :hit_set=\"hit_set\"\r\n                    :dropped_set=\"dropped_set\"\r\n                    :dialog=\"dialog\"\r\n                    @selectedOnDiagram=\"selectedOnDiagram\"\r\n                />\r\n                <v-card-text v-if=\"setOperationSelected\" class=\"pt-5 pb-0\">\r\n                    <v-text-field v-model=\"setName\" dense hide-details single-line required></v-text-field>\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-card-text class=\"pt-5 pb-0\">\r\n                        <v-text-field v-model=\"setName\" label=\"Enter the set name\" required></v-text-field>\r\n                    </v-card-text>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn color=\"blue darken-1\" text @click=\"cancelAddSet\">Cancel</v-btn>\r\n                    <v-btn\r\n                        color=\"blue darken-1\"\r\n                        text\r\n                        @click=\"addSet\"\r\n                        :disabled=\"dialogAddDisabled\"\r\n                    >Add</v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </v-toolbar>\r\n</template>\r\n\r\n<script>\r\nimport VennDiagram from '@/components/VennDiagram';\r\nimport * as _ from 'lodash';\r\n\r\nexport default {\r\n\tname: 'SetBar',\r\n\tcomponents: {\r\n\t\tVennDiagram\r\n\t},\r\n\tcomputed: {\r\n\t\tisClosable() {\r\n\t\t\treturn this.$store.state.editMode;\r\n\t\t},\r\n\t\tsets() {\r\n\t\t\treturn this.$store.state.sets;\r\n\t\t},\r\n\t\tdialogAddDisabled() {\r\n\t\t\tif (this.setOperationSelected) return true;\r\n\t\t\telse return false;\r\n\t\t}\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdialog: false,\r\n\t\t\tsetName: '',\r\n\t\t\tsetOperationSelected: false,\r\n\t\t\tdropped_set: null,\r\n\t\t\thit_set: null,\r\n\t\t\tdiagramCalculations: {\r\n\t\t\t\tintersect: [],\r\n\t\t\t\thit_only: [],\r\n\t\t\t\tdropped_only: [],\r\n\t\t\t\tneitherButAll: []\r\n\t\t\t},\r\n\t\t\tselection: null\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tallowDrop(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t},\r\n\t\tdelSet(set) {\r\n\t\t\tif (set == 'all') this.$store.commit('delAllSet');\r\n\t\t\telse this.$store.commit('delSet', set);\r\n\t\t},\r\n\t\tdragStart(e) {\r\n\t\t\te.dataTransfer.setData('set', e.target.textContent);\r\n\t\t},\r\n\t\tpromptSetOperation(e) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.dropped_set = e.dataTransfer.getData('set');\r\n\t\t\tthis.hit_set = e.target.textContent;\r\n\t\t\tif (this.dropped_set == this.hit_set) return;\r\n\t\t\tif (!this.dialog) {\r\n                this.dialog = true;\r\n\t\t\t\tthis.precalculate();\r\n\t\t\t}\r\n\t\t},\r\n\t\taddSet() {\r\n\t\t\tlet tweets = [];\r\n\t\t\tObject.keys(this.diagramCalculations).forEach(key => {\r\n\t\t\t\tif (this.selection[key])\r\n\t\t\t\t\ttweets = _.concat(tweets, this.diagramCalculations[key]);\r\n\t\t\t});\r\n\t\t\tconsole.log(tweets.length);\r\n\t\t\tif (this.setName !== '') {\r\n\t\t\t\tlet payload = {\r\n\t\t\t\t\tname: this.setName,\r\n\t\t\t\t\tmembers: tweets\r\n\t\t\t\t};\r\n\t\t\t\tthis.$store.commit('addSet', payload);\r\n\t\t\t\tthis.dialog = false;\r\n\t\t\t\tthis.selection = null;\r\n\t\t\t\tObject.keys(this.diagramCalculations).forEach(key => {\r\n\t\t\t\t\tthis.diagramCalculations[key] = [];\r\n\t\t\t\t});\r\n\t\t\t\tthis.setName = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\tcancelAddSet() {\r\n\t\t\tthis.dialog = false;\r\n\t\t\tthis.selection = null;\r\n\t\t\tObject.keys(this.diagramCalculations).forEach(key => {\r\n\t\t\t\tthis.diagramCalculations[key] = [];\r\n\t\t\t});\r\n\t\t\tthis.setName = '';\r\n\t\t},\r\n\t\tprecalculate() {\r\n\t\t\tlet hit = this.$store.state.sets[this.hit_set].members;\r\n\t\t\tlet dropped = this.$store.state.sets[this.dropped_set].members;\r\n\t\t\tthis.diagramCalculations['hit_only'] = _.difference(hit, dropped);\r\n\t\t\tthis.diagramCalculations['dropped_only'] = _.difference(\r\n\t\t\t\tdropped,\r\n\t\t\t\thit\r\n\t\t\t);\r\n\t\t\tthis.diagramCalculations['intersect'] = _.difference(\r\n\t\t\t\tdropped,\r\n\t\t\t\tthis.diagramCalculations['dropped_only']\r\n\t\t\t);\r\n\t\t\tlet both = _.concat(\r\n\t\t\t\tthis.diagramCalculations['hit_only'],\r\n\t\t\t\tthis.diagramCalculations['dropped_only'],\r\n\t\t\t\tthis.diagramCalculations['intersect']\r\n\t\t\t);\r\n\t\t\tthis.diagramCalculations['neitherButAll'] = _.difference(\r\n\t\t\t\tthis.$store.state.sets['all'].members,\r\n\t\t\t\tboth\r\n\t\t\t);\r\n\t\t},\r\n\t\tselectedOnDiagram(selection) {\r\n\t\t\tthis.selection = selection;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.v-toolbar {\r\n\tfont-family: 'Montserrat', sans-serif;\r\n\tfont-weight: 600;\r\n}\r\n\r\n.v-chip {\r\n\tfont-family: 'Varela Round', sans-serif;\r\n\tfont-weight: 600;\r\n}\r\n\r\n.v-alert {\r\n\tmargin: 0;\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\t-ms-transform: translate(-50%, -50%);\r\n\ttransform: translate(-50%, -50%);\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SetBar.vue?vue&type=template&id=57205e04&scoped=true&\"\nimport script from \"./SetBar.vue?vue&type=script&lang=js&\"\nexport * from \"./SetBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SetBar.vue?vue&type=style&index=0&id=57205e04&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57205e04\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('grid-layout',{attrs:{\"layout\":_vm.gridLayout,\"col-num\":12,\"row-height\":100,\"is-draggable\":_vm.isDraggable,\"is-resizable\":_vm.isResizable,\"is-mirrored\":false,\"vertical-compact\":true,\"margin\":[10, 10],\"use-css-transforms\":true},on:{\"update:layout\":function($event){_vm.gridLayout=$event}}},_vm._l((_vm.gridLayout),function(item){return _c('grid-item',{key:item.i,attrs:{\"x\":item.x,\"y\":item.y,\"w\":item.w,\"h\":item.h,\"i\":item.i},on:{\"resized\":_vm.onResized}},[_c('viz-widget',{attrs:{\"widget\":item.widget,\"editable\":_vm.isEditable,\"resized\":_vm.resized}})],1)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"widget\",attrs:{\"flat\":\"\",\"light\":\"\",\"id\":_vm.widgetId},on:{\"dragover\":_vm.allowDrop,\"drop\":_vm.addSetToWidget}},[_c('v-card-title',{staticClass:\"ma-0 px-4 pt-2\"},[_c('span',{staticClass:\"viz-title\",style:(_vm.titleColor)},[_vm._v(_vm._s(_vm.$store.state.widgets[_vm.widget].type))]),_c('v-spacer'),_c('div',{staticClass:\"float-right\"},_vm._l((_vm.sets),function(set,idx){return _c('v-avatar',{key:idx,staticClass:\"ma-1\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"color\":_vm.getSetColor(set),\"size\":\"16\",\"draggable\":\"\"},on:{\"dragstart\":function($event){return _vm.dragStart(set, $event)}}},[(_vm.$store.state.editMode)?_c('v-icon',{attrs:{\"color\":\"white\",\"x-small\":\"\"},on:{\"click\":function($event){return _vm.delSetFromWidget(set)}}},[_vm._v(\"fa-times\")]):_vm._e()],1)}),1)],1),_c(_vm.component,{tag:\"component\",class:_vm.containerClass,attrs:{\"id\":_vm.componentId,\"chartId\":_vm.chartId,\"selected\":_vm.selected,\"sets\":_vm.sets,\"selectionMode\":_vm.selectionMode,\"update\":_vm.update,\"resizeInfo\":_vm.resizeInfo,\"componentId\":_vm.componentId}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MglMap',{attrs:{\"accessToken\":_vm.accessToken,\"mapStyle\":_vm.mapStyle,\"zoom\":_vm.zoom,\"attributionControl\":false},on:{\"update:mapStyle\":function($event){_vm.mapStyle=$event},\"update:map-style\":function($event){_vm.mapStyle=$event},\"load\":_vm.onMapLoaded}},[_vm._l((_vm.markersOriginPie),function(marker){return _c('MglMarker',{key:marker.id,attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Pie',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPie\":_vm.hoverOnChart,\"clickOnPie\":_vm.clickOnChart},slot:\"marker\"})],1)}),_vm._l((_vm.markersLocatedPie),function(marker){return _c('MglMarker',{key:marker.id,attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Pie',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPie\":_vm.hoverOnChart,\"clickOnPie\":_vm.clickOnChart},slot:\"marker\"})],1)}),_vm._l((_vm.markersOriginFlower),function(marker){return _c('MglMarker',{key:marker.id,attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Flower',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"range\":marker.range,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPetal\":_vm.hoverOnChart,\"clickOnPetal\":_vm.clickOnChart},slot:\"marker\"})],1)}),_vm._l((_vm.markersLocatedFlower),function(marker){return _c('MglMarker',{key:marker.id,attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Flower',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"range\":marker.range,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPetal\":_vm.hoverOnChart,\"clickOnPetal\":_vm.clickOnChart},slot:\"marker\"})],1)}),_vm._l((_vm.markersOriginLocal),function(marker){return _c('MglMarker',{key:marker.id,attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Pie',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPie\":_vm.hoverOnChart,\"clickOnPie\":_vm.clickOnChart},slot:\"marker\"})],1)}),_vm._l((_vm.markersLocatedLocal),function(marker){return _c('MglMarker',{key:marker.id,attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Pie',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPie\":_vm.hoverOnChart,\"clickOnPie\":_vm.clickOnChart},slot:\"marker\"})],1)}),_c('Tooltip',{ref:\"tooltip\"}),(!_vm.selectionMode)?_c('v-card',{staticClass:\"d-flex flex-column float-right mt-12 mr-5 pa-3\",attrs:{\"dark\":\"\",\"color\":\"rgba(128, 128, 128, 0.5)\"}},[_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Line\"},model:{value:(_vm.isLine),callback:function ($$v) {_vm.isLine=$$v},expression:\"isLine\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Arc\"},model:{value:(_vm.isArc),callback:function ($$v) {_vm.isArc=$$v},expression:\"isArc\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Origin Dots\"},model:{value:(_vm.isDotOrigin),callback:function ($$v) {_vm.isDotOrigin=$$v},expression:\"isDotOrigin\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Located Dots\"},model:{value:(_vm.isDotLocated),callback:function ($$v) {_vm.isDotLocated=$$v},expression:\"isDotLocated\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Line By Country\"},model:{value:(_vm.isLineCountry),callback:function ($$v) {_vm.isLineCountry=$$v},expression:\"isLineCountry\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Arc By Country\"},model:{value:(_vm.isArcCountry),callback:function ($$v) {_vm.isArcCountry=$$v},expression:\"isArcCountry\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Pies By Origin\"},model:{value:(_vm.isPieOrigin),callback:function ($$v) {_vm.isPieOrigin=$$v},expression:\"isPieOrigin\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Pies By Located\"},model:{value:(_vm.isPieLocated),callback:function ($$v) {_vm.isPieLocated=$$v},expression:\"isPieLocated\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Flowers By Origin\"},model:{value:(_vm.isFlowerOrigin),callback:function ($$v) {_vm.isFlowerOrigin=$$v},expression:\"isFlowerOrigin\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Flowers By Located\"},model:{value:(_vm.isFlowerLocated),callback:function ($$v) {_vm.isFlowerLocated=$$v},expression:\"isFlowerLocated\"}}),_c('v-switch',{attrs:{\"label\":_vm.clusterLockSwitchLabel},model:{value:(_vm.isClusterLocked),callback:function ($$v) {_vm.isClusterLocked=$$v},expression:\"isClusterLocked\"}})],1):_vm._e(),(!_vm.minimapShown)?_c('v-btn',{staticClass:\"mb-5\",attrs:{\"icon\":\"\",\"color\":\"rgba(255, 255, 255, 0.5)\",\"absolute\":\"\",\"x-large\":\"\",\"dark\":\"\",\"bottom\":\"\",\"left\":\"\"},on:{\"click\":function($event){_vm.minimapShown = true}}},[_c('v-icon',[_vm._v(\"fas fa-globe\")])],1):_vm._e(),(_vm.minimapShown)?_c('v-card',{staticClass:\"d-flex flex-column justify-end pa-1\",staticStyle:{\"width\":\"400px\",\"height\":\"250px\",\"position\":\"absolute\",\"bottom\":\"40px\"},attrs:{\"color\":\"rgba(128, 128, 128, 0.5)\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"icon\":\"\",\"color\":\"rgba(0, 0, 0, 1)\",\"x-small\":\"\"},on:{\"click\":function($event){_vm.minimapShown = false}}},[_c('v-icon',[_vm._v(\"fas fa-times\")])],1),_c('MiniMap',{attrs:{\"payload\":_vm.minimapPayload}})],1):_vm._e(),_c('ChartTooltip',{ref:\"chart_tooltip\"})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.type == 'tweet')?_c('div',{staticClass:\"tooltip\",style:(_vm.placement)},[_c('p',[_vm._m(0),_vm._v(\" \"+_vm._s(_vm.tweet.user.screen_name)+\" \")]),_c('p',[_vm._m(1),_vm._v(\" \"+_vm._s(_vm.tweet.text)+\" \")]),_c('p',[_vm._m(2),_vm._v(\" \"+_vm._s(_vm.tweet.place.full_name)+\" ( \"+_vm._s(_vm.tweet.place.type)+\" ) \")]),_c('p',[_vm._m(3),_vm._v(\" \"+_vm._s(_vm.tweet.predicted.name)+\" ( \"+_vm._s(_vm.tweet.predicted.type)+\" ) \")]),_c('p',[_vm._m(4),_vm._v(\" \"+_vm._s(_vm.tweet.dist)+\" \")])]):(_vm.type == 'country')?_c('div',{staticClass:\"tooltip\",style:(_vm.placement)},[_c('p',[_vm._m(5),_vm._v(\" \"+_vm._s(_vm.getCountryName(_vm.country.origin))+\" \")]),_c('p',[_vm._m(6),_vm._v(\" \"+_vm._s(_vm.getCountryName(_vm.country.located))+\" \")]),_c('p',[_vm._m(7),_vm._v(\" \"+_vm._s(_vm.country.count)+\" \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tooltip-icon\"},[_c('i',{staticClass:\"fas fa-at\",attrs:{\"aria-hidden\":\"true\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tooltip-icon\"},[_c('i',{staticClass:\"fab fa-twitter\",attrs:{\"aria-hidden\":\"true\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tooltip-icon\"},[_c('i',{staticClass:\"fas fa-map-marker\",attrs:{\"aria-hidden\":\"true\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tooltip-icon\"},[_c('i',{staticClass:\"fas fa-question\",attrs:{\"aria-hidden\":\"true\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tooltip-icon\"},[_c('i',{staticClass:\"fas fa-ruler\",attrs:{\"aria-hidden\":\"true\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tooltip-icon\"},[_c('i',{staticClass:\"fas fa-map-marker\",attrs:{\"aria-hidden\":\"true\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tooltip-icon\"},[_c('i',{staticClass:\"fas fa-question\",attrs:{\"aria-hidden\":\"true\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tooltip-icon\"},[_c('i',{staticClass:\"fas fa-hashtag\",attrs:{\"aria-hidden\":\"true\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div v-if=\"type == 'tweet'\" class=\"tooltip\" :style=\"placement\">\r\n            <p>\r\n                <span class=\"tooltip-icon\">\r\n                    <i class=\"fas fa-at\" aria-hidden=\"true\"></i>\r\n                </span>\r\n                {{ tweet.user.screen_name }}\r\n            </p>\r\n            <p>\r\n                <span class=\"tooltip-icon\">\r\n                    <i class=\"fab fa-twitter\" aria-hidden=\"true\"></i>\r\n                </span>\r\n                {{ tweet.text }}\r\n            </p>\r\n            <p>\r\n                <span class=\"tooltip-icon\">\r\n                    <i class=\"fas fa-map-marker\" aria-hidden=\"true\"></i>\r\n                </span>\r\n                {{ tweet.place.full_name }} ( {{ tweet.place.type }} )\r\n            </p>\r\n            <p>\r\n                <span class=\"tooltip-icon\">\r\n                    <i class=\"fas fa-question\" aria-hidden=\"true\"></i>\r\n                </span>\r\n                {{ tweet.predicted.name }} ( {{ tweet.predicted.type }} )\r\n            </p>\r\n            <p>\r\n                <span class=\"tooltip-icon\">\r\n                    <i class=\"fas fa-ruler\" aria-hidden=\"true\"></i>\r\n                </span>\r\n                {{ tweet.dist }}\r\n            </p>\r\n        </div>\r\n        <div v-else-if=\"type == 'country'\" class=\"tooltip\" :style=\"placement\">\r\n            <p>\r\n                <span class=\"tooltip-icon\">\r\n                    <i class=\"fas fa-map-marker\" aria-hidden=\"true\"></i>\r\n                </span>\r\n                {{ getCountryName(country.origin) }}\r\n            </p>\r\n            <p>\r\n                <span class=\"tooltip-icon\">\r\n                    <i class=\"fas fa-question\" aria-hidden=\"true\"></i>\r\n                </span>\r\n                {{ getCountryName(country.located) }}\r\n            </p>\r\n            <p>\r\n                <span class=\"tooltip-icon\">\r\n                    <i class=\"fas fa-hashtag\" aria-hidden=\"true\"></i>\r\n                </span>\r\n                {{ country.count }}\r\n            </p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'Tooltip',\r\n\r\n    data() {\r\n        return {\r\n            type: 'none',\r\n            tweet: null,\r\n            country: null,\r\n            placement: {\r\n                display: 'none'\r\n            }\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        getCountryName(code) {\r\n            if (!this.country_lookup)\r\n                this.country_lookup = require('country-js');\r\n            let info = this.country_lookup.search(code)[0];\r\n            let result = '';\r\n            if (!info) {\r\n                // Kosovo (XK) not in the library\r\n                if (code.toLowerCase() == 'xk') result = 'Kosovo';\r\n                else result = '';\r\n            } else {\r\n                result = info.name;\r\n            }\r\n            return result;\r\n        },\r\n        setTooltip(object, x, y, type) {\r\n            if (object) {\r\n                this.type = type;\r\n                if (type == 'tweet') {\r\n                    this.tweet = this.$store.state.data[object.type][\r\n                        object.idx\r\n                    ];\r\n                    this.placement.left = String(x + 15) + 'px';\r\n                    this.placement.top = String(y + 10) + 'px';\r\n                    this.placement.display = 'block';\r\n                } else if (type == 'country') {\r\n                    this.country = object;\r\n                    this.placement.left = String(x + 15) + 'px';\r\n                    this.placement.top = String(y + 10) + 'px';\r\n                    this.placement.display = 'block';\r\n                }\r\n            } else {\r\n                this.type = 'none';\r\n                this.placement.display = 'none';\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url('https://fonts.googleapis.com/css?family=Baloo&display=swap&subset=latin-ext');\r\n\r\n.tooltip {\r\n    position: absolute;\r\n    z-index: 1;\r\n    pointer-events: none;\r\n    font-family: 'Baloo', cursive;\r\n    font-size: 16px;\r\n    font-weight: 800;\r\n    color: whitesmoke;\r\n    -webkit-text-stroke: 1px black;\r\n}\r\n\r\n.tooltip p {\r\n    line-height: 1.2;\r\n    margin: 0;\r\n    padding-bottom: 0.5em;\r\n}\r\n\r\n.tooltip-icon {\r\n    display: inline-block !important;\r\n    width: 1em !important;\r\n    text-align: right;\r\n    color: #1dcaff !important;\r\n    padding-top: 0.08em !important;\r\n    padding-right: 0.5em !important;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tooltip.vue?vue&type=template&id=fa452c96&scoped=true&\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tooltip.vue?vue&type=style&index=0&id=fa452c96&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fa452c96\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-simple-table',{staticClass:\"tooltip\",style:(_vm.placement),attrs:{\"dark\":\"\",\"dense\":\"\"}},[_c('tbody',_vm._l((_vm.info),function(item,idx){return _c('tr',{key:idx},[_c('td',{staticClass:\"text-sm-right mr-0 pr-0\",style:(_vm.getStyleWithColor(item.set))},[_vm._v(_vm._s(item.set))]),_c('td',{staticClass:\"text-sm-left\"},[_vm._v(_vm._s(item.value))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-simple-table\r\n        class=\"tooltip\"\r\n        :style=\"placement\"\r\n        dark\r\n\t\tdense\r\n    >\r\n        <tbody>\r\n            <tr v-for=\"(item, idx) in info\" v-bind:key=\"idx\">\r\n                <td class=\"text-sm-right mr-0 pr-0\" :style=\"getStyleWithColor(item.set)\">{{ item.set }}</td>\r\n                <td class=\"text-sm-left\">{{ item.value }}</td>\r\n            </tr>\r\n        </tbody>\r\n    </v-simple-table>\r\n</template>\r\n\r\n<script>\r\nimport chroma from \"chroma-js\";\r\n\r\nexport default {\r\n    name: 'ChartTooltip',\r\n\r\n    data() {\r\n        return {\r\n            info: [],\r\n            placement: {\r\n                display: 'none'\r\n            }\r\n        };\r\n    },\r\n\r\n    methods: {\r\n\t\tgetStyleWithColor(set) {\r\n\t\t\tlet color = chroma(this.$store.state.sets[set].color).css();\r\n\t\t\treturn {color: color};\r\n\t\t},\r\n\r\n        getCountryName(code) {\r\n            if (!this.country_lookup)\r\n                this.country_lookup = require('country-js');\r\n            let info = this.country_lookup.search(code)[0];\r\n            let result = '';\r\n            if (!info) {\r\n                // Kosovo (XK) not in the library\r\n                if (code.toLowerCase() == 'xk') result = 'Kosovo';\r\n                else result = '';\r\n            } else {\r\n                result = info.name;\r\n            }\r\n            return result;\r\n        },\r\n        setTooltip(info, x, y, size) {\r\n            this.info = info;\r\n            this.placement.left = String(x + size + 10) + 'px';\r\n            this.placement.top = String(y) + 'px';\r\n            this.placement.display = 'block';\r\n        },\r\n        hideTooltip() {\r\n            this.placement.display = 'none';\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url('https://fonts.googleapis.com/css?family=Baloo&display=swap&subset=latin-ext');\r\n\r\n.tooltip {\r\n    position: absolute;\r\n    font-family: 'Baloo', cursive;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartTooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartTooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartTooltip.vue?vue&type=template&id=5aa4ef46&scoped=true&\"\nimport script from \"./ChartTooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartTooltip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChartTooltip.vue?vue&type=style&index=0&id=5aa4ef46&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5aa4ef46\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex-grow-1 ma-0 pa-0\"},[_c('Plotly',{attrs:{\"id\":_vm.chartId,\"data\":_vm.data,\"layout\":_vm.layout,\"display-mode-bar\":false}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"flex-grow-1 ma-0 pa-0\">\r\n        <Plotly :id=\"chartId\" :data=\"data\" :layout=\"layout\" :display-mode-bar=\"false\"></Plotly>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Plotly } from 'vue-plotly';\r\n\r\nexport default {\r\n    name: 'Pie',\r\n    components: {\r\n        Plotly\r\n    },\r\n    props: ['features', 'chartId', 'size', 'data', 'source'],\r\n    data: function() {\r\n        return {\r\n            layout: {\r\n                width: this.size,\r\n                margin: {\r\n                    l: 0,\r\n                    r: 0,\r\n                    b: 0,\r\n                    t: 0,\r\n                    pad: 0\r\n                },\r\n                font: {\r\n                    family: 'Varela Round',\r\n                    size: 14,\r\n                    color: '#7f7f7f'\r\n                },\r\n                paper_bgcolor: 'rgba(0,0,0,0)',\r\n                showlegend: false,\r\n                hoverlabel: {\r\n                    font: {\r\n                        family: 'Varela Round'\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    },\r\n    mounted() {\r\n        let chart = document.getElementById(this.chartId);\r\n        chart.on('plotly_hover', this.hoverHandler);\r\n        chart.on('plotly_unhover', this.unhoverHandler);\r\n        chart.on('plotly_click', this.clickHandler);\r\n    },\r\n    methods: {\r\n        hoverHandler() {\r\n            let info = []\r\n            this.data[0].labels.forEach((label, i) => {\r\n                info.push({set: label, value: this.data[0].values[i]})\r\n            });\r\n            let payload = {\r\n                items: this.features,\r\n                clusterId: this.chartId.split('-')[1],\r\n                source: this.source,\r\n                size: this.size,\r\n                info: info\r\n            };\r\n            this.$emit('hoverOnPie', payload);\r\n        },\r\n        unhoverHandler() {\r\n            this.$emit('hoverOnPie', null);\r\n        },\r\n        clickHandler() {\r\n            let payload = this.features;\r\n            this.$emit('clickOnPie', payload);\r\n        }\r\n    },\r\n    watch: {\r\n        size(size) {\r\n            this.layout.width = size;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.js-plotly-plot,\r\n.plot-container {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pie.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pie.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pie.vue?vue&type=template&id=3842edc2&scoped=true&\"\nimport script from \"./Pie.vue?vue&type=script&lang=js&\"\nexport * from \"./Pie.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Pie.vue?vue&type=style&index=0&id=3842edc2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3842edc2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex-grow-1 ma-0 pa-0\"},[_c('Plotly',{attrs:{\"id\":_vm.chartId,\"data\":_vm.data,\"layout\":_vm.layout,\"display-mode-bar\":false}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"flex-grow-1 ma-0 pa-0\">\r\n        <Plotly\r\n            :id=\"chartId\"\r\n            :data=\"data\"\r\n            :layout=\"layout\"\r\n            :display-mode-bar=\"false\"\r\n        ></Plotly>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Plotly } from 'vue-plotly';\r\n\r\nexport default {\r\n    name: 'Flower',\r\n    components: {\r\n        Plotly\r\n    },\r\n    props: ['features', 'chartId', 'size', 'data', 'range', 'source'],\r\n    data: function() {\r\n        return {\r\n            layout: {\r\n                width: this.size,\r\n                margin: {\r\n                    l: 0,\r\n                    r: 0,\r\n                    b: 0,\r\n                    t: 0,\r\n                    pad: 0\r\n                },\r\n                font: {\r\n                    family: 'Varela Round',\r\n                    size: 14,\r\n                    color: '#7f7f7f'\r\n                },\r\n                paper_bgcolor: 'rgba(0,0,0,0)',\r\n                showlegend: false,\r\n                hoverlabel: {\r\n                    bgcolor: 'rgba(0,0,0,0)',\r\n                    font: {\r\n                        family: 'Varela Round'\r\n                    }\r\n                },\r\n                hovermode: 'closest',\r\n                polar: {\r\n                    // barmode: 'overlay',\r\n                    barmode: 'stack',\r\n                    bargap: 0,\r\n                    radialaxis: { visible: false, range: this.range },\r\n                    angularaxis: { visible: false, direction: 'clockwise' },\r\n                    bgcolor: 'rgba(0, 0, 0, 0)'\r\n                }\r\n            }\r\n        };\r\n    },\r\n    mounted() {\r\n        let chart = document.getElementById(this.chartId);\r\n        chart.on('plotly_hover', this.hoverHandler);\r\n        chart.on('plotly_unhover', this.unhoverHandler);\r\n        chart.on('plotly_click', this.clickHandler);\r\n        this.colors = [];\r\n        this.data.forEach(datum => {\r\n            this.colors.push(datum.marker.color);\r\n        });\r\n    },\r\n    methods: {\r\n        hoverHandler(data) {\r\n            let idx = data.points[0].pointIndex;\r\n            this.data.forEach((datum, i) => {\r\n                let colors = [];\r\n                for (let j = 0; j < 8; j++) {\r\n                    if (j == idx) colors.push('#ffffff');\r\n                    else colors.push(this.colors[i]);\r\n                }\r\n                datum.marker.color = colors;\r\n            });\r\n            let info = []\r\n            this.data.forEach(set => {\r\n                info.push({set: set.name, value: set.r[data.points[0].pointIndex]})\r\n            });\r\n            let payload = {\r\n                items: this.features[data.points[0].theta],\r\n                clusterId: this.chartId.split('-')[1],\r\n                source: this.source,\r\n                size: this.size,\r\n                info: info\r\n            };\r\n            this.$emit('hoverOnPetal', payload);\r\n        },\r\n        unhoverHandler() {\r\n            this.data.forEach((datum, i) => {\r\n                datum.marker.color = this.colors[i];\r\n            });\r\n            this.$emit('hoverOnPetal', null);\r\n        },\r\n        clickHandler(data) {\r\n            let payload = this.features[data.points[0].theta];\r\n            this.$emit('clickOnPetal', payload);\r\n        }\r\n    },\r\n    created() {\r\n        this.$emit('roseCreated');        \r\n    },\r\n    watch: {\r\n        size(size) {\r\n            this.layout.width = size;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.js-plotly-plot,\r\n.plot-container {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Flower.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Flower.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Flower.vue?vue&type=template&id=b0d2ae2e&scoped=true&\"\nimport script from \"./Flower.vue?vue&type=script&lang=js&\"\nexport * from \"./Flower.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Flower.vue?vue&type=style&index=0&id=b0d2ae2e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b0d2ae2e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MglMap',{attrs:{\"accessToken\":_vm.accessToken,\"mapStyle\":_vm.mapStyle,\"zoom\":_vm.zoom,\"attributionControl\":false,\"maxBounds\":_vm.maxBounds},on:{\"update:mapStyle\":function($event){_vm.mapStyle=$event},\"update:map-style\":function($event){_vm.mapStyle=$event},\"load\":_vm.onMapLoaded}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <MglMap\r\n        :accessToken=\"accessToken\"\r\n        :mapStyle.sync=\"mapStyle\"\r\n        :zoom=\"zoom\"\r\n        @load=\"onMapLoaded\"\r\n        :attributionControl=\"false\"\r\n        :maxBounds=\"maxBounds\"\r\n    >\r\n    </MglMap>\r\n</template>\r\n\r\n<script>\r\nimport { MglMap } from 'vue-mapbox';\r\n\r\nexport default {\r\n    name: 'MiniMap',\r\n\r\n    components: {\r\n        MglMap\r\n    },\r\n\r\n    props: ['payload'],\r\n\r\n    data() {\r\n        return {\r\n            accessToken:\r\n                'pk.eyJ1Ijoib2h5ZWFoYnJhdm8iLCJhIjoiY2swMmRwM3RxMG1vejNpbGNmaTh0MGYzaiJ9.SILsxJa7qEHxs-MZsgTk5A', // your access token. Needed if you using Mapbox maps\r\n            mapStyle: 'mapbox://styles/mapbox/dark-v10',\r\n            zoom: 1,\r\n            // not -90 to 90 as it causes the panning to go beyond the map size\r\n            maxBounds: [\r\n                [-180, -85],\r\n                [180, 85]\r\n            ],\r\n            sourceId: 'source',\r\n            layerIds: []\r\n        };\r\n    },\r\n\r\n    computed: {},\r\n\r\n    methods: {\r\n        onMapLoaded(e) {\r\n            this.minimap = e.map;\r\n            this.zoom = 0;\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        payload(payload) {\r\n            if (payload) {\r\n                if (this.minimap.getSource(this.sourceId) === undefined) {\r\n                    let geojson = {\r\n                        type: 'geojson',\r\n                        data: {\r\n                            type: 'FeatureCollection',\r\n                            features: payload.features\r\n                        }\r\n                    };\r\n                    console.log(geojson);\r\n                    this.minimap.addSource(this.sourceId, geojson);\r\n                } else {\r\n                    this.minimap.getSource('source').setData({\r\n                        type: 'FeatureCollection',\r\n                        features: payload.features\r\n                    });\r\n                }\r\n                this.layerIds.forEach(id => {\r\n                    this.minimap.removeLayer(id);\r\n                });\r\n                this.layerIds = [];\r\n                payload.layers.forEach(layer => {\r\n                    this.layerIds.push(layer.id);\r\n                    this.minimap.addLayer(layer);\r\n                });\r\n            } else {\r\n                this.layerIds.forEach(id => {\r\n                    this.minimap.removeLayer(id);\r\n                });\r\n                this.layerIds = [];\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MiniMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MiniMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MiniMap.vue?vue&type=template&id=70c50471&scoped=true&\"\nimport script from \"./MiniMap.vue?vue&type=script&lang=js&\"\nexport * from \"./MiniMap.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70c50471\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <MglMap\r\n        :accessToken=\"accessToken\"\r\n        :mapStyle.sync=\"mapStyle\"\r\n        :zoom=\"zoom\"\r\n        @load=\"onMapLoaded\"\r\n        :attributionControl=\"false\"\r\n    >\r\n        <!-- <MglAttributionControl position=\"bottom-left\" style=\"display:inline-block;\"/> -->\r\n        <MglMarker\r\n            v-for=\"marker in markersOriginPie\"\r\n            v-bind:key=\"marker.id\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Pie\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPie=\"hoverOnChart\"\r\n                @clickOnPie=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersLocatedPie\"\r\n            v-bind:key=\"marker.id\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Pie\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPie=\"hoverOnChart\"\r\n                @clickOnPie=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersOriginFlower\"\r\n            v-bind:key=\"marker.id\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Flower\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :range=\"marker.range\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPetal=\"hoverOnChart\"\r\n                @clickOnPetal=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersLocatedFlower\"\r\n            v-bind:key=\"marker.id\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Flower\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :range=\"marker.range\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPetal=\"hoverOnChart\"\r\n                @clickOnPetal=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersOriginLocal\"\r\n            v-bind:key=\"marker.id\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Pie\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPie=\"hoverOnChart\"\r\n                @clickOnPie=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersLocatedLocal\"\r\n            v-bind:key=\"marker.id\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Pie\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPie=\"hoverOnChart\"\r\n                @clickOnPie=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <Tooltip ref=\"tooltip\" />\r\n        <v-card\r\n            v-if=\"!selectionMode\"\r\n            dark\r\n            color=\"rgba(128, 128, 128, 0.5)\"\r\n            class=\"d-flex flex-column float-right mt-12 mr-5 pa-3\"\r\n        >\r\n            <v-checkbox dense hide-details class=\"my-1 mx-0 pa-0\" v-model=\"isLine\" label=\"Line\" />\r\n            <v-checkbox dense hide-details class=\"my-1 mx-0 pa-0\" v-model=\"isArc\" label=\"Arc\" />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isDotOrigin\"\r\n                label=\"Origin Dots\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isDotLocated\"\r\n                label=\"Located Dots\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isLineCountry\"\r\n                label=\"Line By Country\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isArcCountry\"\r\n                label=\"Arc By Country\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isPieOrigin\"\r\n                label=\"Pies By Origin\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isPieLocated\"\r\n                label=\"Pies By Located\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isFlowerOrigin\"\r\n                label=\"Flowers By Origin\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isFlowerLocated\"\r\n                label=\"Flowers By Located\"\r\n            />\r\n            <v-switch v-model=\"isClusterLocked\" :label=\"clusterLockSwitchLabel\"></v-switch>\r\n        </v-card>\r\n        <v-btn\r\n            v-if=\"!minimapShown\"\r\n            @click=\"minimapShown = true\"\r\n            icon\r\n            color=\"rgba(255, 255, 255, 0.5)\"\r\n            absolute\r\n            x-large\r\n            dark\r\n            bottom\r\n            left\r\n            class=\"mb-5\"\r\n        >\r\n            <v-icon>fas fa-globe</v-icon>\r\n        </v-btn>\r\n        <v-card\r\n            v-if=\"minimapShown\"\r\n            color=\"rgba(128, 128, 128, 0.5)\"\r\n            style=\"width: 400px; height: 250px; position: absolute; bottom: 40px;\"\r\n            class=\"d-flex flex-column justify-end pa-1\"\r\n        >\r\n            <v-btn @click=\"minimapShown = false\" icon color=\"rgba(0, 0, 0, 1)\" x-small class=\"ma-0\">\r\n                <v-icon>fas fa-times</v-icon>\r\n            </v-btn>\r\n            <MiniMap :payload=\"minimapPayload\" />\r\n        </v-card>\r\n        <ChartTooltip ref=\"chart_tooltip\" />\r\n    </MglMap>\r\n</template>\r\n\r\n<script>\r\n// import { MglMap,MglAttributionControl } from 'vue-mapbox';\r\nimport { MglMap, MglMarker } from 'vue-mapbox';\r\nimport { MapboxLayer } from '@deck.gl/mapbox';\r\nimport { DataFilterExtension } from '@deck.gl/extensions';\r\nimport { LineLayer, ArcLayer, ScatterplotLayer } from '@deck.gl/layers';\r\nimport Tooltip from '@/components/widgets/Tooltip';\r\nimport ChartTooltip from '@/components/widgets/ChartTooltip';\r\nimport Pie from '@/components/widgets/Pie';\r\nimport Flower from '@/components/widgets/Flower';\r\nimport MiniMap from '@/components/widgets/MiniMap';\r\nimport * as d3 from 'd3';\r\nimport * as turf from '@turf/turf';\r\n\r\nexport default {\r\n\tname: 'MapVerOne',\r\n\r\n\tcomponents: {\r\n\t\tMglMap,\r\n\t\t// MglAttributionControl,\r\n\t\tTooltip,\r\n\t\tMglMarker,\r\n\t\tPie,\r\n\t\tFlower,\r\n\t\tMiniMap,\r\n\t\tChartTooltip\r\n\t},\r\n\r\n\tprops: ['componentId', 'sets', 'selectionMode', 'update', 'resizeInfo'],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\titems: [],\r\n\t\t\taccessToken:\r\n\t\t\t\t'pk.eyJ1Ijoib2h5ZWFoYnJhdm8iLCJhIjoiY2swMmRwM3RxMG1vejNpbGNmaTh0MGYzaiJ9.SILsxJa7qEHxs-MZsgTk5A', // your access token. Needed if you using Mapbox maps\r\n\t\t\tmapStyle: 'mapbox://styles/mapbox/dark-v10',\r\n\t\t\tzoom: 2,\r\n\t\t\t// not -90 to 90 as it causes the panning to go beyond the map size\r\n\t\t\tmaxBounds: [\r\n\t\t\t\t[-180, -85],\r\n\t\t\t\t[180, 85]\r\n\t\t\t],\r\n\t\t\tminimapPayload: null,\r\n\t\t\topacity: 0.5, // 204 (0.8)\r\n\t\t\tcanvas: null,\r\n\t\t\tstartScreenXY: null, // starting xy coords when mousedown\r\n\t\t\tcurrentScreenXY: null, // current xy coords when mousemove or moseup\r\n\t\t\tstartMapXY: null,\r\n\t\t\tcurrentMapXY: null,\r\n\t\t\tselectedRange: null,\r\n\t\t\tfilterExtension: [new DataFilterExtension({ filterSize: 2 })],\r\n\t\t\tbox: null,\r\n\t\t\tminimapShown: false,\r\n\t\t\tminCountryCount: Infinity,\r\n\t\t\tmaxCountryCount: 0,\r\n\t\t\tsetFilters: {},\r\n\t\t\tisClusterLocked: false,\r\n\t\t\thoverSourceId: 'hovered',\r\n\t\t\thoverLayerIds: [],\r\n\t\t\tmarkersOriginPie: [],\r\n\t\t\tmarkersLocatedPie: [],\r\n\t\t\tmarkersOriginFlower: [],\r\n\t\t\tmarkersLocatedFlower: [],\r\n\t\t\tmarkersOriginLocal: [],\r\n\t\t\tmarkersLocatedLocal: [],\r\n\t\t\tclusters: {},\r\n\t\t\tfeatures: {\r\n\t\t\t\torigin: [],\r\n\t\t\t\tlocated: []\r\n\t\t\t},\r\n\t\t\tsourceLoaded: {\r\n\t\t\t\torigin: false,\r\n\t\t\t\tlocated: false\r\n\t\t\t},\r\n\t\t\tlayers: {\r\n\t\t\t\torigin_noncluster: null,\r\n\t\t\t\tlocated_noncluster: null,\r\n\t\t\t\tline: {},\r\n\t\t\t\tarc: {},\r\n\t\t\t\tdot_located: {},\r\n\t\t\t\tdot_origin: {},\r\n\t\t\t\tline_country: {},\r\n\t\t\t\tarc_country: {},\r\n\t\t\t\thighlighted: {}\r\n\t\t\t},\r\n\t\t\t// variables for layer toggling\r\n\t\t\tisLine: true,\r\n\t\t\tisArc: false,\r\n\t\t\tisDotOrigin: false,\r\n\t\t\tisDotLocated: false,\r\n\t\t\tisLineCountry: false,\r\n\t\t\tisArcCountry: false,\r\n\t\t\tisPieOrigin: false,\r\n\t\t\tisPieLocated: false,\r\n\t\t\tisFlowerOrigin: false,\r\n\t\t\tisFlowerLocated: false\r\n\t\t};\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tsettings() {\r\n\t\t\treturn {\r\n\t\t\t\tline: this.isLine,\r\n\t\t\t\tarc: this.isArc,\r\n\t\t\t\tdot_origin: this.isDotOrigin,\r\n\t\t\t\tdot_located: this.isDotLocated,\r\n\t\t\t\tline_country: this.isLineCountry,\r\n\t\t\t\tarc_country: this.isArcCountry,\r\n\t\t\t\tpie_located: this.isPieLocated,\r\n\t\t\t\tpie_origin: this.isPieOrigin,\r\n\t\t\t\tflower_origin: this.isFlowerOrigin,\r\n\t\t\t\tflower_located: this.isFlowerLocated\r\n\t\t\t};\r\n\t\t},\r\n\t\tcountryCountRange() {\r\n\t\t\treturn [this.minCountryCount, this.maxCountryCount];\r\n\t\t},\r\n\t\tcolorFilters() {\r\n\t\t\tlet filters = ['case'];\r\n\t\t\tObject.keys(this.setFilters).forEach(set => {\r\n\t\t\t\tfilters.push(this.setFilters[set]);\r\n\t\t\t\tfilters.push(this.$store.state.sets[set].color);\r\n\t\t\t});\r\n\t\t\t// default color\r\n\t\t\tfilters.push('#ffffff');\r\n\t\t\treturn filters;\r\n\t\t},\r\n\t\tclusterLockSwitchLabel() {\r\n\t\t\tif (this.isClusterLocked) return 'Cluster Locked';\r\n\t\t\telse return 'Cluster Unlocked';\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\taddSet(setName) {\r\n\t\t\tlet set = this.$store.state.sets[setName];\r\n\t\t\t// set filter later needed for color setFilters\r\n\t\t\tthis.setFilters[setName] = ['==', ['get', 'set'], setName];\r\n\r\n\t\t\tset.members.forEach(member => {\r\n\t\t\t\tlet set_id = member.type + member.idx;\r\n\t\t\t\tlet item = this.$store.state.data[member.type][member.idx];\r\n\t\t\t\tlet origin = {\r\n\t\t\t\t\ttype: 'Feature',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tset: setName,\r\n\t\t\t\t\t\tset_id: set_id,\r\n\t\t\t\t\t\ttarget: [\r\n\t\t\t\t\t\t\titem.predicted.coordinates[1],\r\n\t\t\t\t\t\t\titem.predicted.coordinates[0]\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tdist: item.dist,\r\n\t\t\t\t\t\tdir: item.place.dir,\r\n\t\t\t\t\t\ttype: 'origin'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\ttype: 'Point',\r\n\t\t\t\t\t\tcoordinates: [\r\n\t\t\t\t\t\t\tthis.$store.state.data[member.type][member.idx]\r\n\t\t\t\t\t\t\t\t.place.coordinates[1],\r\n\t\t\t\t\t\t\tthis.$store.state.data[member.type][member.idx]\r\n\t\t\t\t\t\t\t\t.place.coordinates[0]\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthis.features.origin.push(origin);\r\n\t\t\t\tlet located = {\r\n\t\t\t\t\ttype: 'Feature',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tset: setName,\r\n\t\t\t\t\t\tset_id: set_id,\r\n\t\t\t\t\t\ttarget: [\r\n\t\t\t\t\t\t\titem.place.coordinates[1],\r\n\t\t\t\t\t\t\titem.place.coordinates[0]\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tdist: item.dist,\r\n\t\t\t\t\t\tdir: item.predicted.dir,\r\n\t\t\t\t\t\ttype: 'located'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\ttype: 'Point',\r\n\t\t\t\t\t\tcoordinates: [\r\n\t\t\t\t\t\t\tthis.$store.state.data[member.type][member.idx]\r\n\t\t\t\t\t\t\t\t.predicted.coordinates[1],\r\n\t\t\t\t\t\t\tthis.$store.state.data[member.type][member.idx]\r\n\t\t\t\t\t\t\t\t.predicted.coordinates[0]\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthis.features.located.push(located);\r\n\t\t\t});\r\n\t\t\t// add source or update features if exists\r\n\t\t\tObject.keys(this.features).forEach(type => {\r\n\t\t\t\tif (this.map.getSource(type) == undefined) {\r\n\t\t\t\t\tlet geojson = {\r\n\t\t\t\t\t\ttype: 'geojson',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\t\t\tfeatures: this.features[type]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcluster: true,\r\n\t\t\t\t\t\tclusterRadius: 50\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.map.addSource(type, geojson);\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.map.getSource(type).setData({\r\n\t\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\t\tfeatures: this.features[type]\r\n\t\t\t\t\t});\r\n\t\t\t\tthis.sourceLoaded[type] = false;\r\n\t\t\t});\r\n\r\n\t\t\tObject.keys(this.settings).forEach(layer => {\r\n\t\t\t\tif (this.settings[layer]) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t'pie_origin',\r\n\t\t\t\t\t\t\t'pie_located',\r\n\t\t\t\t\t\t\t'flower_origin',\r\n\t\t\t\t\t\t\t'flower_located'\r\n\t\t\t\t\t\t].includes(layer)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlet source = layer.split('_')[1];\r\n\t\t\t\t\t\tif (!this.layers[source + '_noncluster']) {\r\n\t\t\t\t\t\t\tthis.getIntegratedLayer(layer);\r\n\t\t\t\t\t\t\tthis.map.addLayer(\r\n\t\t\t\t\t\t\t\tthis.layers[source + '_noncluster']\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconsole.log('layer added');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getSetLayer(layer, setName);\r\n\t\t\t\t\t\tthis.map.addLayer(this.layers[layer][setName]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tdeleteSet(setName) {\r\n\t\t\t// delete filter from the filter collection\r\n\t\t\tdelete this.setFilters[setName];\r\n\t\t\t// delete set features from the source data\r\n\t\t\tObject.keys(this.features).forEach(type => {\r\n\t\t\t\tlet newFeatures = [];\r\n\t\t\t\tthis.features[type].forEach(feature => {\r\n\t\t\t\t\tif (feature.properties.set != setName)\r\n\t\t\t\t\t\tnewFeatures.push(feature);\r\n\t\t\t\t});\r\n\t\t\t\tthis.features[type] = newFeatures;\r\n\t\t\t\tthis.map.getSource(type).setData({\r\n\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\tfeatures: newFeatures\r\n\t\t\t\t});\r\n\t\t\t\tthis.sourceLoaded[type] = false;\r\n\t\t\t});\r\n\t\t\t// removing the layers if needed\r\n\t\t\tObject.keys(this.settings).forEach(layer => {\r\n\t\t\t\tif (this.settings[layer]) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t![\r\n\t\t\t\t\t\t\t'pie_origin',\r\n\t\t\t\t\t\t\t'pie_located',\r\n\t\t\t\t\t\t\t'flower_origin',\r\n\t\t\t\t\t\t\t'flower_located'\r\n\t\t\t\t\t\t].includes(layer)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.map.removeLayer(this.layers[layer][setName].id);\r\n\t\t\t\t\t\tdelete this.layers[layer][setName];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet source = layer.split('_')[1];\r\n\t\t\t\t\t\tif (source == 'origin') this.markersOriginLocal = [];\r\n\t\t\t\t\t\telse this.markersLocatedLocal = [];\r\n\r\n\t\t\t\t\t\tif (layer == 'pie_origin') this.markersOriginPie = [];\r\n\t\t\t\t\t\telse if (layer == 'pie_located')\r\n\t\t\t\t\t\t\tthis.markersLocatedPie = [];\r\n\t\t\t\t\t\telse if (layer == 'flower_origin')\r\n\t\t\t\t\t\t\tthis.markersOriginFlower = [];\r\n\t\t\t\t\t\telse if (layer == 'flower_located')\r\n\t\t\t\t\t\t\tthis.markersLocatedFlower = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tonMapLoaded(e) {\r\n\t\t\tthis.map = e.map;\r\n\t\t\tthis.canvas = this.map.getCanvasContainer();\r\n\t\t\t// Disable default box zooming.\r\n\t\t\tthis.map.boxZoom.disable();\r\n\t\t\tthis.map.on('mousedown', this.onMouseDown);\r\n\t\t\tthis.map.on('mouseup', this.onMouseUp);\r\n\t\t},\r\n\r\n\t\tonRender() {\r\n\t\t\tif (!this.map.loaded() || this.isClusterLocked) return;\r\n\t\t\tif (this.isPieOrigin || this.isFlowerOrigin)\r\n\t\t\t\tif (!this.sourceLoaded.origin) {\r\n\t\t\t\t\tif (this.isPieOrigin) this.updateMarkers('pie_origin');\r\n\t\t\t\t\tif (this.isFlowerOrigin)\r\n\t\t\t\t\t\tthis.updateMarkers('flower_origin');\r\n\t\t\t\t\tthis.sourceLoaded.origin = true;\r\n\t\t\t\t}\r\n\t\t\tif (this.isPieLocated || this.isFlowerLocated)\r\n\t\t\t\tif (!this.sourceLoaded.located) {\r\n\t\t\t\t\tif (this.isPieLocated) this.updateMarkers('pie_located');\r\n\t\t\t\t\tif (this.isFlowerLocated)\r\n\t\t\t\t\t\tthis.updateMarkers('flower_located');\r\n\t\t\t\t\tthis.sourceLoaded.located = true;\r\n\t\t\t\t}\r\n\t\t},\r\n\r\n\t\tresetSourceLoaded() {\r\n\t\t\tObject.keys(this.sourceLoaded).forEach(key => {\r\n\t\t\t\tthis.sourceLoaded[key] = false;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tmousePos(e) {\r\n\t\t\tvar rect = this.canvas.getBoundingClientRect();\r\n\t\t\treturn [\r\n\t\t\t\te.clientX - rect.left - this.canvas.clientLeft,\r\n\t\t\t\te.clientY - rect.top - this.canvas.clientTop\r\n\t\t\t];\r\n\t\t},\r\n\r\n\t\tonMouseDown(e) {\r\n\t\t\t// Continue the rest of the function if the shiftkey is pressed.\r\n\t\t\tif (!(e.originalEvent.shiftKey && e.originalEvent.button === 0))\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// Disable default drag zooming when the shift key is held down.\r\n\t\t\tthis.map.dragPan.disable();\r\n\r\n\t\t\t// Call functions for the following events\r\n\t\t\tdocument.addEventListener('mousemove', this.onMouseMove);\r\n\r\n\t\t\t// Capture the first xy coordinates\r\n\t\t\tthis.startScreenXY = [e.point.x, e.point.y];\r\n\t\t\tthis.startMapXY = e.lngLat;\r\n\t\t},\r\n\r\n\t\tonMouseUp(e) {\r\n\t\t\t// Continue the rest of the function if the shiftkey is pressed.\r\n\t\t\tif (!(e.originalEvent.shiftKey && e.originalEvent.button === 0))\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// Capture xy coordinates\r\n\t\t\tthis.finish([this.startMapXY, e.lngLat]);\r\n\t\t},\r\n\r\n\t\tonMouseMove(e) {\r\n\t\t\t// Capture the ongoing xy coordinates\r\n\t\t\tthis.currentScreenXY = this.mousePos(e);\r\n\r\n\t\t\t// Append the box element if it doesnt exist\r\n\t\t\tif (!this.box) {\r\n\t\t\t\tthis.box = document.createElement('div');\r\n\t\t\t\tthis.box.classList.add('boxdraw');\r\n\t\t\t\tthis.canvas.appendChild(this.box);\r\n\t\t\t}\r\n\r\n\t\t\tlet minX = Math.min(this.startScreenXY[0], this.currentScreenXY[0]),\r\n\t\t\t\tmaxX = Math.max(this.startScreenXY[0], this.currentScreenXY[0]),\r\n\t\t\t\tminY = Math.min(this.startScreenXY[1], this.currentScreenXY[1]),\r\n\t\t\t\tmaxY = Math.max(this.startScreenXY[1], this.currentScreenXY[1]);\r\n\r\n\t\t\t// Adjust width and xy position of the box element ongoing\r\n\t\t\tlet pos = 'translate(' + minX + 'px,' + minY + 'px)';\r\n\t\t\tthis.box.style.transform = pos;\r\n\t\t\tthis.box.style.WebkitTransform = pos;\r\n\t\t\tthis.box.style.width = maxX - minX + 'px';\r\n\t\t\tthis.box.style.height = maxY - minY + 'px';\r\n\t\t\tthis.box.style.position = 'absolute';\r\n\t\t\tthis.box.style.background = 'rgba(238, 255, 65, 0.1)'; // yellow\r\n\t\t},\r\n\r\n\t\tfinish(bbox) {\r\n\t\t\t// Remove these events now that finish has been called.\r\n\t\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\r\n\r\n\t\t\tif (this.box) {\r\n\t\t\t\tthis.box.parentNode.removeChild(this.box);\r\n\t\t\t\tthis.box = null;\r\n\t\t\t}\r\n\r\n\t\t\t// If bbox exists, use it for selection\r\n\t\t\tif (bbox) {\r\n\t\t\t\tlet lng1 = Math.min(bbox[0].lng, bbox[1].lng),\r\n\t\t\t\t\tlng2 = Math.max(bbox[0].lng, bbox[1].lng),\r\n\t\t\t\t\tlat1 = Math.min(bbox[0].lat, bbox[1].lat),\r\n\t\t\t\t\tlat2 = Math.max(bbox[0].lat, bbox[1].lat);\r\n\r\n\t\t\t\tthis.selectedRange = [\r\n\t\t\t\t\t[lng1, lng2],\r\n\t\t\t\t\t[lat1, lat2]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\tthis.map.dragPan.enable();\r\n\t\t},\r\n\r\n\t\ttoggleLayer(layer, value) {\r\n\t\t\t// add layer\r\n\t\t\tif (value) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t'pie_origin',\r\n\t\t\t\t\t\t'pie_located',\r\n\t\t\t\t\t\t'flower_origin',\r\n\t\t\t\t\t\t'flower_located'\r\n\t\t\t\t\t].includes(layer)\r\n\t\t\t\t) {\r\n\t\t\t\t\tlet source = layer.split('_')[1];\r\n\t\t\t\t\tif (!this.layers[source + '_noncluster']) {\r\n\t\t\t\t\t\tthis.getIntegratedLayer(layer);\r\n\t\t\t\t\t\tthis.map.addLayer(this.layers[source + '_noncluster']);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sourceLoaded[source] = false;\r\n\t\t\t\t\t// adding map event for updating markers\r\n\t\t\t\t\tthis.map.on('render', this.onRender);\r\n\t\t\t\t\tthis.map.on('zoomend', this.resetSourceLoaded);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\t\tif (!this.layers[layer].hasOwnProperty(setName))\r\n\t\t\t\t\t\t\tthis.getSetLayer(layer, setName);\r\n\t\t\t\t\t\tthis.map.addLayer(this.layers[layer][setName]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// remove layer\r\n\t\t\t} else {\r\n\t\t\t\tif (\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t'pie_origin',\r\n\t\t\t\t\t\t'pie_located',\r\n\t\t\t\t\t\t'flower_origin',\r\n\t\t\t\t\t\t'flower_located'\r\n\t\t\t\t\t].includes(layer)\r\n\t\t\t\t) {\r\n\t\t\t\t\tlet source = layer.split('_')[1];\r\n\t\t\t\t\tif (source == 'origin' && !this.isPieOrigin) {\r\n\t\t\t\t\t\tthis.map.removeLayer(\r\n\t\t\t\t\t\t\tthis.layers['origin_noncluster'].id\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.layers['origin_noncluster'] = null;\r\n\t\t\t\t\t\tthis.markersOriginLocal = [];\r\n\t\t\t\t\t} else if (source == 'located' && !this.isPieLocated) {\r\n\t\t\t\t\t\tthis.map.removeLayer(\r\n\t\t\t\t\t\t\tthis.layers['located_noncluster'].id\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.layers['located_noncluster'] = null;\r\n\t\t\t\t\t\tthis.markersLocatedLocal = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// removing map event when no need to update markers\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!this.isPieOrigin &&\r\n\t\t\t\t\t\t!this.isPieLocated &&\r\n\t\t\t\t\t\t!this.isFlowerOrigin &&\r\n\t\t\t\t\t\t!this.isFlowerLocated\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.map.off('render', this.onRender);\r\n\t\t\t\t\t\tthis.map.off('zoomend', this.resetSourceLoaded);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (layer == 'pie_origin') this.markersOriginPie = [];\r\n\t\t\t\t\telse if (layer == 'pie_located')\r\n\t\t\t\t\t\tthis.markersLocatedPie = [];\r\n\t\t\t\t\telse if (layer == 'flower_origin')\r\n\t\t\t\t\t\tthis.markersOriginFlower = [];\r\n\t\t\t\t\telse if (layer == 'flower_located')\r\n\t\t\t\t\t\tthis.markersLocatedFlower = [];\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\t\tthis.map.removeLayer(this.layers[layer][setName].id);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetSelected() {\r\n\t\t\tlet selected = [];\r\n\t\t\tlet range = this.selectedRange;\r\n\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\tlet set = this.$store.state.sets[setName];\r\n\t\t\t\tset.members.forEach(d => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[1] >= range[0][0] &&\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[1] <= range[0][1] &&\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[0] >= range[1][0] &&\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[0] <= range[1][1]\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tselected.push(d);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn selected;\r\n\t\t},\r\n\r\n\t\thexToRGB(hex) {\r\n\t\t\tlet rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\t\tlet result = rgb\r\n\t\t\t\t? [\r\n\t\t\t\t\t\tparseInt(rgb[1], 16),\r\n\t\t\t\t\t\tparseInt(rgb[2], 16),\r\n\t\t\t\t\t\tparseInt(rgb[3], 16)\r\n\t\t\t\t  ]\r\n\t\t\t\t: null;\r\n\t\t\t// if (this.lineType == 'line') result.push(this.opacity);\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tgetCountryCoords(name) {\r\n\t\t\tif (!this.country_lookup)\r\n\t\t\t\tthis.country_lookup = require('country-js');\r\n\t\t\tlet info = this.country_lookup.search(name)[0];\r\n\t\t\tlet result = [];\r\n\t\t\tif (!info) {\r\n\t\t\t\t// Kosovo (XK) not in the library\r\n\t\t\t\tif (name.toLowerCase() == 'xk') result = [21.166191, 42.667542];\r\n\t\t\t\telse result = [0, 0];\r\n\t\t\t} else {\r\n\t\t\t\tlet coords = info.geo;\r\n\t\t\t\tresult = [coords.longitude, coords.latitude];\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tgetCalculatedValue(count) {\r\n\t\t\tlet min = 2;\r\n\t\t\tlet max = 50;\r\n\t\t\tlet portion =\r\n\t\t\t\t(count - this.minCountryCount) /\r\n\t\t\t\t(this.maxCountryCount - this.minCountryCount);\r\n\t\t\tlet result = (max - min + 1) * portion + min;\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tupdateMarkers(layer) {\r\n\t\t\tlet source = layer.split('_')[1];\r\n\t\t\tlet counts = [];\r\n\t\t\tthis.clusters = {};\r\n\t\t\tthis.map.querySourceFeatures(source).forEach(feature => {\r\n\t\t\t\t// continue only if the point is part of a cluster\r\n\t\t\t\tif (!feature.properties.cluster) return;\r\n\t\t\t\t// omit the clusters that are already added\r\n\t\t\t\tif (this.clusters.hasOwnProperty(feature.properties.cluster_id))\r\n\t\t\t\t\treturn;\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.clusters[feature.properties.cluster_id] = {\r\n\t\t\t\t\t\tcount: feature.properties.point_count,\r\n\t\t\t\t\t\tcoords: feature.geometry.coordinates\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcounts.push(feature.properties.point_count);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// this sets the scale for our circle radius and this is why we need the totals. We need to set a mininum and a maximum to define the domain and the range.\r\n\t\t\t// minimum value should be 22 as pixel value lower than 10 (for local connection) would appear super big\r\n\t\t\tthis.scale = d3\r\n\t\t\t\t.scaleLinear()\r\n\t\t\t\t.domain([d3.min(counts), d3.max(counts)])\r\n\t\t\t\t.range([0, 80]);\r\n\r\n\t\t\tObject.keys(this.clusters).forEach((clusterId, i) => {\r\n\t\t\t\t// get points underneath\r\n\t\t\t\tthis.map\r\n\t\t\t\t\t.getSource(source)\r\n\t\t\t\t\t.getClusterLeaves(\r\n\t\t\t\t\t\tparseInt(clusterId),\r\n\t\t\t\t\t\tthis.clusters[clusterId].count,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t(err, leaves) => {\r\n\t\t\t\t\t\t\tif (!err)\r\n\t\t\t\t\t\t\t\tthis.saveClusterLeaves(\r\n\t\t\t\t\t\t\t\t\tleaves,\r\n\t\t\t\t\t\t\t\t\tclusterId,\r\n\t\t\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\t\t\tlayer\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsaveClusterLeaves(leaves, id, i, layer) {\r\n\t\t\tthis.clusters[id].leaves = leaves;\r\n\t\t\tif (i == Object.keys(this.clusters).length - 1)\r\n\t\t\t\tthis.updateCharts(layer);\r\n\t\t},\r\n\r\n\t\tupdateCharts(layer) {\r\n\t\t\tlet markers_local = [];\r\n\t\t\tlet markers = [];\r\n\t\t\tObject.keys(this.clusters).forEach(clusterId => {\r\n\t\t\t\tlet cluster = this.clusters[clusterId];\r\n\t\t\t\tlet radius = 0;\r\n\t\t\t\tlet center = cluster.coords;\r\n\t\t\t\t// get the approximate radius of the cluster\r\n\t\t\t\tcluster.leaves.forEach(leaf => {\r\n\t\t\t\t\tlet dist = turf.distance(center, leaf.geometry.coordinates);\r\n\t\t\t\t\tif (dist >= radius) radius = dist;\r\n\t\t\t\t});\r\n\t\t\t\t// get local and non-local connections;\r\n\t\t\t\tlet nonlocal = {};\r\n\t\t\t\tlet local = {};\r\n\t\t\t\tcluster.leaves.forEach(leaf => {\r\n\t\t\t\t\tlet dist = turf.distance(center, leaf.properties.target);\r\n\t\t\t\t\tif (dist > radius) {\r\n\t\t\t\t\t\tif (nonlocal.hasOwnProperty(leaf.properties.set))\r\n\t\t\t\t\t\t\tnonlocal[leaf.properties.set].push(leaf);\r\n\t\t\t\t\t\telse nonlocal[leaf.properties.set] = [leaf];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (local.hasOwnProperty(leaf.properties.set))\r\n\t\t\t\t\t\t\tlocal[leaf.properties.set].push(leaf);\r\n\t\t\t\t\t\telse local[leaf.properties.set] = [leaf];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet size_final = this.scale(cluster.count);\r\n\t\t\t\tlet size_min = 10;\r\n\t\t\t\tlet count_local = d3.sum(\r\n\t\t\t\t\tArray.from(Object.values(local), x => x.length)\r\n\t\t\t\t);\r\n\t\t\t\tlet count_nonlocal = d3.sum(\r\n\t\t\t\t\tArray.from(Object.values(nonlocal), x => x.length)\r\n\t\t\t\t);\r\n\t\t\t\tlet size_local =\r\n\t\t\t\t\t(size_final * count_local) / cluster.count + size_min;\r\n\t\t\t\tlet size_nonlocal = size_final + size_min;\r\n\r\n\t\t\t\t// add a chart for non-local connections\r\n\t\t\t\tlet type = layer.split('_')[0];\r\n\t\t\t\tlet marker;\r\n\t\t\t\tlet data;\r\n\t\t\t\t// pie chart\r\n\t\t\t\tif (type == 'pie' && count_nonlocal > 0) {\r\n\t\t\t\t\tlet values = [];\r\n\t\t\t\t\tlet labels = [];\r\n\t\t\t\t\tlet colors = [];\r\n\t\t\t\t\tlet features = [];\r\n\t\t\t\t\t// add local connection pie chart\r\n\t\t\t\t\tObject.keys(local).forEach(set => {\r\n\t\t\t\t\t\tvalues.push(local[set].length);\r\n\t\t\t\t\t\tlabels.push(set);\r\n\t\t\t\t\t\tcolors.push(this.$store.state.sets[set].color);\r\n\t\t\t\t\t\tlocal[set].forEach(item => {\r\n\t\t\t\t\t\t\tfeatures.push(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (values.length != 0) {\r\n\t\t\t\t\t\tlet data = [];\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\tvalues: values,\r\n\t\t\t\t\t\t\tlabels: labels,\r\n\t\t\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t\t\tcolors: colors\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\topacity: 0.8,\r\n\t\t\t\t\t\t\ttype: 'pie',\r\n\t\t\t\t\t\t\thoverinfo: 'none',\r\n\t\t\t\t\t\t\ttextinfo: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet marker = {\r\n\t\t\t\t\t\t\tid: 'marker_local_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\t\tchartId: 'chart_local_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\t\tsource: layer.split('_')[1],\r\n\t\t\t\t\t\t\tcoords: center,\r\n\t\t\t\t\t\t\tsize: size_local,\r\n\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\tfeatures: features\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tmarkers_local.push(marker);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvalues = [];\r\n\t\t\t\t\tlabels = [];\r\n\t\t\t\t\tcolors = [];\r\n\t\t\t\t\tdata = [];\r\n\t\t\t\t\tfeatures = [];\r\n\t\t\t\t\t// add non-local connection pie chart\r\n\t\t\t\t\tObject.keys(nonlocal).forEach(set => {\r\n\t\t\t\t\t\tvalues.push(nonlocal[set].length);\r\n\t\t\t\t\t\tlabels.push(set);\r\n\t\t\t\t\t\t// colors.push(this.$store.state.sets[set].color);\r\n\t\t\t\t\t\tcolors.push('#ffffff');\r\n\t\t\t\t\t\tnonlocal[set].forEach(item => {\r\n\t\t\t\t\t\t\tfeatures.push(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (values.length != 0) {\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\tvalues: values,\r\n\t\t\t\t\t\t\tlabels: labels,\r\n\t\t\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t\t\tcolors: colors\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\topacity: 0.1,\r\n\t\t\t\t\t\t\ttype: 'pie',\r\n\t\t\t\t\t\t\thoverinfo: 'none',\r\n\t\t\t\t\t\t\ttextinfo: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmarker = {\r\n\t\t\t\t\t\t\tid: 'marker_nonlocal_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\t\tchartId:\r\n\t\t\t\t\t\t\t\t'chart_nonlocal_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\t\tsource: layer.split('_')[1],\r\n\t\t\t\t\t\t\tcoords: center,\r\n\t\t\t\t\t\t\tsize: size_nonlocal,\r\n\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\tfeatures: features\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tmarkers.push(marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// rose chart\r\n\t\t\t\t} else if (type == 'flower' && count_nonlocal > 0) {\r\n\t\t\t\t\tdata = [];\r\n\t\t\t\t\tlet dirs = {\r\n\t\t\t\t\t\tNorth: [],\r\n\t\t\t\t\t\t'N-E': [],\r\n\t\t\t\t\t\tEast: [],\r\n\t\t\t\t\t\t'S-E': [],\r\n\t\t\t\t\t\tSouth: [],\r\n\t\t\t\t\t\t'S-W': [],\r\n\t\t\t\t\t\tWest: [],\r\n\t\t\t\t\t\t'N-W': []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tObject.keys(nonlocal).forEach(set => {\r\n\t\t\t\t\t\tlet r = [0, 0, 0, 0, 0, 0, 0, 0];\r\n\t\t\t\t\t\tnonlocal[set].forEach(item => {\r\n\t\t\t\t\t\t\tlet dir = item.properties.dir;\r\n\t\t\t\t\t\t\tlet idx = [\r\n\t\t\t\t\t\t\t\t'North',\r\n\t\t\t\t\t\t\t\t'N-E',\r\n\t\t\t\t\t\t\t\t'East',\r\n\t\t\t\t\t\t\t\t'S-E',\r\n\t\t\t\t\t\t\t\t'South',\r\n\t\t\t\t\t\t\t\t'S-W',\r\n\t\t\t\t\t\t\t\t'West',\r\n\t\t\t\t\t\t\t\t'N-W'\r\n\t\t\t\t\t\t\t].indexOf(dir);\r\n\t\t\t\t\t\t\tr[idx]++;\r\n\t\t\t\t\t\t\tdirs[dir].push(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\tr: r,\r\n\t\t\t\t\t\t\ttheta: [\r\n\t\t\t\t\t\t\t\t'North',\r\n\t\t\t\t\t\t\t\t'N-E',\r\n\t\t\t\t\t\t\t\t'East',\r\n\t\t\t\t\t\t\t\t'S-E',\r\n\t\t\t\t\t\t\t\t'South',\r\n\t\t\t\t\t\t\t\t'S-W',\r\n\t\t\t\t\t\t\t\t'West',\r\n\t\t\t\t\t\t\t\t'N-W'\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tname: set,\r\n\t\t\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t\t\tcolor: this.$store.state.sets[set].color\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttype: 'barpolar',\r\n\t\t\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\t\t\thoverinfo: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet maxN = d3.max(Array.from(data, x => d3.max(x.r)));\r\n\t\t\t\t\tlet offset = 0;\r\n\t\t\t\t\tif (count_local > 0)\r\n\t\t\t\t\t\toffset =\r\n\t\t\t\t\t\t\t(maxN * size_local) / (size_nonlocal - size_local);\r\n\t\t\t\t\t// let petal_buffer;\r\n\t\t\t\t\t// // give petal buffer of 10 pixel for small petal size\r\n\t\t\t\t\t// if(count_local > 0)\r\n\t\t\t\t\t//     petal_buffer = 8 * maxN / (size_nonlocal - size_local-8);\r\n\t\t\t\t\t// else petal_buffer = 8 * maxN / size_nonlocal\r\n\t\t\t\t\t// console.log(petal_buffer);\r\n\t\t\t\t\t// for(let i = 0; i < data.length; i++) {\r\n\t\t\t\t\t//     for(let j = 0; j < 8; j++) {\r\n\t\t\t\t\t//         if(data[i].r[j] > 0)\r\n\t\t\t\t\t//             data[i].r[j] += petal_buffer;\r\n\t\t\t\t\t//     }\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// let offset = (maxN * size_nonlocal) / 25;\r\n\t\t\t\t\tmarker = {\r\n\t\t\t\t\t\tid: 'marker_nonlocal_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\tchartId: 'chart_nonlocal_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\tsource: layer.split('_')[1],\r\n\t\t\t\t\t\tcoords: center,\r\n\t\t\t\t\t\tsize: size_nonlocal,\r\n\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\trange: [-offset, maxN],\r\n\t\t\t\t\t\tfeatures: dirs\r\n\t\t\t\t\t};\r\n\t\t\t\t\tmarkers.push(marker);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// check if the marker with the cluster_id is already on the screen by iterating through our markersOnScreen object, which keeps track of that\r\n\t\t\tif (layer == 'pie_origin') {\r\n\t\t\t\t// this.markersOriginPie = markers;\r\n\t\t\t\tthis.markersOriginLocal = markers_local;\r\n\t\t\t} else if (layer == 'pie_located') {\r\n\t\t\t\t// this.markersLocatedPie = markers;\r\n\t\t\t\tthis.markersLocatedLocal = markers_local;\r\n\t\t\t} else if (layer == 'flower_origin')\r\n\t\t\t\tthis.markersOriginFlower = markers;\r\n\t\t\telse if (layer == 'flower_located')\r\n\t\t\t\tthis.markersLocatedFlower = markers;\r\n\t\t},\r\n\r\n\t\tgetIntegratedLayer(layer) {\r\n\t\t\tlet type = layer.split('_')[1];\r\n\t\t\tlet individualDots = {\r\n\t\t\t\tid: type + '_noncluster',\r\n\t\t\t\ttype: 'circle',\r\n\t\t\t\tsource: type,\r\n\t\t\t\tfilter: ['!=', ['get', 'cluster'], true],\r\n\t\t\t\tpaint: {}\r\n\t\t\t};\r\n\t\t\t// this.map.on('mouseenter', type + '_cluster', function(e) {\r\n\t\t\t//     console.log(e);\r\n\t\t\t//     // var coordinates = e.features[0].geometry.coordinates.slice();\r\n\t\t\t//     // var description = e.features[0].properties.set;\r\n\t\t\t//     //     var features = this.map.queryRenderedFeatures(e.point, {\r\n\t\t\t//     //     layers: [type + '_cluster']\r\n\t\t\t//     // })\r\n\t\t\t//     //     console.log(features)\r\n\t\t\t// });\r\n\t\t\t// this.map.on('mouseleave', type + '_cluster', function() {\r\n\t\t\t//     console.log('mouse left');\r\n\t\t\t// });\r\n\r\n\t\t\t// color and shape settings\r\n\t\t\tif (type == 'origin') {\r\n\t\t\t\tindividualDots.paint['circle-color'] = this.colorFilters;\r\n\t\t\t\tindividualDots.paint['circle-radius'] = 2;\r\n\t\t\t} else {\r\n\t\t\t\tindividualDots.paint['circle-stroke-color'] = this.colorFilters;\r\n\t\t\t\tindividualDots.paint['circle-radius'] = 3;\r\n\t\t\t\tindividualDots.paint['circle-stroke-width'] = 2;\r\n\t\t\t\tindividualDots.paint['circle-color'] = 'rgba(0, 0, 0, 0)';\r\n\t\t\t}\r\n\t\t\tthis.layers[type + '_noncluster'] = individualDots;\r\n\t\t\tthis.updateMarkers(layer);\r\n\t\t},\r\n\r\n\t\tgetSetLayer(type, setName) {\r\n\t\t\tlet set = this.$store.state.sets[setName];\r\n\t\t\tlet layerConf = {\r\n\t\t\t\tid: type + '-' + setName,\r\n\t\t\t\tautoHighlight: true,\r\n\t\t\t\thighlightColor: [211, 211, 211],\r\n\t\t\t\tpickable: true\r\n\t\t\t};\r\n\r\n\t\t\t// layer type\r\n\t\t\tif (['line', 'line_country'].includes(type)) {\r\n\t\t\t\tlayerConf.type = LineLayer;\r\n\t\t\t\tlayerConf.getColor = () => this.hexToRGB(set.color);\r\n\t\t\t} else if (['arc', 'arc_country'].includes(type)) {\r\n\t\t\t\tlayerConf.type = ArcLayer;\r\n\t\t\t} else if (\r\n\t\t\t\t['dot_origin', 'dot_located', 'highlighted'].includes(type)\r\n\t\t\t) {\r\n\t\t\t\tlayerConf.type = ScatterplotLayer;\r\n\t\t\t\tlayerConf.filled = true;\r\n\t\t\t\tlayerConf.radiusScale = 10;\r\n\t\t\t}\r\n\r\n\t\t\t// layer data\r\n\t\t\tif (\r\n\t\t\t\t[\r\n\t\t\t\t\t'line',\r\n\t\t\t\t\t'arc',\r\n\t\t\t\t\t'dot_origin',\r\n\t\t\t\t\t'dot_located',\r\n\t\t\t\t\t'highlighted'\r\n\t\t\t\t].includes(type)\r\n\t\t\t) {\r\n\t\t\t\tlayerConf.data = set.members;\r\n\t\t\t\tlayerConf.onHover = ({ object, x, y }) =>\r\n\t\t\t\t\tthis.$refs.tooltip.setTooltip(object, x, y, 'tweet');\r\n\t\t\t} else if (['line_country', 'arc_country'].includes(type)) {\r\n\t\t\t\tlayerConf.data = set.stats.country.connections;\r\n\t\t\t\tlayerConf.onHover = ({ object, x, y }) =>\r\n\t\t\t\t\tthis.$refs.tooltip.setTooltip(object, x, y, 'country');\r\n\t\t\t\tlayerConf.getWidth = d => this.getCalculatedValue(d.count); // might have to tweak later;\r\n\t\t\t\tlayerConf.getSourcePosition = d =>\r\n\t\t\t\t\tthis.getCountryCoords(d.origin);\r\n\t\t\t\tlayerConf.getTargetPosition = d =>\r\n\t\t\t\t\tthis.getCountryCoords(d.located);\r\n\t\t\t}\r\n\r\n\t\t\tif (['arc', 'arc_country'].includes(type)) {\r\n\t\t\t\tlayerConf.getSourceColor = this.hexToRGB(set.color).concat(255);\r\n\t\t\t\tlayerConf.getTargetColor = this.hexToRGB(set.color).concat(30);\r\n\t\t\t} else {\r\n\t\t\t\tlayerConf.opacity = this.opacity;\r\n\t\t\t}\r\n\r\n\t\t\tif (type == 'line' || type == 'arc') {\r\n\t\t\t\tlayerConf.getWidth = 2;\r\n\t\t\t\tlayerConf.getSourcePosition = d => [\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place.coordinates[1],\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place.coordinates[0]\r\n\t\t\t\t];\r\n\t\t\t\tlayerConf.getTargetPosition = d => [\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx].predicted\r\n\t\t\t\t\t\t.coordinates[1],\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx].predicted\r\n\t\t\t\t\t\t.coordinates[0]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\tif (['dot_origin', 'dot_located'].includes(type)) {\r\n\t\t\t\tlayerConf.stroked = false;\r\n\t\t\t}\r\n\t\t\tif (['dot_origin', 'dot_located', 'highlighted'].includes(type)) {\r\n\t\t\t\tlayerConf.getFillColor = () => this.hexToRGB(set.color);\r\n\t\t\t\tlayerConf.radiusMinPixels = 2;\r\n\t\t\t\tlayerConf.radiusMaxPixels = 100;\r\n\t\t\t\tlayerConf.getRadius = d => Math.sqrt(d.exists);\r\n\t\t\t}\r\n\t\t\tif (['dot_origin', 'highlighted'].includes(type)) {\r\n\t\t\t\tlayerConf.getPosition = d => [\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx]['place']\r\n\t\t\t\t\t\t.coordinates[1],\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx]['place']\r\n\t\t\t\t\t\t.coordinates[0]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\t// individual settings\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'line':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'arc':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'line_country':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'arc_country':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dot_origin':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dot_located':\r\n\t\t\t\t\tlayerConf.getPosition = d => [\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx]['predicted']\r\n\t\t\t\t\t\t\t.coordinates[1],\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx]['predicted']\r\n\t\t\t\t\t\t\t.coordinates[0]\r\n\t\t\t\t\t];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'highlighted':\r\n\t\t\t\t\tlayerConf.stroked = true;\r\n\t\t\t\t\tlayerConf.lineWidthMinPixels = 0.5;\r\n\t\t\t\t\tlayerConf.getLineColor = [255, 255, 255];\r\n\t\t\t\t\tlayerConf.extensions = this.filterExtension;\r\n\t\t\t\t\tlayerConf.filterRange = [\r\n\t\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t\t[0, 0]\r\n\t\t\t\t\t];\r\n\t\t\t\t\tlayerConf.getFilterValue = d => [\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[1],\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[0]\r\n\t\t\t\t\t];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tlet layer = new MapboxLayer(layerConf);\r\n\t\t\tthis.layers[type][setName] = layer;\r\n\t\t},\r\n\r\n\t\thoverOnChart(payload) {\r\n\t\t\tif (payload == null) {\r\n\t\t\t\tthis.hoverLayerIds.forEach(id => {\r\n\t\t\t\t\tthis.map.removeLayer(id);\r\n\t\t\t\t});\r\n\t\t\t\tthis.minimapPayload = null;\r\n\t\t\t\tthis.$refs.chart_tooltip.hideTooltip();\r\n\t\t\t} else {\r\n\t\t\t\tthis.map\r\n\t\t\t\t\t.querySourceFeatures(payload.source)\r\n\t\t\t\t\t.forEach(feature => {\r\n\t\t\t\t\t\t// continue only if the point is part of a cluster\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tfeature.properties.cluster &&\r\n\t\t\t\t\t\t\tfeature.properties.cluster_id == payload.clusterId\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tlet point = this.map.project(\r\n\t\t\t\t\t\t\t\tfeature.geometry.coordinates\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthis.$refs.chart_tooltip.setTooltip(\r\n\t\t\t\t\t\t\t\tpayload.info,\r\n\t\t\t\t\t\t\t\tpoint.x,\r\n\t\t\t\t\t\t\t\tpoint.y,\r\n\t\t\t\t\t\t\t\tpayload.size / 2\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t// make feature collection with target coordinates\r\n\t\t\t\tlet features = [];\r\n\t\t\t\tpayload.items.forEach(item => {\r\n\t\t\t\t\tfeatures.push({\r\n\t\t\t\t\t\ttype: 'Feature',\r\n\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\tset: item.properties.set\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\t\ttype: 'Point',\r\n\t\t\t\t\t\t\tcoordinates: item.properties.target\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tif (this.map.getSource(this.hoverSourceId) === undefined) {\r\n\t\t\t\t\tlet geojson = {\r\n\t\t\t\t\t\ttype: 'geojson',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\t\t\tfeatures: features\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.map.addSource(this.hoverSourceId, geojson);\r\n\t\t\t\t}\r\n\t\t\t\tthis.map.getSource(this.hoverSourceId).setData({\r\n\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\tfeatures: features\r\n\t\t\t\t});\r\n\t\t\t\tthis.hoverLayerIds = [];\r\n\t\t\t\tlet hoverLayers = [];\r\n\t\t\t\t// heatmap layer\r\n\t\t\t\tthis.sets.forEach(set => {\r\n\t\t\t\t\tlet layerId = 'hoverlayer' + '_' + set;\r\n\t\t\t\t\tthis.hoverLayerIds.push(layerId);\r\n\t\t\t\t\tlet layer = {\r\n\t\t\t\t\t\tid: layerId,\r\n\t\t\t\t\t\ttype: 'heatmap',\r\n\t\t\t\t\t\tmaxzoom: 15,\r\n\t\t\t\t\t\tsource: this.hoverSourceId,\r\n\t\t\t\t\t\tpaint: {\r\n\t\t\t\t\t\t\t// heatmap properties, refer to the pages below\r\n\t\t\t\t\t\t\t// https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/#paint-heatmap-heatmap-color\r\n\t\t\t\t\t\t\t// https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/#paint-heatmap-heatmap-color\r\n\t\t\t\t\t\t\t// https://blog.mapbox.com/introducing-heatmaps-in-mapbox-gl-js-71355ada9e6c\r\n\t\t\t\t\t\t\t'heatmap-color': [\r\n\t\t\t\t\t\t\t\t'interpolate',\r\n\t\t\t\t\t\t\t\t['linear'],\r\n\t\t\t\t\t\t\t\t['heatmap-density'],\r\n\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t'rgba(0, 0, 255, 0)',\r\n                                0.3,\r\n\t\t\t\t\t\t\t\tthis.$store.state.sets[set].colors[6],\r\n\t\t\t\t\t\t\t\t0.7,\r\n                                this.$store.state.sets[set].colors[5],\r\n                                1,\r\n                                this.$store.state.sets[set].colors[3]\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'heatmap-opacity': 0.5,\r\n\t\t\t\t\t\t\t'heatmap-radius': 40\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: ['==', ['get', 'set'], set]\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.map.addLayer(layer);\r\n\t\t\t\t\thoverLayers.push(layer);\r\n\t\t\t\t});\r\n\t\t\t\tlet newLayers = [];\r\n\t\t\t\thoverLayers.forEach(layer => {\r\n\t\t\t\t\tlet newLayer = {};\r\n\t\t\t\t\tObject.assign(newLayer, layer);\r\n\t\t\t\t\tnewLayer.id += '_minimap';\r\n\t\t\t\t\tnewLayer.source = 'source';\r\n\t\t\t\t\tnewLayer.paint['heatmap-radius'] = 5;\r\n\t\t\t\t\tnewLayers.push(newLayer);\r\n\t\t\t\t});\r\n\t\t\t\tthis.minimapPayload = {\r\n\t\t\t\t\tlayers: newLayers,\r\n\t\t\t\t\tfeatures: features\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclickOnChart(payload) {\r\n\t\t\tif (payload.length > 0) {\r\n                let selected = [];\r\n                \r\n\t\t\t\tpayload.forEach(item => {\r\n\t\t\t\t\tselected.push({\r\n\t\t\t\t\t\ttype: item.properties.set,\r\n\t\t\t\t\t\tidx: item.properties.set_id.substring(\r\n\t\t\t\t\t\t\titem.properties.set.length\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.$store.commit('updateSelection', selected);\r\n\t\t\t\tthis.$store.commit('updateDirectSetSelectionSignal', true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\twatch: {\r\n\t\tupdate(payload) {\r\n\t\t\tif (payload.type === 'delete') this.deleteSet(payload.set);\r\n\t\t\telse this.addSet(payload.set);\r\n\t\t},\r\n\t\tresizeInfo(height) {\r\n\t\t\tdocument.getElementById(this.componentId).style.height =\r\n\t\t\t\theight + 'px';\r\n\t\t\tthis.map.resize();\r\n\t\t},\r\n\t\tselectedRange(range) {\r\n\t\t\tObject.keys(this.layers.highlighted).forEach(setName => {\r\n\t\t\t\tthis.layers.highlighted[setName].setProps({\r\n\t\t\t\t\tfilterRange: range\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tlet selected = this.getSelected();\r\n\t\t\tif (selected.length > 0)\r\n\t\t\t\tthis.$store.commit('updateSelection', selected);\r\n\t\t},\r\n\t\tselectionMode(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\t// hide tooltip when selection mode is on\r\n\t\t\t\tthis.$refs.tooltip.setTooltip(null, 0, 0);\r\n\t\t\t\tObject.keys(this.layers).forEach(layer => {\r\n\t\t\t\t\tif (layer == 'highlighted') {\r\n\t\t\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\t\t\tif (!this.layers[layer].hasOwnProperty(setName))\r\n\t\t\t\t\t\t\t\tthis.getSetLayer(layer, setName);\r\n\t\t\t\t\t\t\tthis.map.addLayer(this.layers[layer][setName]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (layer == 'dot_origin' && !this.settings[layer])\r\n\t\t\t\t\t\tthis.toggleLayer(layer, true);\r\n\t\t\t\t\telse if (layer != 'dot_origin' && this.settings[layer])\r\n\t\t\t\t\t\tthis.toggleLayer(layer, false);\r\n\t\t\t\t});\r\n\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\tthis.layers.dot_origin[setName].setProps({\r\n\t\t\t\t\t\topacity: 0.3\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t// this.map.triggerRepaint();\r\n\t\t\t} else {\r\n\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\tthis.layers.dot_origin[setName].setProps({\r\n\t\t\t\t\t\topacity: this.opacity\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tObject.keys(this.layers).forEach(layer => {\r\n\t\t\t\t\tif (layer != 'dot_origin' && this.settings[layer])\r\n\t\t\t\t\t\tthis.toggleLayer(layer, true);\r\n\t\t\t\t\telse if (layer == 'dot_origin' && !this.settings[layer])\r\n\t\t\t\t\t\tthis.toggleLayer(layer, false);\r\n\t\t\t\t\telse if (layer == 'highlighted')\r\n\t\t\t\t\t\tObject.keys(this.layers[layer]).forEach(setName => {\r\n\t\t\t\t\t\t\tthis.map.removeLayer(\r\n\t\t\t\t\t\t\t\tthis.layers[layer][setName].id\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.selectedRange = [\r\n\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t[0, 0]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t},\r\n\t\tsets(sets) {\r\n\t\t\tif (sets.length == 0) {\r\n\t\t\t\tthis.minCountryCount = Infinity;\r\n\t\t\t\tthis.maxCountryCount = 0;\r\n\t\t\t} else {\r\n\t\t\t\tlet mins = [];\r\n\t\t\t\tlet maxs = [];\r\n\t\t\t\tsets.forEach(set => {\r\n\t\t\t\t\tmins.push(this.$store.state.sets[set].stats.country.min);\r\n\t\t\t\t\tmaxs.push(this.$store.state.sets[set].stats.country.max);\r\n\t\t\t\t});\r\n\t\t\t\tthis.minCountryCount = Math.min(...mins);\r\n\t\t\t\tthis.maxCountryCount = Math.max(...maxs);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcountryCountRange() {\r\n\t\t\tlet layers = ['line_country', 'arc_country'];\r\n\t\t\tlayers.forEach(layer => {\r\n\t\t\t\tif (this.settings[layer]) {\r\n\t\t\t\t\tthis.toggleLayer(layer, false);\r\n\t\t\t\t\tthis.toggleLayer(layer, true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tisLine(value) {\r\n\t\t\tthis.toggleLayer('line', value);\r\n\t\t},\r\n\t\tisArc(value) {\r\n\t\t\tthis.toggleLayer('arc', value);\r\n\t\t},\r\n\t\tisDotOrigin(value) {\r\n\t\t\tthis.toggleLayer('dot_origin', value);\r\n\t\t},\r\n\t\tisDotLocated(value) {\r\n\t\t\tthis.toggleLayer('dot_located', value);\r\n\t\t},\r\n\t\tisLineCountry(value) {\r\n\t\t\tthis.toggleLayer('line_country', value);\r\n\t\t},\r\n\t\tisArcCountry(value) {\r\n\t\t\tthis.toggleLayer('arc_country', value);\r\n\t\t},\r\n\t\tisPieOrigin(value) {\r\n\t\t\tthis.toggleLayer('pie_origin', value);\r\n\t\t},\r\n\t\tisPieLocated(value) {\r\n\t\t\tthis.toggleLayer('pie_located', value);\r\n\t\t},\r\n\t\tisFlowerOrigin(value) {\r\n\t\t\tthis.toggleLayer('flower_origin', value);\r\n\t\t},\r\n\t\tisFlowerLocated(value) {\r\n\t\t\tthis.toggleLayer('flower_located', value);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper-control {\r\n\tposition: absolute;\r\n\tright: 1.5em;\r\n\ttop: 3em;\r\n\toverflow: hidden;\r\n}\r\n\r\n.v-card {\r\n\tfont-family: 'Varela Round', sans-serif;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapVerOne.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapVerOne.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapVerOne.vue?vue&type=template&id=4ee8ab94&scoped=true&\"\nimport script from \"./MapVerOne.vue?vue&type=script&lang=js&\"\nexport * from \"./MapVerOne.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapVerOne.vue?vue&type=style&index=0&id=4ee8ab94&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ee8ab94\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MglMap',{attrs:{\"accessToken\":_vm.accessToken,\"mapStyle\":_vm.mapStyle,\"zoom\":_vm.zoom,\"attributionControl\":false},on:{\"update:mapStyle\":function($event){_vm.mapStyle=$event},\"update:map-style\":function($event){_vm.mapStyle=$event},\"load\":_vm.onMapLoaded}},[_c('Tooltip',{ref:\"tooltip\"}),_c('div',{staticClass:\"wrapper-toggle-layer\"},[_c('LayerToggle',{on:{\"toggled\":_vm.toggleLayer}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',[_c('div',{staticClass:\"radio-group\"},[_c('input',{attrs:{\"type\":\"radio\",\"id\":\"lineButton\",\"name\":\"radio\",\"checked\":\"checked\"},on:{\"input\":function($event){return _vm.$emit('toggled', 'line')}}}),_vm._m(0),_c('input',{attrs:{\"type\":\"radio\",\"id\":\"arcButton\",\"name\":\"radio\"},on:{\"input\":function($event){return _vm.$emit('toggled', 'arc')}}}),_vm._m(1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"label1\",attrs:{\"for\":\"lineButton\"}},[_c('span',[_vm._v(\"Line\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"label2\",attrs:{\"for\":\"arcButton\"}},[_c('span',[_vm._v(\"Arc\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <form>\r\n        <div class=\"radio-group\">\r\n            <input\r\n                type=\"radio\"\r\n                id=\"lineButton\"\r\n                name=\"radio\"\r\n                checked=\"checked\"\r\n                @input=\"$emit('toggled', 'line')\"\r\n            />\r\n            <label class=\"label1\" for=\"lineButton\">\r\n                <span>Line</span>\r\n            </label>\r\n            <input\r\n                type=\"radio\"\r\n                id=\"arcButton\"\r\n                name=\"radio\"\r\n                @input=\"$emit('toggled', 'arc')\"\r\n            />\r\n            <label class=\"label2\" for=\"arcButton\">\r\n                <span>Arc</span>\r\n            </label>\r\n        </div>\r\n    </form>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'LayerToggle'\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import url('https://fonts.googleapis.com/css?family=Rubik');\r\n\r\ninput[type='radio'] {\r\n    display: none;\r\n}\r\n\r\n.label1,\r\n.label2 {\r\n    display: block;\r\n    height: 80px;\r\n    width: 75px;\r\n    background-size: 75px 80px;\r\n    background: linear-gradient(\r\n        to bottom,\r\n        white 0,\r\n        white 40px,\r\n        #fccd04 40px,\r\n        #fccd04 80px\r\n    );\r\n    position: absolute;\r\n    top: 0;\r\n    color: #fccd04;\r\n}\r\n\r\n.label2 {\r\n    right: 0;\r\n}\r\n\r\nspan {\r\n    display: flex;\r\n    height: 40px;\r\n    width: 75px;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-family: 'Rubik', sans-serif;\r\n    font-weight: 600;\r\n    font-size: 18px;\r\n}\r\n\r\ninput:checked + label {\r\n    background-position: 0 -40px;\r\n    color: white;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerToggle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerToggle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LayerToggle.vue?vue&type=template&id=50aa2af2&scoped=true&\"\nimport script from \"./LayerToggle.vue?vue&type=script&lang=js&\"\nexport * from \"./LayerToggle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LayerToggle.vue?vue&type=style&index=0&id=50aa2af2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"50aa2af2\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <MglMap\r\n        :accessToken=\"accessToken\"\r\n        :mapStyle.sync=\"mapStyle\"\r\n        :zoom=\"zoom\"\r\n        @load=\"onMapLoaded\"\r\n        :attributionControl=\"false\"\r\n    >\r\n        <!-- <MglAttributionControl position=\"bottom-left\" style=\"display:inline-block;\"/> -->\r\n        <Tooltip ref=\"tooltip\" />\r\n        <div class=\"wrapper-toggle-layer\">\r\n            <LayerToggle @toggled=\"toggleLayer\" />\r\n        </div>\r\n    </MglMap>\r\n</template>\r\n\r\n<script>\r\n// import { MglMap,MglAttributionControl } from 'vue-mapbox';\r\nimport { MglMap } from 'vue-mapbox';\r\nimport { MapboxLayer } from '@deck.gl/mapbox';\r\nimport { DataFilterExtension } from '@deck.gl/extensions';\r\nimport { LineLayer, ArcLayer, ScatterplotLayer } from '@deck.gl/layers';\r\nimport Rainbow from 'rainbowvis.js';\r\nimport Tooltip from '@/components/widgets/Tooltip';\r\nimport LayerToggle from '@/components/LayerToggle';\r\n\r\nvar rainbow = new Rainbow();\r\nrainbow.setSpectrum('#2E8B57', '#b22222');\r\nrainbow.setNumberRange(0, 50);\r\n\r\nexport default {\r\n    name: 'OldMap',\r\n\r\n    components: {\r\n        MglMap,\r\n        // MglAttributionControl,\r\n        Tooltip,\r\n        LayerToggle\r\n    },\r\n\r\n    props: ['componentId', 'sets', 'selected', 'selectionMode', 'update'],\r\n\r\n    data() {\r\n        return {\r\n            accessToken:\r\n                'pk.eyJ1Ijoib2h5ZWFoYnJhdm8iLCJhIjoiY2swMmRwM3RxMG1vejNpbGNmaTh0MGYzaiJ9.SILsxJa7qEHxs-MZsgTk5A', // your access token. Needed if you using Mapbox maps\r\n            mapStyle: 'mapbox://styles/mapbox/dark-v10',\r\n            zoom: 2,\r\n            currentLayers: [],\r\n            dotLayer: null,\r\n            layer: 'line',\r\n            line_opacity: 204, // 0 - 255 (0.8)\r\n            canvas: null,\r\n            startScreenXY: null, // starting xy coords when mousedown\r\n            currentScreenXY: null, // current xy coords when mousemove or moseup\r\n            startMapXY: null,\r\n            currentMapXY: null,\r\n            selectedRange: null,\r\n            filterExtension: [new DataFilterExtension({ filterSize: 2 })],\r\n            brushingRadius: 100000,\r\n            box: null,\r\n            highlighted: [],\r\n            layerCount: 0\r\n        };\r\n    },\r\n\r\n    computed: {},\r\n\r\n    methods: {\r\n        onMapLoaded(e) {\r\n            this.map = e.map;\r\n            this.canvas = this.map.getCanvasContainer();\r\n\r\n            // Disable default box zooming.\r\n            this.map.boxZoom.disable();\r\n            this.map.on('mousedown', this.onMouseDown);\r\n            this.map.on('mouseup', this.onMouseUp);\r\n\r\n            // this.addLineLayer();\r\n        },\r\n\r\n        onMouseDown(e) {\r\n            // Continue the rest of the function if the shiftkey is pressed.\r\n            if (!(e.originalEvent.shiftKey && e.originalEvent.button === 0))\r\n                return;\r\n\r\n            // Disable default drag zooming when the shift key is held down.\r\n            this.map.dragPan.disable();\r\n\r\n            // Call functions for the following events\r\n            document.addEventListener('mousemove', this.onMouseMove);\r\n\r\n            // Capture the first xy coordinates\r\n            this.startScreenXY = [e.point.x, e.point.y];\r\n            this.startMapXY = e.lngLat;\r\n        },\r\n\r\n        mousePos(e) {\r\n            var rect = this.canvas.getBoundingClientRect();\r\n            return [\r\n                e.clientX - rect.left - this.canvas.clientLeft,\r\n                e.clientY - rect.top - this.canvas.clientTop\r\n            ];\r\n        },\r\n\r\n        onMouseMove(e) {\r\n            // Capture the ongoing xy coordinates\r\n            this.currentScreenXY = this.mousePos(e);\r\n\r\n            // Append the box element if it doesnt exist\r\n            if (!this.box) {\r\n                this.box = document.createElement('div');\r\n                this.box.classList.add('boxdraw');\r\n                this.canvas.appendChild(this.box);\r\n            }\r\n\r\n            let minX = Math.min(this.startScreenXY[0], this.currentScreenXY[0]),\r\n                maxX = Math.max(this.startScreenXY[0], this.currentScreenXY[0]),\r\n                minY = Math.min(this.startScreenXY[1], this.currentScreenXY[1]),\r\n                maxY = Math.max(this.startScreenXY[1], this.currentScreenXY[1]);\r\n\r\n            // Adjust width and xy position of the box element ongoing\r\n            let pos = 'translate(' + minX + 'px,' + minY + 'px)';\r\n            this.box.style.transform = pos;\r\n            this.box.style.WebkitTransform = pos;\r\n            this.box.style.width = maxX - minX + 'px';\r\n            this.box.style.height = maxY - minY + 'px';\r\n            this.box.style.position = 'absolute';\r\n            this.box.style.background = 'rgba(238, 255, 65, 0.1)'; // yellow\r\n        },\r\n\r\n        onMouseUp(e) {\r\n            // Continue the rest of the function if the shiftkey is pressed.\r\n            if (!(e.originalEvent.shiftKey && e.originalEvent.button === 0))\r\n                return;\r\n\r\n            // Capture xy coordinates\r\n            this.finish([this.startMapXY, e.lngLat]);\r\n        },\r\n\r\n        finish(bbox) {\r\n            // Remove these events now that finish has been called.\r\n            document.removeEventListener('mousemove', this.onMouseMove);\r\n\r\n            if (this.box) {\r\n                this.box.parentNode.removeChild(this.box);\r\n                this.box = null;\r\n            }\r\n\r\n            // If bbox exists, use it for selection\r\n            if (bbox) {\r\n                let lng1 = Math.min(bbox[0].lng, bbox[1].lng),\r\n                    lng2 = Math.max(bbox[0].lng, bbox[1].lng),\r\n                    lat1 = Math.min(bbox[0].lat, bbox[1].lat),\r\n                    lat2 = Math.max(bbox[0].lat, bbox[1].lat);\r\n\r\n                this.selectedRange = [\r\n                    [lng1, lng2],\r\n                    [lat1, lat2]\r\n                ];\r\n            }\r\n            this.map.dragPan.enable();\r\n        },\r\n\r\n        // getColor(idx, set_color) {\r\n        //     // let r = d.dist;\r\n        //     // if (r > 15000) r = 15000;\r\n        //     // const color = rainbow.colorAt(Math.round((50 * r) / 15000));\r\n        //     if (idx in this.selected) {\r\n        //         this.hexToRGB('#EEFF41');\r\n        //     } else return this.hexToRGB(set_color);\r\n        // },\r\n\r\n        updateMap() {\r\n            if (this.currentLayers.length != 0) {\r\n                console.log(\"updateMap: currentlayers.length isn't 0\")\r\n                console.log(this.currentLayers)\r\n                for (let layer in this.currentLayers)\r\n                    this.map.removeLayer(this.currentLayers[layer]);\r\n            }\r\n            this.currentLayers = [];\r\n            if (this.layer == 'line') this.addLineLayer();\r\n            else this.addArcLayer();\r\n            // this.addHighlightedLayer(this.selectedRange);\r\n            this.addSelectedLayer();\r\n            // this.addDotLayer();\r\n            this.map.triggerRepaint();\r\n        },\r\n\r\n        showOnlyDots() {\r\n            if (this.currentLayers.length != 0)\r\n                for (let layer in this.currentLayers)\r\n                    this.map.removeLayer(this.currentLayers[layer]);\r\n            this.currentLayers = [];\r\n            this.addDotLayer();\r\n            this.map.triggerRepaint();\r\n        },\r\n\r\n        hexToRGB(hex) {\r\n            let rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n            let result = rgb\r\n                ? [\r\n                      parseInt(rgb[1], 16),\r\n                      parseInt(rgb[2], 16),\r\n                      parseInt(rgb[3], 16)\r\n                  ]\r\n                : null;\r\n            if (this.layer == 'line') result.push(this.line_opacity);\r\n            return result;\r\n        },\r\n\r\n        getColor(d, color) {\r\n            // if (this.selectedRange) {\r\n            //     if (\r\n            //         this.$store.state.data[d.type][d.idx].place\r\n            //             .coordinates[1] >= this.selectedRange[0][0] &&\r\n            //         this.$store.state.data[d.type][d.idx].place\r\n            //             .coordinates[1] <= this.selectedRange[0][1] &&\r\n            //         this.$store.state.data[d.type][d.idx].place\r\n            //             .coordinates[0] >= this.selectedRange[1][0] &&\r\n            //         this.$store.state.data[d.type][d.idx].place\r\n            //             .coordinates[0] <= this.selectedRange[1][1]\r\n            //     )\r\n            //         return this.hexToRGB(color);\r\n            //     else return this.hexToRGB(color);\r\n            // } else return this.hexToRGB(color);\r\n            return this.hexToRGB(color);\r\n        },\r\n\r\n        addLineLayer() {\r\n            for (let idx in this.sets) {\r\n                let setName = this.sets[idx];\r\n                let set = this.$store.state.sets[setName];\r\n                const lineLayer = new MapboxLayer({\r\n                    id: 'line-layer-' + set.name,\r\n                    type: LineLayer,\r\n                    data: set.members,\r\n                    autoHighlight: true,\r\n                    highlightColor: [211, 211, 211],\r\n                    pickable: true,\r\n                    getWidth: 2,\r\n                    getSourcePosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    getTargetPosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[0]\r\n                    ],\r\n                    getColor: () => this.hexToRGB(set.color),\r\n                    onHover: ({ object, x, y }) =>\r\n                        this.$refs.tooltip.setTooltip(object, x, y)\r\n                });\r\n\r\n                this.currentLayers.push(lineLayer.id);\r\n                this.map.addLayer(lineLayer);\r\n            }\r\n        },\r\n\r\n        addSelectedLayer() {\r\n            let color = this.hexToRGB(this.$store.state.highlightColor);\r\n            color.push(255 * 0.8);\r\n            let selectedLayer;\r\n\r\n            let layer_id = 'selected-layer-' + this.layerCount++;\r\n            if (this.layer == 'line') {\r\n                selectedLayer = new MapboxLayer({\r\n                    id: layer_id,\r\n                    type: LineLayer,\r\n                    data: this.selected,\r\n                    autoHighlight: true,\r\n                    highlightColor: [211, 211, 211],\r\n                    pickable: true,\r\n                    getWidth: 2,\r\n                    getSourcePosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    getTargetPosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[0]\r\n                    ],\r\n                    getColor: color,\r\n                    onHover: ({ object, x, y }) =>\r\n                        this.$refs.tooltip.setTooltip(object, x, y)\r\n                });\r\n            } else {\r\n                let color_src = color.slice();\r\n                let color_dst = color.slice();\r\n                color_src.push(255);\r\n                color_dst.push(30);\r\n                selectedLayer = new MapboxLayer({\r\n                    id: layer_id,\r\n                    type: ArcLayer,\r\n                    data: this.selected,\r\n                    pickable: true,\r\n                    autoHighlight: true,\r\n                    highlightColor: [211, 211, 211],\r\n                    getWidth: 2,\r\n                    getSourcePosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    getTargetPosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[0]\r\n                    ],\r\n                    getSourceColor: color_src, // green\r\n                    getTargetColor: color_dst, // red\r\n                    onHover: ({ object, x, y }) =>\r\n                        this.$refs.tooltip.setTooltip(object, x, y)\r\n                });\r\n            }\r\n            this.currentLayers.push(layer_id);\r\n            this.map.addLayer(selectedLayer);\r\n        },\r\n\r\n        addHighlightedLayer(range) {\r\n            if (this.selectedRange == null) return;\r\n            let selectedRange = range;\r\n            let highlightedLayer;\r\n            let color = this.hexToRGB('#EEFF41');\r\n            this.highlighted = [];\r\n            for (let idx in this.sets) {\r\n                let setName = this.sets[idx];\r\n                let set = this.$store.state.sets[setName];\r\n                // need to optimize the case when there are the same objects in different sets\r\n                for (let member_idx in set.members) {\r\n                    this.highlighted.push(set.members[member_idx]);\r\n                }\r\n            }\r\n            let layer_id = 'highlighted-layer-' + this.layerCount++;\r\n\r\n            if (this.layer == 'line') {\r\n                highlightedLayer = new MapboxLayer({\r\n                    id: layer_id,\r\n                    type: LineLayer,\r\n                    data: this.highlighted,\r\n                    autoHighlight: true,\r\n                    highlightColor: [211, 211, 211],\r\n                    pickable: true,\r\n                    getWidth: 2,\r\n                    getSourcePosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    getTargetPosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[0]\r\n                    ],\r\n                    getColor: color,\r\n                    onHover: ({ object, x, y }) =>\r\n                        this.$refs.tooltip.setTooltip(object, x, y),\r\n                    getFilterValue: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    filterRange: selectedRange,\r\n                    extensions: this.filterExtension\r\n                });\r\n            } else {\r\n                let color_src = color.slice();\r\n                let color_dst = color.slice();\r\n                color_src.push(255);\r\n                color_dst.push(30);\r\n                highlightedLayer = new MapboxLayer({\r\n                    id: layer_id,\r\n                    type: ArcLayer,\r\n                    data: this.highlighted,\r\n                    pickable: true,\r\n                    autoHighlight: true,\r\n                    highlightColor: [211, 211, 211],\r\n                    getWidth: 2,\r\n                    getSourcePosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    getTargetPosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[0]\r\n                    ],\r\n                    getSourceColor: color_src, // green\r\n                    getTargetColor: color_dst, // red\r\n                    onHover: ({ object, x, y }) =>\r\n                        this.$refs.tooltip.setTooltip(object, x, y),\r\n                    getFilterValue: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    filterRange: selectedRange,\r\n                    extensions: this.filterExtension\r\n                });\r\n            }\r\n            this.currentLayers.push(layer_id);\r\n            this.map.addLayer(highlightedLayer);\r\n        },\r\n\r\n        addArcLayer() {\r\n            for (let idx in this.sets) {\r\n                let setName = this.sets[idx];\r\n                let set = this.$store.state.sets[setName];\r\n                let color = this.hexToRGB(set.color);\r\n                let color_src = color.slice();\r\n                let color_dst = color.slice();\r\n                color_src.push(255);\r\n                color_dst.push(30);\r\n                const arcLayer = new MapboxLayer({\r\n                    id: 'arc-layer-' + set.name,\r\n                    type: ArcLayer,\r\n                    data: set.members,\r\n                    pickable: true,\r\n                    autoHighlight: true,\r\n                    highlightColor: [211, 211, 211],\r\n                    getWidth: 2,\r\n                    getSourcePosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    getTargetPosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[0]\r\n                    ],\r\n                    getSourceColor: color_src, // green\r\n                    getTargetColor: color_dst, // red\r\n                    onHover: ({ object, x, y }) =>\r\n                        this.$refs.tooltip.setTooltip(object, x, y)\r\n                });\r\n\r\n                this.currentLayers.push(arcLayer.id);\r\n                this.map.addLayer(arcLayer);\r\n            }\r\n        },\r\n\r\n        addDotLayer() {\r\n            for (let idx in this.sets) {\r\n                let setName = this.sets[idx];\r\n                let set = this.$store.state.sets[setName];\r\n                let srcDotLayer = new MapboxLayer({\r\n                    id: 'src-dot-layer-' + set.name,\r\n                    type: ScatterplotLayer,\r\n                    data: set.members,\r\n                    pickable: true,\r\n                    opacity: 0.5,\r\n                    stroked: false,\r\n                    filled: true,\r\n                    radiusScale: 10,\r\n                    autoHighlight: true,\r\n                    radiusMinPixels: 5,\r\n                    radiusMaxPixels: 100,\r\n                    lineWidthMinPixels: 1,\r\n                    highlightColor: [211, 211, 211],\r\n                    getPosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[0]\r\n                    ],\r\n                    getRadius: d => Math.sqrt(d.exits),\r\n                    getFillColor: () => this.hexToRGB(set.color),\r\n                    getLineColor: () => this.hexToRGB('#8BC34A'),\r\n                    onHover: ({ object, x, y }) =>\r\n                        this.$refs.tooltip.setTooltip(object, x, y)\r\n                });\r\n\r\n                let dstDotLayer = new MapboxLayer({\r\n                    id: 'dst-dot-layer-' + set.name,\r\n                    type: ScatterplotLayer,\r\n                    data: set.members,\r\n                    pickable: true,\r\n                    opacity: 0.5,\r\n                    stroked: true,\r\n                    filled: true,\r\n                    radiusScale: 10,\r\n                    autoHighlight: true,\r\n                    radiusMinPixels: 4,\r\n                    radiusMaxPixels: 100,\r\n                    lineWidthMinPixels: 1,\r\n                    highlightColor: [211, 211, 211],\r\n                    getPosition: d => [\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[1],\r\n                        this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[0]\r\n                    ],\r\n                    getRadius: d => Math.sqrt(d.exits),\r\n                    getFillColor: this.hexToRGB(set.color),\r\n                    getLineColor: d => this.getDotLineColor(d, set.color),\r\n                    onHover: ({ object, x, y }) =>\r\n                        this.$refs.tooltip.setTooltip(object, x, y)\r\n                });\r\n                this.currentLayers.push(dstDotLayer.id);\r\n                this.currentLayers.push(srcDotLayer.id);\r\n\r\n                this.map.addLayer(srcDotLayer);\r\n                this.map.addLayer(dstDotLayer);\r\n            }\r\n        },\r\n\r\n        getDotLineColor(d, color) {\r\n            if (this.$store.state.data[d.type][d.idx].dist > 1) {\r\n                // if the inferrence more than 1km\r\n                return this.hexToRGB('#D32F2F');\r\n            } else return this.hexToRGB(color);\r\n        },\r\n\r\n        toggleLayer(layer) {\r\n            this.layer = layer;\r\n            this.updateMap();\r\n        },\r\n\r\n        handleResize() {\r\n            // document.getElementById(this.componentId).style.height =\r\n            //     height + 'px';\r\n            console.log(\"dfa\")\r\n            this.map.resize();\r\n        }\r\n    },\r\n\r\n    created() {\r\n        // need to set mapbox-gl library here in order to use it in template\r\n        // this.mapbox = Mapbox;\r\n    },\r\n\r\n    watch: {\r\n        sets() {\r\n            this.updateMap();\r\n        },\r\n        selectionMode(value) {\r\n            if (value) {\r\n                let tooltipObject = null;\r\n                this.$refs.tooltip.setTooltip(tooltipObject, 0, 0);\r\n                this.showOnlyDots();\r\n            } else {\r\n                this.updateMap();\r\n            }\r\n        },\r\n        selectedRange(range) {\r\n            let selected = [];\r\n            for (let idx in this.sets) {\r\n                let setName = this.sets[idx];\r\n                let set = this.$store.state.sets[setName];\r\n                // need to optimize the case when there are the same objects in different sets\r\n                for (let member_idx in set.members) {\r\n                    let d = set.members[member_idx];\r\n                    if (\r\n                        (this.$store.state.data[d.type][d.idx].place\r\n                            .coordinates[1] >= range[0][0] &&\r\n                            this.$store.state.data[d.type][d.idx].place\r\n                                .coordinates[1] <= range[0][1] &&\r\n                            this.$store.state.data[d.type][d.idx].place\r\n                                .coordinates[0] >= range[1][0] &&\r\n                            this.$store.state.data[d.type][d.idx].place\r\n                                .coordinates[0] <= range[1][1]) ||\r\n                        (this.$store.state.data[d.type][d.idx].predicted\r\n                            .coordinates[1] >= range[0][0] &&\r\n                            this.$store.state.data[d.type][d.idx].predicted\r\n                                .coordinates[1] <= range[0][1] &&\r\n                            this.$store.state.data[d.type][d.idx].predicted\r\n                                .coordinates[0] >= range[1][0] &&\r\n                            this.$store.state.data[d.type][d.idx].predicted\r\n                                .coordinates[0] <= range[1][1])\r\n                    )\r\n                        selected.push(d);\r\n                }\r\n            }\r\n            this.$store.commit('updateSelection', selected);\r\n        },\r\n        selected() {\r\n            this.updateMap();\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper-toggle-layer {\r\n    position: absolute;\r\n    right: 1.5em;\r\n    top: 3em;\r\n    background: white;\r\n    height: 40px; // 60\r\n    width: 150px;\r\n    overflow: hidden;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OldMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OldMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OldMap.vue?vue&type=template&id=9983127a&scoped=true&\"\nimport script from \"./OldMap.vue?vue&type=script&lang=js&\"\nexport * from \"./OldMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OldMap.vue?vue&type=style&index=0&id=9983127a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9983127a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MglMap',{attrs:{\"accessToken\":_vm.accessToken,\"mapStyle\":_vm.mapStyle,\"zoom\":_vm.zoom,\"attributionControl\":false},on:{\"update:mapStyle\":function($event){_vm.mapStyle=$event},\"update:map-style\":function($event){_vm.mapStyle=$event},\"load\":_vm.onMapLoaded}},[_vm._l((_vm.markersOriginPie),function(marker){return _c('MglMarker',{key:marker.id,staticClass:\"pie\",attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Pie',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPie\":_vm.hoverOnChart,\"clickOnPie\":_vm.clickOnChart},slot:\"marker\"})],1)}),_vm._l((_vm.markersLocatedPie),function(marker){return _c('MglMarker',{key:marker.id,staticClass:\"pie\",attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Pie',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPie\":_vm.hoverOnChart,\"clickOnPie\":_vm.clickOnChart},slot:\"marker\"})],1)}),_vm._l((_vm.markersOriginFlower),function(marker){return _c('MglMarker',{key:marker.id,staticClass:\"rose\",attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Flower',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"range\":marker.range,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPetal\":_vm.hoverOnChart,\"clickOnPetal\":_vm.clickOnChart,\"roseCreated\":_vm.roseCreated},slot:\"marker\"})],1)}),_vm._l((_vm.markersLocatedFlower),function(marker){return _c('MglMarker',{key:marker.id,staticClass:\"rose\",attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Flower',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"range\":marker.range,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPetal\":_vm.hoverOnChart,\"clickOnPetal\":_vm.clickOnChart,\"roseCreated\":_vm.roseCreated},slot:\"marker\"})],1)}),_vm._l((_vm.markersOriginLocal),function(marker){return _c('MglMarker',{key:marker.id,staticClass:\"pie\",attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Pie',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPie\":_vm.hoverOnChart,\"clickOnPie\":_vm.clickOnChart},slot:\"marker\"})],1)}),_vm._l((_vm.markersLocatedLocal),function(marker){return _c('MglMarker',{key:marker.id,staticClass:\"pie\",attrs:{\"id\":marker.id,\"coordinates\":marker.coords}},[_c('Pie',{attrs:{\"slot\":\"marker\",\"chartId\":marker.chartId,\"data\":marker.data,\"size\":marker.size,\"source\":marker.source,\"features\":marker.features},on:{\"hoverOnPie\":_vm.hoverOnChart,\"clickOnPie\":_vm.clickOnChart},slot:\"marker\"})],1)}),_c('Tooltip',{ref:\"tooltip\"}),(!_vm.selectionMode)?_c('v-card',{staticClass:\"d-flex flex-column float-right mt-12 mr-5 pa-3\",attrs:{\"dark\":\"\",\"color\":\"rgba(128, 128, 128, 0.5)\"}},[_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Line\"},model:{value:(_vm.isLine),callback:function ($$v) {_vm.isLine=$$v},expression:\"isLine\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Arc\"},model:{value:(_vm.isArc),callback:function ($$v) {_vm.isArc=$$v},expression:\"isArc\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Origin Dots\"},model:{value:(_vm.isDotOrigin),callback:function ($$v) {_vm.isDotOrigin=$$v},expression:\"isDotOrigin\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Located Dots\"},model:{value:(_vm.isDotLocated),callback:function ($$v) {_vm.isDotLocated=$$v},expression:\"isDotLocated\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Line By Country\"},model:{value:(_vm.isLineCountry),callback:function ($$v) {_vm.isLineCountry=$$v},expression:\"isLineCountry\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"Arc By Country\"},model:{value:(_vm.isArcCountry),callback:function ($$v) {_vm.isArcCountry=$$v},expression:\"isArcCountry\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"RosePies By Origin\"},model:{value:(_vm.isRosePieOrigin),callback:function ($$v) {_vm.isRosePieOrigin=$$v},expression:\"isRosePieOrigin\"}}),_c('v-checkbox',{staticClass:\"my-1 mx-0 pa-0\",attrs:{\"dense\":\"\",\"hide-details\":\"\",\"label\":\"RosePies By Located\"},model:{value:(_vm.isRosePieLocated),callback:function ($$v) {_vm.isRosePieLocated=$$v},expression:\"isRosePieLocated\"}}),_c('v-switch',{attrs:{\"label\":_vm.clusterLockSwitchLabel},model:{value:(_vm.isClusterLocked),callback:function ($$v) {_vm.isClusterLocked=$$v},expression:\"isClusterLocked\"}})],1):_vm._e(),(!_vm.minimapShown)?_c('v-btn',{staticClass:\"mb-5\",attrs:{\"icon\":\"\",\"color\":\"rgba(255, 255, 255, 0.5)\",\"absolute\":\"\",\"x-large\":\"\",\"dark\":\"\",\"bottom\":\"\",\"left\":\"\"},on:{\"click\":function($event){_vm.minimapShown = true}}},[_c('v-icon',[_vm._v(\"fas fa-globe\")])],1):_vm._e(),(_vm.minimapShown)?_c('v-card',{staticClass:\"d-flex flex-column justify-end pa-1\",staticStyle:{\"width\":\"400px\",\"height\":\"250px\",\"position\":\"absolute\",\"bottom\":\"40px\"},attrs:{\"color\":\"rgba(128, 128, 128, 0.5)\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"icon\":\"\",\"color\":\"rgba(0, 0, 0, 1)\",\"x-small\":\"\"},on:{\"click\":function($event){_vm.minimapShown = false}}},[_c('v-icon',[_vm._v(\"fas fa-times\")])],1),_c('MiniMap',{attrs:{\"payload\":_vm.minimapPayload}})],1):_vm._e(),_c('ChartTooltip',{ref:\"chart_tooltip\"})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <MglMap\r\n        :accessToken=\"accessToken\"\r\n        :mapStyle.sync=\"mapStyle\"\r\n        :zoom=\"zoom\"\r\n        @load=\"onMapLoaded\"\r\n        :attributionControl=\"false\"\r\n    >\r\n        <MglMarker\r\n            v-for=\"marker in markersOriginPie\"\r\n            v-bind:key=\"marker.id\"\r\n            class=\"pie\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Pie\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPie=\"hoverOnChart\"\r\n                @clickOnPie=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersLocatedPie\"\r\n            v-bind:key=\"marker.id\"\r\n            class=\"pie\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Pie\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPie=\"hoverOnChart\"\r\n                @clickOnPie=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersOriginFlower\"\r\n            v-bind:key=\"marker.id\"\r\n            class=\"rose\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Flower\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :range=\"marker.range\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPetal=\"hoverOnChart\"\r\n                @clickOnPetal=\"clickOnChart\"\r\n                @roseCreated=\"roseCreated\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersLocatedFlower\"\r\n            v-bind:key=\"marker.id\"\r\n            class=\"rose\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Flower\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :range=\"marker.range\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPetal=\"hoverOnChart\"\r\n                @clickOnPetal=\"clickOnChart\"\r\n                @roseCreated=\"roseCreated\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersOriginLocal\"\r\n            v-bind:key=\"marker.id\"\r\n            class=\"pie\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Pie\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPie=\"hoverOnChart\"\r\n                @clickOnPie=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <MglMarker\r\n            v-for=\"marker in markersLocatedLocal\"\r\n            v-bind:key=\"marker.id\"\r\n            class=\"pie\"\r\n            :id=\"marker.id\"\r\n            :coordinates=\"marker.coords\"\r\n        >\r\n            <Pie\r\n                slot=\"marker\"\r\n                :chartId=\"marker.chartId\"\r\n                :data=\"marker.data\"\r\n                :size=\"marker.size\"\r\n                :source=\"marker.source\"\r\n                :features=\"marker.features\"\r\n                @hoverOnPie=\"hoverOnChart\"\r\n                @clickOnPie=\"clickOnChart\"\r\n            />\r\n        </MglMarker>\r\n        <Tooltip ref=\"tooltip\" />\r\n        <v-card\r\n            v-if=\"!selectionMode\"\r\n            dark\r\n            color=\"rgba(128, 128, 128, 0.5)\"\r\n            class=\"d-flex flex-column float-right mt-12 mr-5 pa-3\"\r\n        >\r\n            <v-checkbox dense hide-details class=\"my-1 mx-0 pa-0\" v-model=\"isLine\" label=\"Line\" />\r\n            <v-checkbox dense hide-details class=\"my-1 mx-0 pa-0\" v-model=\"isArc\" label=\"Arc\" />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isDotOrigin\"\r\n                label=\"Origin Dots\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isDotLocated\"\r\n                label=\"Located Dots\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isLineCountry\"\r\n                label=\"Line By Country\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isArcCountry\"\r\n                label=\"Arc By Country\"\r\n            />\r\n                        <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isRosePieOrigin\"\r\n                label=\"RosePies By Origin\"\r\n            />\r\n            <v-checkbox\r\n                dense\r\n                hide-details\r\n                class=\"my-1 mx-0 pa-0\"\r\n                v-model=\"isRosePieLocated\"\r\n                label=\"RosePies By Located\"\r\n            />\r\n            <v-switch v-model=\"isClusterLocked\" :label=\"clusterLockSwitchLabel\"></v-switch>\r\n        </v-card>\r\n        <v-btn\r\n            v-if=\"!minimapShown\"\r\n            @click=\"minimapShown = true\"\r\n            icon\r\n            color=\"rgba(255, 255, 255, 0.5)\"\r\n            absolute\r\n            x-large\r\n            dark\r\n            bottom\r\n            left\r\n            class=\"mb-5\"\r\n        >\r\n            <v-icon>fas fa-globe</v-icon>\r\n        </v-btn>\r\n        <v-card\r\n            v-if=\"minimapShown\"\r\n            color=\"rgba(128, 128, 128, 0.5)\"\r\n            style=\"width: 400px; height: 250px; position: absolute; bottom: 40px;\"\r\n            class=\"d-flex flex-column justify-end pa-1\"\r\n        >\r\n            <v-btn @click=\"minimapShown = false\" icon color=\"rgba(0, 0, 0, 1)\" x-small class=\"ma-0\">\r\n                <v-icon>fas fa-times</v-icon>\r\n            </v-btn>\r\n            <MiniMap :payload=\"minimapPayload\" />\r\n        </v-card>\r\n        <ChartTooltip ref=\"chart_tooltip\" />\r\n    </MglMap>\r\n</template>\r\n\r\n<script>\r\n// import { MglMap,MglAttributionControl } from 'vue-mapbox';\r\nimport { MglMap, MglMarker } from 'vue-mapbox';\r\nimport { MapboxLayer } from '@deck.gl/mapbox';\r\nimport { DataFilterExtension } from '@deck.gl/extensions';\r\nimport { LineLayer, ArcLayer, ScatterplotLayer } from '@deck.gl/layers';\r\nimport Tooltip from '@/components/widgets/Tooltip';\r\nimport ChartTooltip from '@/components/widgets/ChartTooltip';\r\nimport Pie from '@/components/widgets/Pie';\r\nimport Flower from '@/components/widgets/Flower';\r\nimport MiniMap from '@/components/widgets/MiniMap';\r\nimport * as d3 from 'd3';\r\nimport * as turf from '@turf/turf';\r\n\r\nexport default {\r\n\tname: 'Map',\r\n\r\n\tcomponents: {\r\n\t\tMglMap,\r\n\t\t// MglAttributionControl,\r\n\t\tTooltip,\r\n\t\tMglMarker,\r\n\t\tPie,\r\n\t\tFlower,\r\n\t\tMiniMap,\r\n\t\tChartTooltip\r\n\t},\r\n\r\n\tprops: ['componentId', 'sets', 'selectionMode', 'update', 'resizeInfo'],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\titems: [],\r\n\t\t\taccessToken:\r\n\t\t\t\t'pk.eyJ1Ijoib2h5ZWFoYnJhdm8iLCJhIjoiY2swMmRwM3RxMG1vejNpbGNmaTh0MGYzaiJ9.SILsxJa7qEHxs-MZsgTk5A', // your access token. Needed if you using Mapbox maps\r\n\t\t\tmapStyle: 'mapbox://styles/mapbox/dark-v10',\r\n\t\t\tzoom: 2,\r\n\t\t\t// not -90 to 90 as it causes the panning to go beyond the map size\r\n\t\t\tmaxBounds: [\r\n\t\t\t\t[-180, -85],\r\n\t\t\t\t[180, 85]\r\n\t\t\t],\r\n\t\t\tminimapPayload: null,\r\n\t\t\topacity: 0.5, // 204 (0.8)\r\n\t\t\tcanvas: null,\r\n\t\t\tstartScreenXY: null, // starting xy coords when mousedown\r\n\t\t\tcurrentScreenXY: null, // current xy coords when mousemove or moseup\r\n\t\t\tstartMapXY: null,\r\n\t\t\tcurrentMapXY: null,\r\n\t\t\tselectedRange: null,\r\n\t\t\tfilterExtension: [new DataFilterExtension({ filterSize: 2 })],\r\n\t\t\tbox: null,\r\n\t\t\tminimapShown: false,\r\n\t\t\tminCountryCount: Infinity,\r\n\t\t\tmaxCountryCount: 0,\r\n\t\t\tsetFilters: {},\r\n\t\t\tisClusterLocked: false,\r\n\t\t\thoverSourceId: 'hovered',\r\n\t\t\thoverLayerIds: [],\r\n\t\t\tmarkersOriginPie: [],\r\n\t\t\tmarkersLocatedPie: [],\r\n\t\t\tmarkersOriginFlower: [],\r\n\t\t\tmarkersLocatedFlower: [],\r\n\t\t\tmarkersOriginLocal: [],\r\n\t\t\tmarkersLocatedLocal: [],\r\n\t\t\tclusters: {},\r\n\t\t\tfeatures: {\r\n\t\t\t\torigin: [],\r\n\t\t\t\tlocated: []\r\n\t\t\t},\r\n\t\t\tsourceLoaded: {\r\n\t\t\t\torigin: false,\r\n\t\t\t\tlocated: false\r\n\t\t\t},\r\n\t\t\tlayers: {\r\n\t\t\t\torigin_noncluster: null,\r\n\t\t\t\tlocated_noncluster: null,\r\n\t\t\t\tline: {},\r\n\t\t\t\tarc: {},\r\n\t\t\t\tdot_located: {},\r\n\t\t\t\tdot_origin: {},\r\n\t\t\t\tline_country: {},\r\n\t\t\t\tarc_country: {},\r\n\t\t\t\thighlighted: {}\r\n\t\t\t},\r\n\t\t\t// variables for layer toggling\r\n\t\t\tisLine: false,\r\n\t\t\tisArc: false,\r\n\t\t\tisDotOrigin: false,\r\n\t\t\tisDotLocated: false,\r\n\t\t\tisLineCountry: false,\r\n            isArcCountry: false,\r\n            isRosePieOrigin: false,\r\n\t\t\tisRosePieLocated: false,\r\n\t\t\tisPieOrigin: false,\r\n\t\t\tisPieLocated: false,\r\n\t\t\tisFlowerOrigin: false,\r\n\t\t\tisFlowerLocated: false\r\n            };\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tsettings() {\r\n\t\t\treturn {\r\n\t\t\t\tline: this.isLine,\r\n\t\t\t\tarc: this.isArc,\r\n\t\t\t\tdot_origin: this.isDotOrigin,\r\n\t\t\t\tdot_located: this.isDotLocated,\r\n\t\t\t\tline_country: this.isLineCountry,\r\n\t\t\t\tarc_country: this.isArcCountry,\r\n\t\t\t\tpie_located: this.isPieLocated,\r\n\t\t\t\tpie_origin: this.isPieOrigin,\r\n\t\t\t\tflower_origin: this.isFlowerOrigin,\r\n\t\t\t\tflower_located: this.isFlowerLocated\r\n\t\t\t};\r\n\t\t},\r\n\t\tcountryCountRange() {\r\n\t\t\treturn [this.minCountryCount, this.maxCountryCount];\r\n\t\t},\r\n\t\tcolorFilters() {\r\n\t\t\tlet filters = ['case'];\r\n\t\t\tObject.keys(this.setFilters).forEach(set => {\r\n\t\t\t\tfilters.push(this.setFilters[set]);\r\n\t\t\t\tfilters.push(this.$store.state.sets[set].color);\r\n\t\t\t});\r\n\t\t\t// default color\r\n\t\t\tfilters.push('#ffffff');\r\n\t\t\treturn filters;\r\n\t\t},\r\n\t\tclusterLockSwitchLabel() {\r\n\t\t\tif (this.isClusterLocked) return 'Cluster Locked';\r\n\t\t\telse return 'Cluster Unlocked';\r\n        }\r\n\t},\r\n\r\n\tmethods: {\r\n\t\taddSet(setName) {\r\n\t\t\tlet set = this.$store.state.sets[setName];\r\n\t\t\t// set filter later needed for color setFilters\r\n\t\t\tthis.setFilters[setName] = ['==', ['get', 'set'], setName];\r\n\r\n\t\t\tset.members.forEach(member => {\r\n\t\t\t\tlet set_id = member.type + '_' + member.idx;\r\n\t\t\t\tlet item = this.$store.state.data[member.type][member.idx];\r\n\t\t\t\tlet origin = {\r\n\t\t\t\t\ttype: 'Feature',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tset: setName,\r\n\t\t\t\t\t\tset_id: set_id,\r\n\t\t\t\t\t\ttarget: [\r\n\t\t\t\t\t\t\titem.predicted.coordinates[1],\r\n\t\t\t\t\t\t\titem.predicted.coordinates[0]\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tdist: item.dist,\r\n\t\t\t\t\t\tdir: item.place.dir,\r\n\t\t\t\t\t\ttype: 'origin'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\ttype: 'Point',\r\n\t\t\t\t\t\tcoordinates: [\r\n\t\t\t\t\t\t\tthis.$store.state.data[member.type][member.idx]\r\n\t\t\t\t\t\t\t\t.place.coordinates[1],\r\n\t\t\t\t\t\t\tthis.$store.state.data[member.type][member.idx]\r\n\t\t\t\t\t\t\t\t.place.coordinates[0]\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthis.features.origin.push(origin);\r\n\t\t\t\tlet located = {\r\n\t\t\t\t\ttype: 'Feature',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tset: setName,\r\n\t\t\t\t\t\tset_id: set_id,\r\n\t\t\t\t\t\ttarget: [\r\n\t\t\t\t\t\t\titem.place.coordinates[1],\r\n\t\t\t\t\t\t\titem.place.coordinates[0]\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tdist: item.dist,\r\n\t\t\t\t\t\tdir: item.predicted.dir,\r\n\t\t\t\t\t\ttype: 'located'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\ttype: 'Point',\r\n\t\t\t\t\t\tcoordinates: [\r\n\t\t\t\t\t\t\tthis.$store.state.data[member.type][member.idx]\r\n\t\t\t\t\t\t\t\t.predicted.coordinates[1],\r\n\t\t\t\t\t\t\tthis.$store.state.data[member.type][member.idx]\r\n\t\t\t\t\t\t\t\t.predicted.coordinates[0]\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthis.features.located.push(located);\r\n\t\t\t});\r\n\t\t\t// add source or update features if exists\r\n\t\t\tObject.keys(this.features).forEach(type => {\r\n\t\t\t\tif (this.map.getSource(type) == undefined) {\r\n\t\t\t\t\tlet geojson = {\r\n\t\t\t\t\t\ttype: 'geojson',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\t\t\tfeatures: this.features[type]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcluster: true,\r\n\t\t\t\t\t\tclusterRadius: 50\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.map.addSource(type, geojson);\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.map.getSource(type).setData({\r\n\t\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\t\tfeatures: this.features[type]\r\n\t\t\t\t\t});\r\n\t\t\t\tthis.sourceLoaded[type] = false;\r\n\t\t\t});\r\n\r\n\t\t\tObject.keys(this.settings).forEach(layer => {\r\n\t\t\t\tif (this.settings[layer]) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t'pie_origin',\r\n\t\t\t\t\t\t\t'pie_located',\r\n\t\t\t\t\t\t\t'flower_origin',\r\n\t\t\t\t\t\t\t'flower_located'\r\n\t\t\t\t\t\t].includes(layer)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlet source = layer.split('_')[1];\r\n\t\t\t\t\t\tif (!this.layers[source + '_noncluster']) {\r\n\t\t\t\t\t\t\tthis.getIntegratedLayer(layer);\r\n\t\t\t\t\t\t\tthis.map.addLayer(\r\n\t\t\t\t\t\t\t\tthis.layers[source + '_noncluster']\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconsole.log('layer added');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getSetLayer(layer, setName);\r\n\t\t\t\t\t\tthis.map.addLayer(this.layers[layer][setName]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tdeleteSet(setName) {\r\n\t\t\t// delete filter from the filter collection\r\n\t\t\tdelete this.setFilters[setName];\r\n\t\t\t// delete set features from the source data\r\n\t\t\tObject.keys(this.features).forEach(type => {\r\n\t\t\t\tlet newFeatures = [];\r\n\t\t\t\tthis.features[type].forEach(feature => {\r\n\t\t\t\t\tif (feature.properties.set != setName)\r\n\t\t\t\t\t\tnewFeatures.push(feature);\r\n\t\t\t\t});\r\n\t\t\t\tthis.features[type] = newFeatures;\r\n\t\t\t\tthis.map.getSource(type).setData({\r\n\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\tfeatures: newFeatures\r\n\t\t\t\t});\r\n\t\t\t\tthis.sourceLoaded[type] = false;\r\n\t\t\t});\r\n\t\t\t// removing the layers if needed\r\n\t\t\tObject.keys(this.settings).forEach(layer => {\r\n\t\t\t\tif (this.settings[layer]) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t![\r\n\t\t\t\t\t\t\t'pie_origin',\r\n\t\t\t\t\t\t\t'pie_located',\r\n\t\t\t\t\t\t\t'flower_origin',\r\n\t\t\t\t\t\t\t'flower_located'\r\n\t\t\t\t\t\t].includes(layer)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.map.removeLayer(this.layers[layer][setName].id);\r\n\t\t\t\t\t\tdelete this.layers[layer][setName];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet source = layer.split('_')[1];\r\n\t\t\t\t\t\tif (source == 'origin') this.markersOriginLocal = [];\r\n\t\t\t\t\t\telse this.markersLocatedLocal = [];\r\n\r\n\t\t\t\t\t\tif (layer == 'pie_origin') this.markersOriginPie = [];\r\n\t\t\t\t\t\telse if (layer == 'pie_located')\r\n\t\t\t\t\t\t\tthis.markersLocatedPie = [];\r\n\t\t\t\t\t\telse if (layer == 'flower_origin')\r\n\t\t\t\t\t\t\tthis.markersOriginFlower = [];\r\n\t\t\t\t\t\telse if (layer == 'flower_located')\r\n\t\t\t\t\t\t\tthis.markersLocatedFlower = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tonMapLoaded(e) {\r\n\t\t\tthis.map = e.map;\r\n\t\t\tthis.canvas = this.map.getCanvasContainer();\r\n\t\t\t// Disable default box zooming.\r\n\t\t\tthis.map.boxZoom.disable();\r\n\t\t\tthis.map.on('mousedown', this.onMouseDown);\r\n\t\t\tthis.map.on('mouseup', this.onMouseUp);\r\n\t\t},\r\n\r\n\t\tonRender() {\r\n\t\t\tif (!this.map.loaded() || this.isClusterLocked) return;\r\n\t\t\tif (this.isPieOrigin || this.isFlowerOrigin)\r\n\t\t\t\tif (!this.sourceLoaded.origin) {\r\n\t\t\t\t\tif (this.isPieOrigin) this.updateMarkers('pie_origin');\r\n\t\t\t\t\tif (this.isFlowerOrigin)\r\n\t\t\t\t\t\tthis.updateMarkers('flower_origin');\r\n\t\t\t\t\tthis.sourceLoaded.origin = true;\r\n\t\t\t\t}\r\n\t\t\tif (this.isPieLocated || this.isFlowerLocated)\r\n\t\t\t\tif (!this.sourceLoaded.located) {\r\n\t\t\t\t\tif (this.isPieLocated) this.updateMarkers('pie_located');\r\n\t\t\t\t\tif (this.isFlowerLocated)\r\n\t\t\t\t\t\tthis.updateMarkers('flower_located');\r\n\t\t\t\t\tthis.sourceLoaded.located = true;\r\n\t\t\t\t}\r\n\t\t},\r\n\r\n\t\tresetSourceLoaded() {\r\n\t\t\tObject.keys(this.sourceLoaded).forEach(key => {\r\n\t\t\t\tthis.sourceLoaded[key] = false;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tmousePos(e) {\r\n\t\t\tvar rect = this.canvas.getBoundingClientRect();\r\n\t\t\treturn [\r\n\t\t\t\te.clientX - rect.left - this.canvas.clientLeft,\r\n\t\t\t\te.clientY - rect.top - this.canvas.clientTop\r\n\t\t\t];\r\n\t\t},\r\n\r\n\t\tonMouseDown(e) {\r\n\t\t\t// Continue the rest of the function if the shiftkey is pressed.\r\n\t\t\tif (!(e.originalEvent.shiftKey && e.originalEvent.button === 0))\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// Disable default drag zooming when the shift key is held down.\r\n\t\t\tthis.map.dragPan.disable();\r\n\r\n\t\t\t// Call functions for the following events\r\n\t\t\tdocument.addEventListener('mousemove', this.onMouseMove);\r\n\r\n\t\t\t// Capture the first xy coordinates\r\n\t\t\tthis.startScreenXY = [e.point.x, e.point.y];\r\n\t\t\tthis.startMapXY = e.lngLat;\r\n\t\t},\r\n\r\n\t\tonMouseUp(e) {\r\n\t\t\t// Continue the rest of the function if the shiftkey is pressed.\r\n\t\t\tif (!(e.originalEvent.shiftKey && e.originalEvent.button === 0))\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// Capture xy coordinates\r\n\t\t\tthis.finish([this.startMapXY, e.lngLat]);\r\n\t\t},\r\n\r\n\t\tonMouseMove(e) {\r\n\t\t\t// Capture the ongoing xy coordinates\r\n\t\t\tthis.currentScreenXY = this.mousePos(e);\r\n\r\n\t\t\t// Append the box element if it doesnt exist\r\n\t\t\tif (!this.box) {\r\n\t\t\t\tthis.box = document.createElement('div');\r\n\t\t\t\tthis.box.classList.add('boxdraw');\r\n\t\t\t\tthis.canvas.appendChild(this.box);\r\n\t\t\t}\r\n\r\n\t\t\tlet minX = Math.min(this.startScreenXY[0], this.currentScreenXY[0]),\r\n\t\t\t\tmaxX = Math.max(this.startScreenXY[0], this.currentScreenXY[0]),\r\n\t\t\t\tminY = Math.min(this.startScreenXY[1], this.currentScreenXY[1]),\r\n\t\t\t\tmaxY = Math.max(this.startScreenXY[1], this.currentScreenXY[1]);\r\n\r\n\t\t\t// Adjust width and xy position of the box element ongoing\r\n\t\t\tlet pos = 'translate(' + minX + 'px,' + minY + 'px)';\r\n\t\t\tthis.box.style.transform = pos;\r\n\t\t\tthis.box.style.WebkitTransform = pos;\r\n\t\t\tthis.box.style.width = maxX - minX + 'px';\r\n\t\t\tthis.box.style.height = maxY - minY + 'px';\r\n\t\t\tthis.box.style.position = 'absolute';\r\n\t\t\tthis.box.style.background = 'rgba(238, 255, 65, 0.1)'; // yellow\r\n\t\t},\r\n\r\n\t\tfinish(bbox) {\r\n\t\t\t// Remove these events now that finish has been called.\r\n\t\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\r\n\r\n\t\t\tif (this.box) {\r\n\t\t\t\tthis.box.parentNode.removeChild(this.box);\r\n\t\t\t\tthis.box = null;\r\n\t\t\t}\r\n\r\n\t\t\t// If bbox exists, use it for selection\r\n\t\t\tif (bbox) {\r\n\t\t\t\tlet lng1 = Math.min(bbox[0].lng, bbox[1].lng),\r\n\t\t\t\t\tlng2 = Math.max(bbox[0].lng, bbox[1].lng),\r\n\t\t\t\t\tlat1 = Math.min(bbox[0].lat, bbox[1].lat),\r\n\t\t\t\t\tlat2 = Math.max(bbox[0].lat, bbox[1].lat);\r\n\r\n\t\t\t\tthis.selectedRange = [\r\n\t\t\t\t\t[lng1, lng2],\r\n\t\t\t\t\t[lat1, lat2]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\tthis.map.dragPan.enable();\r\n\t\t},\r\n\r\n\t\ttoggleLayer(layer, value) {\r\n\t\t\t// add layer\r\n\t\t\tif (value) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t'pie_origin',\r\n\t\t\t\t\t\t'pie_located',\r\n\t\t\t\t\t\t'flower_origin',\r\n\t\t\t\t\t\t'flower_located'\r\n\t\t\t\t\t].includes(layer)\r\n\t\t\t\t) {\r\n\t\t\t\t\tlet source = layer.split('_')[1];\r\n\t\t\t\t\tif (!this.layers[source + '_noncluster']) {\r\n\t\t\t\t\t\tthis.getIntegratedLayer(layer);\r\n\t\t\t\t\t\tthis.map.addLayer(this.layers[source + '_noncluster']);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sourceLoaded[source] = false;\r\n\t\t\t\t\t// adding map event for updating markers\r\n\t\t\t\t\tthis.map.on('render', this.onRender);\r\n\t\t\t\t\tthis.map.on('zoomend', this.resetSourceLoaded);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\t\tif (!this.layers[layer].hasOwnProperty(setName))\r\n\t\t\t\t\t\t\tthis.getSetLayer(layer, setName);\r\n\t\t\t\t\t\tthis.map.addLayer(this.layers[layer][setName]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// remove layer\r\n\t\t\t} else {\r\n\t\t\t\tif (\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t'pie_origin',\r\n\t\t\t\t\t\t'pie_located',\r\n\t\t\t\t\t\t'flower_origin',\r\n\t\t\t\t\t\t'flower_located'\r\n\t\t\t\t\t].includes(layer)\r\n\t\t\t\t) {\r\n\t\t\t\t\tlet source = layer.split('_')[1];\r\n\t\t\t\t\tif (source == 'origin' && !this.isPieOrigin) {\r\n\t\t\t\t\t\tthis.map.removeLayer(\r\n\t\t\t\t\t\t\tthis.layers['origin_noncluster'].id\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.layers['origin_noncluster'] = null;\r\n\t\t\t\t\t\tthis.markersOriginLocal = [];\r\n\t\t\t\t\t} else if (source == 'located' && !this.isPieLocated) {\r\n\t\t\t\t\t\tthis.map.removeLayer(\r\n\t\t\t\t\t\t\tthis.layers['located_noncluster'].id\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.layers['located_noncluster'] = null;\r\n\t\t\t\t\t\tthis.markersLocatedLocal = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// removing map event when no need to update markers\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!this.isPieOrigin &&\r\n\t\t\t\t\t\t!this.isPieLocated &&\r\n\t\t\t\t\t\t!this.isFlowerOrigin &&\r\n\t\t\t\t\t\t!this.isFlowerLocated\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.map.off('render', this.onRender);\r\n\t\t\t\t\t\tthis.map.off('zoomend', this.resetSourceLoaded);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (layer == 'pie_origin') this.markersOriginPie = [];\r\n\t\t\t\t\telse if (layer == 'pie_located')\r\n\t\t\t\t\t\tthis.markersLocatedPie = [];\r\n\t\t\t\t\telse if (layer == 'flower_origin')\r\n\t\t\t\t\t\tthis.markersOriginFlower = [];\r\n\t\t\t\t\telse if (layer == 'flower_located')\r\n\t\t\t\t\t\tthis.markersLocatedFlower = [];\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\t\tthis.map.removeLayer(this.layers[layer][setName].id);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetSelected() {\r\n\t\t\tlet selected = [];\r\n\t\t\tlet range = this.selectedRange;\r\n\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\tlet set = this.$store.state.sets[setName];\r\n\t\t\t\tset.members.forEach(d => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[1] >= range[0][0] &&\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[1] <= range[0][1] &&\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[0] >= range[1][0] &&\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[0] <= range[1][1]\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tselected.push(d);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn selected;\r\n\t\t},\r\n\r\n\t\thexToRGB(hex) {\r\n\t\t\tlet rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\t\tlet result = rgb\r\n\t\t\t\t? [\r\n\t\t\t\t\t\tparseInt(rgb[1], 16),\r\n\t\t\t\t\t\tparseInt(rgb[2], 16),\r\n\t\t\t\t\t\tparseInt(rgb[3], 16)\r\n\t\t\t\t  ]\r\n\t\t\t\t: null;\r\n\t\t\t// if (this.lineType == 'line') result.push(this.opacity);\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tgetCountryCoords(name) {\r\n\t\t\tif (!this.country_lookup)\r\n\t\t\t\tthis.country_lookup = require('country-js');\r\n\t\t\tlet info = this.country_lookup.search(name)[0];\r\n\t\t\tlet result = [];\r\n\t\t\tif (!info) {\r\n\t\t\t\t// Kosovo (XK) not in the library\r\n\t\t\t\tif (name.toLowerCase() == 'xk') result = [21.166191, 42.667542];\r\n\t\t\t\telse result = [0, 0];\r\n\t\t\t} else {\r\n\t\t\t\tlet coords = info.geo;\r\n\t\t\t\tresult = [coords.longitude, coords.latitude];\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tgetCalculatedValue(count) {\r\n\t\t\tlet min = 2;\r\n\t\t\tlet max = 50;\r\n\t\t\tlet portion =\r\n\t\t\t\t(count - this.minCountryCount) /\r\n\t\t\t\t(this.maxCountryCount - this.minCountryCount);\r\n\t\t\tlet result = (max - min + 1) * portion + min;\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tupdateMarkers(layer) {\r\n\t\t\tlet source = layer.split('_')[1];\r\n\t\t\tlet counts = [];\r\n\t\t\tthis.clusters = {};\r\n\t\t\tthis.map.querySourceFeatures(source).forEach(feature => {\r\n\t\t\t\t// continue only if the point is part of a cluster\r\n\t\t\t\tif (!feature.properties.cluster) return;\r\n\t\t\t\t// omit the clusters that are already added\r\n\t\t\t\tif (this.clusters.hasOwnProperty(feature.properties.cluster_id))\r\n\t\t\t\t\treturn;\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.clusters[feature.properties.cluster_id] = {\r\n\t\t\t\t\t\tcount: feature.properties.point_count,\r\n\t\t\t\t\t\tcoords: feature.geometry.coordinates\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcounts.push(feature.properties.point_count);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// this sets the scale for our circle radius and this is why we need the totals. We need to set a mininum and a maximum to define the domain and the range.\r\n\t\t\t// minimum value should be 22 as pixel value lower than 10 (for local connection) would appear super big\r\n\t\t\tthis.scale = d3\r\n\t\t\t\t.scaleLinear()\r\n\t\t\t\t.domain([d3.min(counts), d3.max(counts)])\r\n\t\t\t\t.range([0, 80]);\r\n\r\n\t\t\tObject.keys(this.clusters).forEach((clusterId, i) => {\r\n\t\t\t\t// get points underneath\r\n\t\t\t\tthis.map\r\n\t\t\t\t\t.getSource(source)\r\n\t\t\t\t\t.getClusterLeaves(\r\n\t\t\t\t\t\tparseInt(clusterId),\r\n\t\t\t\t\t\tthis.clusters[clusterId].count,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t(err, leaves) => {\r\n\t\t\t\t\t\t\tif (!err)\r\n\t\t\t\t\t\t\t\tthis.saveClusterLeaves(\r\n\t\t\t\t\t\t\t\t\tleaves,\r\n\t\t\t\t\t\t\t\t\tclusterId,\r\n\t\t\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\t\t\tlayer\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsaveClusterLeaves(leaves, id, i, layer) {\r\n\t\t\tthis.clusters[id].leaves = leaves;\r\n\t\t\tif (i == Object.keys(this.clusters).length - 1)\r\n\t\t\t\tthis.updateCharts(layer);\r\n\t\t},\r\n\r\n\t\tupdateCharts(layer) {\r\n\t\t\tlet markers_local = [];\r\n\t\t\tlet markers = [];\r\n\t\t\tObject.keys(this.clusters).forEach(clusterId => {\r\n\t\t\t\tlet cluster = this.clusters[clusterId];\r\n\t\t\t\tlet radius = 0;\r\n\t\t\t\tlet center = cluster.coords;\r\n\t\t\t\t// get the approximate radius of the cluster\r\n\t\t\t\tcluster.leaves.forEach(leaf => {\r\n\t\t\t\t\tlet dist = turf.distance(center, leaf.geometry.coordinates);\r\n\t\t\t\t\tif (dist >= radius) radius = dist;\r\n\t\t\t\t});\r\n\t\t\t\t// get local and non-local connections;\r\n\t\t\t\tlet nonlocal = {};\r\n\t\t\t\tlet local = {};\r\n\t\t\t\tcluster.leaves.forEach(leaf => {\r\n\t\t\t\t\tlet dist = turf.distance(center, leaf.properties.target);\r\n\t\t\t\t\tif (dist > radius) {\r\n\t\t\t\t\t\tif (nonlocal.hasOwnProperty(leaf.properties.set))\r\n\t\t\t\t\t\t\tnonlocal[leaf.properties.set].push(leaf);\r\n\t\t\t\t\t\telse nonlocal[leaf.properties.set] = [leaf];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (local.hasOwnProperty(leaf.properties.set))\r\n\t\t\t\t\t\t\tlocal[leaf.properties.set].push(leaf);\r\n\t\t\t\t\t\telse local[leaf.properties.set] = [leaf];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet size_final = this.scale(cluster.count);\r\n\t\t\t\tlet size_min = 10;\r\n\t\t\t\tlet count_local = d3.sum(\r\n\t\t\t\t\tArray.from(Object.values(local), x => x.length)\r\n\t\t\t\t);\r\n\t\t\t\tlet count_nonlocal = d3.sum(\r\n\t\t\t\t\tArray.from(Object.values(nonlocal), x => x.length)\r\n\t\t\t\t);\r\n\t\t\t\tlet size_local =\r\n\t\t\t\t\t(size_final * count_local) / cluster.count + size_min;\r\n\t\t\t\tlet size_nonlocal = size_final + size_min;\r\n\r\n\t\t\t\t// add a chart for non-local connections\r\n\t\t\t\tlet type = layer.split('_')[0];\r\n\t\t\t\tlet marker;\r\n\t\t\t\tlet data;\r\n\t\t\t\t// pie chart\r\n\t\t\t\tif (type == 'pie' && count_nonlocal > 0) {\r\n\t\t\t\t\tlet values = [];\r\n\t\t\t\t\tlet labels = [];\r\n\t\t\t\t\tlet colors = [];\r\n\t\t\t\t\tlet features = [];\r\n\t\t\t\t\t// add local connection pie chart\r\n\t\t\t\t\tObject.keys(local).forEach(set => {\r\n\t\t\t\t\t\tvalues.push(local[set].length);\r\n\t\t\t\t\t\tlabels.push(set);\r\n\t\t\t\t\t\tcolors.push(this.$store.state.sets[set].color);\r\n\t\t\t\t\t\tlocal[set].forEach(item => {\r\n\t\t\t\t\t\t\tfeatures.push(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (values.length != 0) {\r\n\t\t\t\t\t\tlet data = [];\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\tvalues: values,\r\n\t\t\t\t\t\t\tlabels: labels,\r\n\t\t\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t\t\tcolors: colors\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\topacity: 0.8,\r\n\t\t\t\t\t\t\ttype: 'pie',\r\n\t\t\t\t\t\t\thoverinfo: 'none',\r\n\t\t\t\t\t\t\ttextinfo: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet marker = {\r\n\t\t\t\t\t\t\tid: 'marker_local_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\t\tchartId: 'chart_local_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\t\tsource: layer.split('_')[1],\r\n\t\t\t\t\t\t\tcoords: center,\r\n\t\t\t\t\t\t\tsize: size_local,\r\n\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\tfeatures: features\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tmarkers_local.push(marker);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvalues = [];\r\n\t\t\t\t\tlabels = [];\r\n\t\t\t\t\tcolors = [];\r\n\t\t\t\t\tdata = [];\r\n\t\t\t\t\tfeatures = [];\r\n\t\t\t\t\t// add non-local connection pie chart\r\n\t\t\t\t\tObject.keys(nonlocal).forEach(set => {\r\n\t\t\t\t\t\tvalues.push(nonlocal[set].length);\r\n\t\t\t\t\t\tlabels.push(set);\r\n\t\t\t\t\t\t// colors.push(this.$store.state.sets[set].color);\r\n\t\t\t\t\t\tcolors.push('#ffffff');\r\n\t\t\t\t\t\tnonlocal[set].forEach(item => {\r\n\t\t\t\t\t\t\tfeatures.push(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (values.length != 0) {\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\tvalues: values,\r\n\t\t\t\t\t\t\tlabels: labels,\r\n\t\t\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t\t\tcolors: colors\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\topacity: 0.1,\r\n\t\t\t\t\t\t\ttype: 'pie',\r\n\t\t\t\t\t\t\thoverinfo: 'none',\r\n\t\t\t\t\t\t\ttextinfo: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmarker = {\r\n\t\t\t\t\t\t\tid: 'marker_nonlocal_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\t\tchartId:\r\n\t\t\t\t\t\t\t\t'chart_nonlocal_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\t\tsource: layer.split('_')[1],\r\n\t\t\t\t\t\t\tcoords: center,\r\n\t\t\t\t\t\t\tsize: size_nonlocal,\r\n\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\tfeatures: features\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tmarkers.push(marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// rose chart\r\n\t\t\t\t} else if (type == 'flower' && count_nonlocal > 0) {\r\n\t\t\t\t\tdata = [];\r\n\t\t\t\t\tlet dirs = {\r\n\t\t\t\t\t\tNorth: [],\r\n\t\t\t\t\t\t'N-E': [],\r\n\t\t\t\t\t\tEast: [],\r\n\t\t\t\t\t\t'S-E': [],\r\n\t\t\t\t\t\tSouth: [],\r\n\t\t\t\t\t\t'S-W': [],\r\n\t\t\t\t\t\tWest: [],\r\n\t\t\t\t\t\t'N-W': []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tObject.keys(nonlocal).forEach(set => {\r\n\t\t\t\t\t\tlet r = [0, 0, 0, 0, 0, 0, 0, 0];\r\n\t\t\t\t\t\tnonlocal[set].forEach(item => {\r\n\t\t\t\t\t\t\tlet dir = item.properties.dir;\r\n\t\t\t\t\t\t\tlet idx = [\r\n\t\t\t\t\t\t\t\t'North',\r\n\t\t\t\t\t\t\t\t'N-E',\r\n\t\t\t\t\t\t\t\t'East',\r\n\t\t\t\t\t\t\t\t'S-E',\r\n\t\t\t\t\t\t\t\t'South',\r\n\t\t\t\t\t\t\t\t'S-W',\r\n\t\t\t\t\t\t\t\t'West',\r\n\t\t\t\t\t\t\t\t'N-W'\r\n\t\t\t\t\t\t\t].indexOf(dir);\r\n\t\t\t\t\t\t\tr[idx]++;\r\n\t\t\t\t\t\t\tdirs[dir].push(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\tr: r,\r\n\t\t\t\t\t\t\ttheta: [\r\n\t\t\t\t\t\t\t\t'North',\r\n\t\t\t\t\t\t\t\t'N-E',\r\n\t\t\t\t\t\t\t\t'East',\r\n\t\t\t\t\t\t\t\t'S-E',\r\n\t\t\t\t\t\t\t\t'South',\r\n\t\t\t\t\t\t\t\t'S-W',\r\n\t\t\t\t\t\t\t\t'West',\r\n\t\t\t\t\t\t\t\t'N-W'\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tname: set,\r\n\t\t\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t\t\tcolor: this.$store.state.sets[set].color\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttype: 'barpolar',\r\n\t\t\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\t\t\thoverinfo: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet maxN = d3.max(Array.from(data, x => d3.max(x.r)));\r\n\t\t\t\t\tlet offset = 0;\r\n\t\t\t\t\tif (count_local > 0)\r\n\t\t\t\t\t\toffset =\r\n\t\t\t\t\t\t\t(maxN * size_local) / (size_nonlocal - size_local);\r\n\t\t\t\t\t// let petal_buffer;\r\n\t\t\t\t\t// // give petal buffer of 10 pixel for small petal size\r\n\t\t\t\t\t// if(count_local > 0)\r\n\t\t\t\t\t//     petal_buffer = 8 * maxN / (size_nonlocal - size_local-8);\r\n\t\t\t\t\t// else petal_buffer = 8 * maxN / size_nonlocal\r\n\t\t\t\t\t// console.log(petal_buffer);\r\n\t\t\t\t\t// for(let i = 0; i < data.length; i++) {\r\n\t\t\t\t\t//     for(let j = 0; j < 8; j++) {\r\n\t\t\t\t\t//         if(data[i].r[j] > 0)\r\n\t\t\t\t\t//             data[i].r[j] += petal_buffer;\r\n\t\t\t\t\t//     }\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// let offset = (maxN * size_nonlocal) / 25;\r\n\t\t\t\t\tmarker = {\r\n\t\t\t\t\t\tid: 'marker_nonlocal_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\tchartId: 'chart_nonlocal_' + layer + '-' + clusterId,\r\n\t\t\t\t\t\tsource: layer.split('_')[1],\r\n\t\t\t\t\t\tcoords: center,\r\n\t\t\t\t\t\tsize: size_nonlocal,\r\n\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\trange: [-offset, maxN],\r\n\t\t\t\t\t\tfeatures: dirs\r\n\t\t\t\t\t};\r\n\t\t\t\t\tmarkers.push(marker);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// check if the marker with the cluster_id is already on the screen by iterating through our markersOnScreen object, which keeps track of that\r\n\t\t\tif (layer == 'pie_origin') {\r\n\t\t\t\t// this.markersOriginPie = markers;\r\n\t\t\t\tthis.markersOriginLocal = markers_local;\r\n\t\t\t} else if (layer == 'pie_located') {\r\n\t\t\t\t// this.markersLocatedPie = markers;\r\n\t\t\t\tthis.markersLocatedLocal = markers_local;\r\n\t\t\t} else if (layer == 'flower_origin')\r\n\t\t\t\tthis.markersOriginFlower = markers;\r\n\t\t\telse if (layer == 'flower_located')\r\n\t\t\t\tthis.markersLocatedFlower = markers;\r\n\t\t},\r\n\r\n\t\tgetIntegratedLayer(layer) {\r\n\t\t\tlet type = layer.split('_')[1];\r\n\t\t\tlet individualDots = {\r\n\t\t\t\tid: type + '_noncluster',\r\n\t\t\t\ttype: 'circle',\r\n\t\t\t\tsource: type,\r\n\t\t\t\tfilter: ['!=', ['get', 'cluster'], true],\r\n\t\t\t\tpaint: {}\r\n\t\t\t};\r\n\t\t\t// this.map.on('mouseenter', type + '_cluster', function(e) {\r\n\t\t\t//     console.log(e);\r\n\t\t\t//     // var coordinates = e.features[0].geometry.coordinates.slice();\r\n\t\t\t//     // var description = e.features[0].properties.set;\r\n\t\t\t//     //     var features = this.map.queryRenderedFeatures(e.point, {\r\n\t\t\t//     //     layers: [type + '_cluster']\r\n\t\t\t//     // })\r\n\t\t\t//     //     console.log(features)\r\n\t\t\t// });\r\n\t\t\t// this.map.on('mouseleave', type + '_cluster', function() {\r\n\t\t\t//     console.log('mouse left');\r\n\t\t\t// });\r\n\r\n\t\t\t// color and shape settings\r\n\t\t\tif (type == 'origin') {\r\n\t\t\t\tindividualDots.paint['circle-color'] = this.colorFilters;\r\n\t\t\t\tindividualDots.paint['circle-radius'] = 2;\r\n\t\t\t} else {\r\n\t\t\t\tindividualDots.paint['circle-stroke-color'] = this.colorFilters;\r\n\t\t\t\tindividualDots.paint['circle-radius'] = 3;\r\n\t\t\t\tindividualDots.paint['circle-stroke-width'] = 2;\r\n\t\t\t\tindividualDots.paint['circle-color'] = 'rgba(0, 0, 0, 0)';\r\n\t\t\t}\r\n\t\t\tthis.layers[type + '_noncluster'] = individualDots;\r\n\t\t\tthis.updateMarkers(layer);\r\n\t\t},\r\n\r\n\t\tgetSetLayer(type, setName) {\r\n\t\t\tlet set = this.$store.state.sets[setName];\r\n\t\t\tlet layerConf = {\r\n\t\t\t\tid: type + '-' + setName,\r\n\t\t\t\tautoHighlight: true,\r\n\t\t\t\thighlightColor: [211, 211, 211],\r\n\t\t\t\tpickable: true\r\n\t\t\t};\r\n\r\n\t\t\t// layer type\r\n\t\t\tif (['line', 'line_country'].includes(type)) {\r\n\t\t\t\tlayerConf.type = LineLayer;\r\n\t\t\t\tlayerConf.getColor = () => this.hexToRGB(set.color);\r\n\t\t\t} else if (['arc', 'arc_country'].includes(type)) {\r\n\t\t\t\tlayerConf.type = ArcLayer;\r\n\t\t\t} else if (\r\n\t\t\t\t['dot_origin', 'dot_located', 'highlighted'].includes(type)\r\n\t\t\t) {\r\n\t\t\t\tlayerConf.type = ScatterplotLayer;\r\n\t\t\t\tlayerConf.filled = true;\r\n\t\t\t\tlayerConf.radiusScale = 10;\r\n\t\t\t}\r\n\r\n\t\t\t// layer data\r\n\t\t\tif (\r\n\t\t\t\t[\r\n\t\t\t\t\t'line',\r\n\t\t\t\t\t'arc',\r\n\t\t\t\t\t'dot_origin',\r\n\t\t\t\t\t'dot_located',\r\n\t\t\t\t\t'highlighted'\r\n\t\t\t\t].includes(type)\r\n\t\t\t) {\r\n\t\t\t\tlayerConf.data = set.members;\r\n\t\t\t\tlayerConf.onHover = ({ object, x, y }) =>\r\n\t\t\t\t\tthis.$refs.tooltip.setTooltip(object, x, y, 'tweet');\r\n\t\t\t} else if (['line_country', 'arc_country'].includes(type)) {\r\n\t\t\t\tlayerConf.data = set.stats.country.connections;\r\n\t\t\t\tlayerConf.onHover = ({ object, x, y }) =>\r\n\t\t\t\t\tthis.$refs.tooltip.setTooltip(object, x, y, 'country');\r\n\t\t\t\tlayerConf.getWidth = d => this.getCalculatedValue(d.count); // might have to tweak later;\r\n\t\t\t\tlayerConf.getSourcePosition = d =>\r\n\t\t\t\t\tthis.getCountryCoords(d.origin);\r\n\t\t\t\tlayerConf.getTargetPosition = d =>\r\n\t\t\t\t\tthis.getCountryCoords(d.located);\r\n\t\t\t}\r\n\r\n\t\t\tif (['arc', 'arc_country'].includes(type)) {\r\n\t\t\t\tlayerConf.getSourceColor = this.hexToRGB(set.color).concat(255);\r\n\t\t\t\tlayerConf.getTargetColor = this.hexToRGB(set.color).concat(30);\r\n\t\t\t} else {\r\n\t\t\t\tlayerConf.opacity = this.opacity;\r\n\t\t\t}\r\n\r\n\t\t\tif (type == 'line' || type == 'arc') {\r\n\t\t\t\tlayerConf.getWidth = 2;\r\n\t\t\t\tlayerConf.getSourcePosition = d => [\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place.coordinates[1],\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place.coordinates[0]\r\n\t\t\t\t];\r\n\t\t\t\tlayerConf.getTargetPosition = d => [\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx].predicted\r\n\t\t\t\t\t\t.coordinates[1],\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx].predicted\r\n\t\t\t\t\t\t.coordinates[0]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\tif (['dot_origin', 'dot_located'].includes(type)) {\r\n\t\t\t\tlayerConf.stroked = false;\r\n\t\t\t}\r\n\t\t\tif (['dot_origin', 'dot_located', 'highlighted'].includes(type)) {\r\n\t\t\t\tlayerConf.getFillColor = () => this.hexToRGB(set.color);\r\n\t\t\t\tlayerConf.radiusMinPixels = 2;\r\n\t\t\t\tlayerConf.radiusMaxPixels = 100;\r\n\t\t\t\tlayerConf.getRadius = d => Math.sqrt(d.exists);\r\n\t\t\t}\r\n\t\t\tif (['dot_origin', 'highlighted'].includes(type)) {\r\n\t\t\t\tlayerConf.getPosition = d => [\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx]['place']\r\n\t\t\t\t\t\t.coordinates[1],\r\n\t\t\t\t\tthis.$store.state.data[d.type][d.idx]['place']\r\n\t\t\t\t\t\t.coordinates[0]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\t// individual settings\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'line':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'arc':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'line_country':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'arc_country':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dot_origin':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dot_located':\r\n\t\t\t\t\tlayerConf.getPosition = d => [\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx]['predicted']\r\n\t\t\t\t\t\t\t.coordinates[1],\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx]['predicted']\r\n\t\t\t\t\t\t\t.coordinates[0]\r\n\t\t\t\t\t];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'highlighted':\r\n\t\t\t\t\tlayerConf.stroked = true;\r\n\t\t\t\t\tlayerConf.lineWidthMinPixels = 0.5;\r\n\t\t\t\t\tlayerConf.getLineColor = [255, 255, 255];\r\n\t\t\t\t\tlayerConf.extensions = this.filterExtension;\r\n\t\t\t\t\tlayerConf.filterRange = [\r\n\t\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t\t[0, 0]\r\n\t\t\t\t\t];\r\n\t\t\t\t\tlayerConf.getFilterValue = d => [\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[1],\r\n\t\t\t\t\t\tthis.$store.state.data[d.type][d.idx].place\r\n\t\t\t\t\t\t\t.coordinates[0]\r\n\t\t\t\t\t];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tlet layer = new MapboxLayer(layerConf);\r\n\t\t\tthis.layers[type][setName] = layer;\r\n        },\r\n        \r\n        roseCreated() {\r\n            if(this.isRosePieOrigin)\r\n                this.isPieOrigin = true\r\n            if(this.isRosePieLocated)\r\n                this.isPieLocated = true\r\n        },\r\n\r\n\t\thoverOnChart(payload) {\r\n\t\t\tif (payload == null) {\r\n\t\t\t\tthis.hoverLayerIds.forEach(id => {\r\n\t\t\t\t\tthis.map.removeLayer(id);\r\n\t\t\t\t});\r\n\t\t\t\tthis.minimapPayload = null;\r\n\t\t\t\tthis.$refs.chart_tooltip.hideTooltip();\r\n\t\t\t} else {\r\n\t\t\t\tthis.map\r\n\t\t\t\t\t.querySourceFeatures(payload.source)\r\n\t\t\t\t\t.forEach(feature => {\r\n\t\t\t\t\t\t// continue only if the point is part of a cluster\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tfeature.properties.cluster &&\r\n\t\t\t\t\t\t\tfeature.properties.cluster_id == payload.clusterId\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tlet point = this.map.project(\r\n\t\t\t\t\t\t\t\tfeature.geometry.coordinates\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthis.$refs.chart_tooltip.setTooltip(\r\n\t\t\t\t\t\t\t\tpayload.info,\r\n\t\t\t\t\t\t\t\tpoint.x,\r\n\t\t\t\t\t\t\t\tpoint.y,\r\n\t\t\t\t\t\t\t\tpayload.size / 2\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t// make feature collection with target coordinates\r\n\t\t\t\tlet features = [];\r\n\t\t\t\tpayload.items.forEach(item => {\r\n\t\t\t\t\tfeatures.push({\r\n\t\t\t\t\t\ttype: 'Feature',\r\n\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\tset: item.properties.set\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\t\ttype: 'Point',\r\n\t\t\t\t\t\t\tcoordinates: item.properties.target\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tif (this.map.getSource(this.hoverSourceId) === undefined) {\r\n\t\t\t\t\tlet geojson = {\r\n\t\t\t\t\t\ttype: 'geojson',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\t\t\tfeatures: features\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.map.addSource(this.hoverSourceId, geojson);\r\n\t\t\t\t}\r\n\t\t\t\tthis.map.getSource(this.hoverSourceId).setData({\r\n\t\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\t\tfeatures: features\r\n\t\t\t\t});\r\n\t\t\t\tthis.hoverLayerIds = [];\r\n\t\t\t\tlet hoverLayers = [];\r\n\t\t\t\t// heatmap layer\r\n\t\t\t\tthis.sets.forEach(set => {\r\n\t\t\t\t\tlet layerId = 'hoverlayer' + '_' + set;\r\n\t\t\t\t\tthis.hoverLayerIds.push(layerId);\r\n\t\t\t\t\tlet layer = {\r\n\t\t\t\t\t\tid: layerId,\r\n\t\t\t\t\t\ttype: 'heatmap',\r\n\t\t\t\t\t\tmaxzoom: 15,\r\n\t\t\t\t\t\tsource: this.hoverSourceId,\r\n\t\t\t\t\t\tpaint: {\r\n\t\t\t\t\t\t\t// heatmap properties, refer to the pages below\r\n\t\t\t\t\t\t\t// https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/#paint-heatmap-heatmap-color\r\n\t\t\t\t\t\t\t// https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/#paint-heatmap-heatmap-color\r\n\t\t\t\t\t\t\t// https://blog.mapbox.com/introducing-heatmaps-in-mapbox-gl-js-71355ada9e6c\r\n\t\t\t\t\t\t\t'heatmap-color': [\r\n\t\t\t\t\t\t\t\t'interpolate',\r\n\t\t\t\t\t\t\t\t['linear'],\r\n\t\t\t\t\t\t\t\t['heatmap-density'],\r\n\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t'rgba(0, 0, 255, 0)',\r\n                                0.3,\r\n\t\t\t\t\t\t\t\tthis.$store.state.sets[set].colors[6],\r\n\t\t\t\t\t\t\t\t0.7,\r\n                                this.$store.state.sets[set].colors[5],\r\n                                1,\r\n                                this.$store.state.sets[set].colors[3]\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'heatmap-opacity': 0.5,\r\n\t\t\t\t\t\t\t'heatmap-radius': 40\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: ['==', ['get', 'set'], set]\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.map.addLayer(layer);\r\n\t\t\t\t\thoverLayers.push(layer);\r\n\t\t\t\t});\r\n\t\t\t\tlet newLayers = [];\r\n\t\t\t\thoverLayers.forEach(layer => {\r\n\t\t\t\t\tlet newLayer = {};\r\n\t\t\t\t\tObject.assign(newLayer, layer);\r\n\t\t\t\t\tnewLayer.id += '_minimap';\r\n\t\t\t\t\tnewLayer.source = 'source';\r\n\t\t\t\t\tnewLayer.paint['heatmap-radius'] = 5;\r\n\t\t\t\t\tnewLayers.push(newLayer);\r\n\t\t\t\t});\r\n\t\t\t\tthis.minimapPayload = {\r\n\t\t\t\t\tlayers: newLayers,\r\n\t\t\t\t\tfeatures: features\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclickOnChart(payload) {\r\n\t\t\tif (payload.length > 0) {\r\n\t\t\t\tlet selected = [];                \r\n\t\t\t\tpayload.forEach(item => {\r\n\r\n\t\t\t\t\tlet lastIdx= item.properties.set_id.lastIndexOf('_')\r\n\t\t\t\t\tlet memberType = item.properties.set_id.substring(0, lastIdx)\r\n\t\t\t\t\tlet memberIdx = item.properties.set_id.substring(lastIdx+1, item.properties.set_id.length)\r\n\t\t\t\t\tselected.push({\r\n\t\t\t\t\t\ttype: memberType,\r\n\t\t\t\t\t\tidx: memberIdx\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.$store.commit('updateSelection', selected);\r\n\t\t\t\tthis.$store.commit('updateDirectSetSelectionSignal', true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\twatch: {\r\n\t\tupdate(payload) {\r\n\t\t\tif (payload.type === 'delete') this.deleteSet(payload.set);\r\n\t\t\telse this.addSet(payload.set);\r\n\t\t},\r\n\t\tresizeInfo(height) {\r\n\t\t\tdocument.getElementById(this.componentId).style.height =\r\n\t\t\t\theight + 'px';\r\n\t\t\tthis.map.resize();\r\n\t\t},\r\n\t\tselectedRange(range) {\r\n\t\t\tObject.keys(this.layers.highlighted).forEach(setName => {\r\n\t\t\t\tthis.layers.highlighted[setName].setProps({\r\n\t\t\t\t\tfilterRange: range\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tlet selected = this.getSelected();\r\n\t\t\tif (selected.length > 0)\r\n\t\t\t\tthis.$store.commit('updateSelection', selected);\r\n\t\t},\r\n\t\tselectionMode(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\t// hide tooltip when selection mode is on\r\n\t\t\t\tthis.$refs.tooltip.setTooltip(null, 0, 0);\r\n\t\t\t\tObject.keys(this.layers).forEach(layer => {\r\n\t\t\t\t\tif (layer == 'highlighted') {\r\n\t\t\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\t\t\tif (!this.layers[layer].hasOwnProperty(setName))\r\n\t\t\t\t\t\t\t\tthis.getSetLayer(layer, setName);\r\n\t\t\t\t\t\t\tthis.map.addLayer(this.layers[layer][setName]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (layer == 'dot_origin' && !this.settings[layer])\r\n\t\t\t\t\t\tthis.toggleLayer(layer, true);\r\n\t\t\t\t\telse if (layer != 'dot_origin' && this.settings[layer])\r\n\t\t\t\t\t\tthis.toggleLayer(layer, false);\r\n\t\t\t\t});\r\n\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\tthis.layers.dot_origin[setName].setProps({\r\n\t\t\t\t\t\topacity: 0.3\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t// this.map.triggerRepaint();\r\n\t\t\t} else {\r\n\t\t\t\tthis.sets.forEach(setName => {\r\n\t\t\t\t\tthis.layers.dot_origin[setName].setProps({\r\n\t\t\t\t\t\topacity: this.opacity\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tObject.keys(this.layers).forEach(layer => {\r\n\t\t\t\t\tif (layer != 'dot_origin' && this.settings[layer])\r\n\t\t\t\t\t\tthis.toggleLayer(layer, true);\r\n\t\t\t\t\telse if (layer == 'dot_origin' && !this.settings[layer])\r\n\t\t\t\t\t\tthis.toggleLayer(layer, false);\r\n\t\t\t\t\telse if (layer == 'highlighted')\r\n\t\t\t\t\t\tObject.keys(this.layers[layer]).forEach(setName => {\r\n\t\t\t\t\t\t\tthis.map.removeLayer(\r\n\t\t\t\t\t\t\t\tthis.layers[layer][setName].id\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.selectedRange = [\r\n\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t[0, 0]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t},\r\n\t\tsets(sets) {\r\n\t\t\tif (sets.length == 0) {\r\n\t\t\t\tthis.minCountryCount = Infinity;\r\n\t\t\t\tthis.maxCountryCount = 0;\r\n\t\t\t} else {\r\n\t\t\t\tlet mins = [];\r\n\t\t\t\tlet maxs = [];\r\n\t\t\t\tsets.forEach(set => {\r\n\t\t\t\t\tmins.push(this.$store.state.sets[set].stats.country.min);\r\n\t\t\t\t\tmaxs.push(this.$store.state.sets[set].stats.country.max);\r\n\t\t\t\t});\r\n\t\t\t\tthis.minCountryCount = Math.min(...mins);\r\n\t\t\t\tthis.maxCountryCount = Math.max(...maxs);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcountryCountRange() {\r\n\t\t\tlet layers = ['line_country', 'arc_country'];\r\n\t\t\tlayers.forEach(layer => {\r\n\t\t\t\tif (this.settings[layer]) {\r\n\t\t\t\t\tthis.toggleLayer(layer, false);\r\n\t\t\t\t\tthis.toggleLayer(layer, true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tisLine(value) {\r\n\t\t\tthis.toggleLayer('line', value);\r\n\t\t},\r\n\t\tisArc(value) {\r\n\t\t\tthis.toggleLayer('arc', value);\r\n\t\t},\r\n\t\tisDotOrigin(value) {\r\n\t\t\tthis.toggleLayer('dot_origin', value);\r\n\t\t},\r\n\t\tisDotLocated(value) {\r\n\t\t\tthis.toggleLayer('dot_located', value);\r\n\t\t},\r\n\t\tisLineCountry(value) {\r\n\t\t\tthis.toggleLayer('line_country', value);\r\n\t\t},\r\n\t\tisArcCountry(value) {\r\n\t\t\tthis.toggleLayer('arc_country', value);\r\n\t\t},\r\n\t\tisPieOrigin(value) {\r\n\t\t\tthis.toggleLayer('pie_origin', value);\r\n\t\t},\r\n\t\tisPieLocated(value) {\r\n\t\t\tthis.toggleLayer('pie_located', value);\r\n\t\t},\r\n\t\tisFlowerOrigin(value) {\r\n\t\t\tthis.toggleLayer('flower_origin', value);\r\n\t\t},\r\n\t\tisFlowerLocated(value) {\r\n\t\t\tthis.toggleLayer('flower_located', value);\r\n\t\t},\r\n\t\tisRosePieOrigin(value) {\r\n\t\t\tif(value) {\r\n\t\t\t\tthis.isFlowerOrigin = true\r\n\t\t\t} else {\r\n\t\t\t\tthis.isFlowerOrigin = false\r\n\t\t\t\tthis.isPieOrigin = false\r\n\t\t\t\tthis.markersOriginFlower = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tisRosePieLocated(value) {\r\n\t\t\tif(value) {\r\n\t\t\t\tthis.isFlowerLocated = true\r\n\t\t\t} else {\r\n\t\t\t\tthis.isFlowerLocated = false\r\n\t\t\t\tthis.isPieLocated = false\r\n\t\t\t\tthis.markersLocatedFlower = [];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper-control {\r\n\tposition: absolute;\r\n\tright: 1.5em;\r\n\ttop: 3em;\r\n\toverflow: hidden;\r\n}\r\n\r\n.v-card {\r\n\tfont-family: 'Varela Round', sans-serif;\r\n}\r\n\r\n.rose {\r\n    z-index: 500 !important;\r\n}\r\n\r\n.pie {\r\n    z-index: 1000 !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=e3a0404a&scoped=true&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=e3a0404a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3a0404a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',{staticClass:\"flex-grow-1 d-flex flex-column ma-0 pa-0\"},[_c('v-row',{staticClass:\"flex-grow-0 flex-shrink-0 ma-0 pa-0\"},[_c('v-slider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.length != 0),expression:\"data.length != 0\"}],staticClass:\"mx-10 mt-2\",staticStyle:{\"font-family\":\"'Varela Round', sans-serif\"},attrs:{\"min\":_vm.sliderMin,\"max\":_vm.sliderMax,\"step\":\"5\",\"thumb-label\":\"\",\"label\":\"Bin Size\",\"track-color\":\"grey lighten-2\",\"color\":\"grey darken-1\",\"hide-details\":\"\"},model:{value:(_vm.bin),callback:function ($$v) {_vm.bin=$$v},expression:\"bin\"}})],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.length != 0),expression:\"data.length != 0\"}],staticClass:\"flex-grow-1 ma-0 pa-0\",attrs:{\"id\":_vm.chartContainerId}},[_c('Plotly',{attrs:{\"id\":_vm.chartId,\"data\":_vm.data,\"layout\":_vm.layout,\"displayModeBar\":false}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-col class=\"flex-grow-1 d-flex flex-column ma-0 pa-0\">\r\n        <v-row class=\"flex-grow-0 flex-shrink-0 ma-0 pa-0\">\r\n            <v-slider\r\n                v-model=\"bin\"\r\n                :min=\"sliderMin\"\r\n                :max=\"sliderMax\"\r\n                step=\"5\"\r\n                thumb-label\r\n                class=\"mx-10 mt-2\"\r\n                label=\"Bin Size\"\r\n                track-color=\"grey lighten-2\"\r\n                color=\"grey darken-1\"\r\n                hide-details\r\n                v-show=\"data.length != 0\"\r\n                style=\"font-family: 'Varela Round', sans-serif;\"\r\n            ></v-slider>\r\n        </v-row>\r\n        <v-row\r\n            v-show=\"data.length != 0\"\r\n            :id=\"chartContainerId\"\r\n            class=\"flex-grow-1 ma-0 pa-0\"\r\n        >\r\n            <Plotly\r\n                :id=\"chartId\"\r\n                :data=\"data\"\r\n                :layout=\"layout\"\r\n                :displayModeBar=\"false\"\r\n            ></Plotly>\r\n        </v-row>\r\n    </v-col>\r\n</template>\r\n\r\n<script>\r\nimport { Plotly } from 'vue-plotly';\r\n\r\nexport default {\r\n    name: 'ErrorDistance',\r\n    components: {\r\n        Plotly\r\n    },\r\n    props: ['chartId', 'selected', 'selectionMode', 'update', 'resizeInfo'],\r\n    computed: {\r\n        chartContainerId() {\r\n            return 'container-' + this.chartId;\r\n        }\r\n    },\r\n    data: function() {\r\n        return {\r\n            data: [],\r\n            sliderMin: 5,\r\n            sliderMax: 1000,\r\n            bin: 1000,\r\n            layout: {\r\n                margin: {\r\n                    l: 50,\r\n                    r: 30,\r\n                    b: 50,\r\n                    t: 20,\r\n                    pad: 0\r\n                },\r\n                font: {\r\n                    family: 'Varela Round',\r\n                    size: 14,\r\n                    color: '#7f7f7f'\r\n                },\r\n                xaxis: {\r\n                    // visible: false\r\n                },\r\n                yaxis: {\r\n                    zeroline: false,\r\n                    // tick interval is integer\r\n                    // tickformat: ',d'\r\n                },\r\n                showlegend: false,\r\n                hoverlabel: {\r\n                    font: {\r\n                        family: 'Varela Round'\r\n                    }\r\n                },\r\n                barmode: 'overlay',\r\n                bargap: 0.2\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        deleteSet(setName) {\r\n            if (setName == 'all') this.data = [];\r\n            else\r\n                for (let i in this.data)\r\n                    if (this.data[i].name == setName) this.data.splice(i, 1);\r\n        },\r\n        addSet(setName) {\r\n            // set already exists\r\n            for (let i in this.data) if (this.data[i].name == setName) return;\r\n            let set = this.$store.state.sets[setName];\r\n            let datum = {\r\n                type: 'histogram',\r\n                histnorm: 'probability',\r\n                name: setName,\r\n                opacity: 0.5,\r\n                marker: { color: set.color },\r\n                xbins: {\r\n                    end: max,\r\n                    size: this.bin,\r\n                    start: 0\r\n                },\r\n                hoverinfo: 'y'\r\n            };\r\n            let min = Infinity;\r\n            let max = 0;\r\n            let x = [];\r\n            set.members.forEach(member => {\r\n                let dist = this.$store.state.data[member.type][member.idx].dist;\r\n                x.push(dist);\r\n                if (dist <= min) min = dist;\r\n                if (dist >= max) max = dist;\r\n            });\r\n            this.sliderMax = Math.round(max / 10);\r\n            datum.x = x;\r\n            this.data.push(datum);\r\n        }\r\n    },\r\n    watch: {\r\n        update(payload) {\r\n            if (payload.type === 'delete') this.deleteSet(payload.set);\r\n            else this.addSet(payload.set);\r\n        },\r\n        resizeInfo(height) {\r\n            let childPos = document.getElementById(this.chartContainerId)\r\n                .offsetTop;\r\n            let parentPos = document.getElementById(this.chartContainerId)\r\n                .parentElement.offsetTop;\r\n            let offset = childPos - parentPos;\r\n            document.getElementById(this.chartContainerId).style.height =\r\n                height - offset + 'px';\r\n        },\r\n        // update series based on the slider value\r\n        bin(bin) {\r\n            // this.updateSeries(this.sets);\r\n            this.data.forEach(datum => {\r\n                datum.xbins.size = bin;\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.js-plotly-plot,\r\n.plot-container {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorDistance.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorDistance.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ErrorDistance.vue?vue&type=template&id=8ce1b760&scoped=true&\"\nimport script from \"./ErrorDistance.vue?vue&type=script&lang=js&\"\nexport * from \"./ErrorDistance.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ErrorDistance.vue?vue&type=style&index=0&id=8ce1b760&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8ce1b760\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',{staticClass:\"d-flex flex-column ma-0 pa-0\"},[_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.length != 0),expression:\"data.length != 0\"}],staticClass:\"flex-grow-0 flex-shrink-0 mx-6 pa-0\",attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"}},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"grey darken-1\",\"disabled\":_vm.range[0] === 0},on:{\"click\":_vm.goToPreviousPage}},[_c('v-icon',[_vm._v(\"fas fa-chevron-left\")])],1)],1),_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"}},[_c('p',{staticClass:\"text-center ma-0\"},[_vm._v(\" \"+_vm._s(_vm.range[0] + 1)+\" - \"+_vm._s(_vm.range[1])+\" \")])]),_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"},on:{\"click\":_vm.goToNextPage}},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"grey darken-1\",\"disabled\":_vm.range[1] >= _vm.n_items}},[_c('v-icon',[_vm._v(\"fas fa-chevron-right\")])],1)],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.length != 0),expression:\"data.length != 0\"}],staticClass:\"flex-grow-1 ma-0 pa-0\",attrs:{\"id\":_vm.chartContainerId}},[_c('Plotly',{attrs:{\"id\":_vm.chartId,\"data\":_vm.data,\"layout\":_vm.layout,\"displayModeBar\":false}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-col class=\"d-flex flex-column ma-0 pa-0\">\r\n        <v-row\r\n            v-show=\"data.length != 0\"\r\n            class=\"flex-grow-0 flex-shrink-0 mx-6 pa-0\"\r\n            align=\"center\"\r\n            justify=\"center\"\r\n        >\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n                justify=\"center\"\r\n            >\r\n                <v-btn\r\n                    text\r\n                    icon\r\n                    color=\"grey darken-1\"\r\n                    :disabled=\"range[0] === 0\"\r\n                    @click=\"goToPreviousPage\"\r\n                >\r\n                    <v-icon>fas fa-chevron-left</v-icon>\r\n                </v-btn>\r\n            </v-col>\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n                justify=\"center\"\r\n            >\r\n                <p class=\"text-center ma-0\">\r\n                    {{ range[0] + 1 }} - {{ range[1] }}\r\n                </p>\r\n            </v-col>\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                justify=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n                @click=\"goToNextPage\"\r\n            >\r\n                <v-btn\r\n                    text\r\n                    icon\r\n                    color=\"grey darken-1\"\r\n                    :disabled=\"range[1] >= n_items\"\r\n                >\r\n                    <v-icon>fas fa-chevron-right</v-icon>\r\n                </v-btn>\r\n            </v-col>\r\n        </v-row>\r\n        <v-row\r\n            v-show=\"data.length != 0\"\r\n            class=\"flex-grow-1 ma-0 pa-0\"\r\n            :id=\"chartContainerId\"\r\n        >\r\n            <Plotly\r\n                :id=\"chartId\"\r\n                :data=\"data\"\r\n                :layout=\"layout\"\r\n                :displayModeBar=\"false\"\r\n            ></Plotly>\r\n        </v-row>\r\n    </v-col>\r\n</template>\r\n\r\n<script>\r\nimport { Plotly } from 'vue-plotly';\r\n\r\nexport default {\r\n    name: 'OriginCountries',\r\n    components: {\r\n        Plotly\r\n    },\r\n    props: ['chartId', 'selected', 'selectionMode', 'update', 'resizeInfo'],\r\n    computed: {\r\n        chartContainerId() {\r\n            return 'container-' + this.chartId;\r\n        },\r\n        n_items() {\r\n            return this.sorted.length;\r\n        }\r\n    },\r\n    data: function() {\r\n        return {\r\n            range: [0, 10],\r\n            data: [],\r\n            opacity: 0.8,\r\n            individual_counts: {},\r\n            total_counts: {},\r\n            sorted: [],\r\n            layout: {\r\n                margin: {\r\n                    l: 50,\r\n                    r: 30,\r\n                    b: 50,\r\n                    t: 20,\r\n                    pad: 0\r\n                },\r\n                font: {\r\n                    family: 'Varela Round',\r\n                    size: 14,\r\n                    color: '#7f7f7f'\r\n                },\r\n                xaxis: {\r\n                    zeroline: false,\r\n                    // tick interval is integer\r\n                    tickformat: ',d',\r\n                    fixedrange: true\r\n                },\r\n                yaxis: {\r\n                    visible: true,\r\n                    automargin: true,\r\n                    type: 'category',\r\n                    fixedrange: true,\r\n                    tickangle: 45\r\n                },\r\n                showlegend: false,\r\n                hoverlabel: {\r\n                    font: {\r\n                        family: 'Varela Round'\r\n                    }\r\n                },\r\n                barmode: 'stack',\r\n                bargap: 0.2,\r\n                annotations: []\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        deleteSet(setName) {\r\n            if (setName == 'all') {\r\n                this.individual_counts = {};\r\n                this.total_counts = {};\r\n                this.sorted = [];\r\n                this.data = [];\r\n                this.range[0] = 0;\r\n                this.range[1] = 10;\r\n            } else {\r\n                if (this.individual_counts.hasOwnProperty(setName)) {\r\n                    let countries = this.individual_counts[setName];\r\n                    Object.keys(countries).forEach(country => {\r\n                        this.total_counts[country] -= countries[country].count;\r\n                    });\r\n                    delete this.individual_counts[setName];\r\n                    this.range[0] = 0;\r\n                    this.range[1] = 10;\r\n                    this.redrawChart();\r\n                }\r\n            }\r\n        },\r\n        addSet(setName) {\r\n            // set already exists\r\n            if (this.individual_counts.hasOwnProperty(setName)) return;\r\n\r\n            // adding data\r\n            let set = this.$store.state.sets[setName];\r\n            let countries = {};\r\n            set.members.forEach(member => {\r\n                let country = this.$store.state.data[member.type][member.idx]\r\n                    .place.country;\r\n                if (country === 'United States of America') country = 'USA';\r\n                if (countries.hasOwnProperty(country)) {\r\n                    countries[country].count++;\r\n                    countries[country].members.push(member);\r\n                } else {\r\n                    countries[country] = {\r\n                        count: 1,\r\n                        members: [member]\r\n                    };\r\n                }\r\n                if (this.total_counts.hasOwnProperty(country))\r\n                    this.total_counts[country]++;\r\n                else this.total_counts[country] = 1;\r\n            });\r\n            this.individual_counts[setName] = countries;\r\n            // Create items array & sort based on the second element & slice\r\n            this.redrawChart();\r\n        },\r\n        redrawChart() {\r\n            // Create items array & sort based on the second element & slice\r\n            this.sorted = [];\r\n            Object.keys(this.total_counts).forEach(country => {\r\n                this.sorted.push({\r\n                    country: country,\r\n                    count: this.total_counts[country]\r\n                });\r\n            });\r\n            this.sorted.sort(function(first, second) {\r\n                return second.count - first.count;\r\n            });\r\n            this.data = [];\r\n            Object.keys(this.individual_counts).forEach(setName => {\r\n                this.addDatum(setName);\r\n            });\r\n        },\r\n        goToPreviousPage() {\r\n            if (this.range[0] === 0) return;\r\n            this.range[1] = this.range[0];\r\n            this.range[0] -= 10;\r\n            this.data = [];\r\n            Object.keys(this.individual_counts).forEach(setName => {\r\n                this.addDatum(setName);\r\n            });\r\n        },\r\n        goToNextPage() {\r\n            if (this.range[1] >= this.n_items) return;\r\n            this.range[0] = this.range[1];\r\n            this.range[1] += 10;\r\n            this.data = [];\r\n            Object.keys(this.individual_counts).forEach(setName => {\r\n                this.addDatum(setName);\r\n            });\r\n        },\r\n        addDatum(setName) {\r\n            let result = this.individual_counts[setName];\r\n            // let y = [];\r\n            let counts = [];\r\n            let countries = [];\r\n\r\n            let end = this.range[1];\r\n            if (this.range[1] > this.n_items) end = this.n_items;\r\n            // this.layout.annotations = [];\r\n            // let annotation = {};\r\n            for (let i = this.range[0]; i < end; i++) {\r\n                let country = this.sorted[i].country;\r\n                countries.push(country);\r\n                if (result.hasOwnProperty(country)) {\r\n                    counts.push(result[country].count);\r\n                } else {\r\n                    counts.push(NaN); // value 0 makes a tiny line\r\n                }\r\n                // annotation = {\r\n                //     xref: 'x',\r\n                //     y: country,\r\n                //     text: this.sorted[i].count,\r\n                //     xanchor: 'right',\r\n                //     yanchor: 'middle',\r\n                //     showarrow: false,\r\n                //     font: {\r\n                //         family: 'Arial',\r\n                //         size: 16,\r\n                //         color: 'black'\r\n                //     }\r\n                // };\r\n            }\r\n            // this.layout.annotations.push(annotation);\r\n            let datum = {\r\n                type: 'bar',\r\n                orientation: 'h',\r\n                name: setName,\r\n                marker: {\r\n                    color: this.$store.state.sets[setName].color,\r\n                    opacity: this.opacity\r\n                },\r\n                x: counts,\r\n                y: countries,\r\n                hoverinfo: 'x'\r\n            };\r\n            this.data.push(datum);\r\n        },\r\n\r\n        clickHandler(data) {\r\n            let country = data.points[0].y;\r\n            let selected = [];\r\n            // make the clicked one more opaque\r\n            data.points.forEach(setPoint => {\r\n                this.data.forEach(datum => {\r\n                    let opacities = [];\r\n                    for (let i = 0; i < 10; i++) {\r\n                        if (i === setPoint.pointIndex) opacities.push(0.8);\r\n                        else opacities.push(0.5);\r\n                    }\r\n                    datum.marker.opacity = opacities;\r\n                });\r\n                let setName = setPoint.data.name;\r\n                selected = selected.concat(\r\n                    this.individual_counts[setName][country].members\r\n                );\r\n            });\r\n            this.$store.commit('updateSelection', selected);\r\n        }\r\n    },\r\n    watch: {\r\n        update(payload) {\r\n            if (payload.type === 'delete') this.deleteSet(payload.set);\r\n            else this.addSet(payload.set);\r\n        },\r\n        resizeInfo(height) {\r\n            let childPos = document.getElementById(this.chartContainerId).offsetTop;\r\n            let parentPos = document.getElementById(this.chartContainerId).parentElement.offsetTop;\r\n            let offset = childPos - parentPos;\r\n            document.getElementById(this.chartContainerId).style.height =\r\n                height - offset + 'px';\r\n        },\r\n\r\n        selected(selected) {\r\n            // selection got reset perhaps by ESC key\r\n            if (selected.length === 0 && this.selectionMode) {\r\n                this.data.forEach(datum => {\r\n                    this.opacity = 0.5;\r\n                    datum.marker.opacity = this.opacity;\r\n                });\r\n            }\r\n        },\r\n\r\n        selectionMode(value) {\r\n            if (value) {\r\n                this.data.forEach(datum => {\r\n                    this.opacity = 0.5;\r\n                    datum.marker.opacity = this.opacity;\r\n                });\r\n                let chart = document.getElementById(this.chartId);\r\n                chart.on('plotly_click', this.clickHandler);\r\n            } else {\r\n                this.data.forEach(datum => {\r\n                    this.opacity = 0.8;\r\n                    datum.marker.opacity = this.opacity;\r\n                });\r\n                let chart = document.getElementById(this.chartId);\r\n                chart.removeListener('plotly_click', this.clickHandler);\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.text-center {\r\n    font-family: 'Varela Round', sans-serif;\r\n    font-size: 16px;\r\n}\r\n\r\n.js-plotly-plot,\r\n.plot-container {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OriginCountries.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OriginCountries.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OriginCountries.vue?vue&type=template&id=6b3cdace&scoped=true&\"\nimport script from \"./OriginCountries.vue?vue&type=script&lang=js&\"\nexport * from \"./OriginCountries.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OriginCountries.vue?vue&type=style&index=0&id=6b3cdace&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b3cdace\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',{staticClass:\"d-flex flex-column ma-0 pa-0\"},[_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.length != 0),expression:\"data.length != 0\"}],staticClass:\"flex-grow-0 flex-shrink-0 mx-6 pa-0\",attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"}},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"grey darken-1\",\"disabled\":_vm.range[0] === 0},on:{\"click\":_vm.goToPreviousPage}},[_c('v-icon',[_vm._v(\"fas fa-chevron-left\")])],1)],1),_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"}},[_c('p',{staticClass:\"text-center ma-0\"},[_vm._v(\" \"+_vm._s(_vm.range[0] + 1)+\" - \"+_vm._s(_vm.range[1])+\" \")])]),_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"},on:{\"click\":_vm.goToNextPage}},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"grey darken-1\",\"disabled\":_vm.range[1] >= _vm.n_items}},[_c('v-icon',[_vm._v(\"fas fa-chevron-right\")])],1)],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.length != 0),expression:\"data.length != 0\"}],staticClass:\"flex-grow-1 ma-0 pa-0\",attrs:{\"id\":_vm.chartContainerId}},[_c('Plotly',{attrs:{\"id\":_vm.chartId,\"data\":_vm.data,\"layout\":_vm.layout,\"displayModeBar\":false}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-col class=\"d-flex flex-column ma-0 pa-0\">\r\n        <v-row\r\n            v-show=\"data.length != 0\"\r\n            class=\"flex-grow-0 flex-shrink-0 mx-6 pa-0\"\r\n            align=\"center\"\r\n            justify=\"center\"\r\n        >\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n                justify=\"center\"\r\n            >\r\n                <v-btn\r\n                    text\r\n                    icon\r\n                    color=\"grey darken-1\"\r\n                    :disabled=\"range[0] === 0\"\r\n                    @click=\"goToPreviousPage\"\r\n                >\r\n                    <v-icon>fas fa-chevron-left</v-icon>\r\n                </v-btn>\r\n            </v-col>\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n                justify=\"center\"\r\n            >\r\n                <p class=\"text-center ma-0\">\r\n                    {{ range[0] + 1 }} - {{ range[1] }}\r\n                </p>\r\n            </v-col>\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                justify=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n                @click=\"goToNextPage\"\r\n            >\r\n                <v-btn\r\n                    text\r\n                    icon\r\n                    color=\"grey darken-1\"\r\n                    :disabled=\"range[1] >= n_items\"\r\n                >\r\n                    <v-icon>fas fa-chevron-right</v-icon>\r\n                </v-btn>\r\n            </v-col>\r\n        </v-row>\r\n        <v-row\r\n            v-show=\"data.length != 0\"\r\n            class=\"flex-grow-1 ma-0 pa-0\"\r\n            :id=\"chartContainerId\"\r\n        >\r\n            <Plotly\r\n                :id=\"chartId\"\r\n                :data=\"data\"\r\n                :layout=\"layout\"\r\n                :displayModeBar=\"false\"\r\n            ></Plotly>\r\n        </v-row>\r\n    </v-col>\r\n</template>\r\n\r\n<script>\r\nimport { Plotly } from 'vue-plotly';\r\n\r\nexport default {\r\n    name: 'LocatedCountries',\r\n    components: {\r\n        Plotly\r\n    },\r\n    props: ['chartId', 'selected', 'selectionMode', 'update', 'resizeInfo'],\r\n    computed: {\r\n        chartContainerId() {\r\n            return 'container-' + this.chartId;\r\n        },\r\n        n_items() {\r\n            return this.sorted.length;\r\n        }\r\n    },\r\n    data: function() {\r\n        return {\r\n            range: [0, 10],\r\n            data: [],\r\n            opacity: 0.8,\r\n            individual_counts: {},\r\n            total_counts: {},\r\n            sorted: [],\r\n            layout: {\r\n                margin: {\r\n                    l: 50,\r\n                    r: 30,\r\n                    b: 50,\r\n                    t: 20,\r\n                    pad: 0\r\n                },\r\n                font: {\r\n                    family: 'Varela Round',\r\n                    size: 14,\r\n                    color: '#7f7f7f'\r\n                },\r\n                xaxis: {\r\n                    zeroline: false,\r\n                    // tick interval is integer\r\n                    tickformat: ',d',\r\n                    fixedrange: true\r\n                },\r\n                yaxis: {\r\n                    visible: true,\r\n                    automargin: true,\r\n                    type: 'category',\r\n                    fixedrange: true,\r\n                    tickangle: 45\r\n                },\r\n                showlegend: false,\r\n                hoverlabel: {\r\n                    font: {\r\n                        family: 'Varela Round'\r\n                    }\r\n                },\r\n                barmode: 'stack',\r\n                bargap: 0.2,\r\n                annotations: []\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        deleteSet(setName) {\r\n            if (setName == 'all') {\r\n                this.individual_counts = {};\r\n                this.total_counts = {};\r\n                this.sorted = [];\r\n                this.data = [];\r\n                this.range[0] = 0;\r\n                this.range[1] = 10;\r\n            } else {\r\n                if (this.individual_counts.hasOwnProperty(setName)) {\r\n                    let countries = this.individual_counts[setName];\r\n                    Object.keys(countries).forEach(country => {\r\n                        this.total_counts[country] -= countries[country].count;\r\n                    });\r\n                    delete this.individual_counts[setName];\r\n                    this.range[0] = 0;\r\n                    this.range[1] = 10;\r\n                    this.redrawChart();\r\n                }\r\n            }\r\n        },\r\n        addSet(setName) {\r\n            // set already exists\r\n            if (this.individual_counts.hasOwnProperty(setName)) return;\r\n\r\n            // adding data\r\n            let set = this.$store.state.sets[setName];\r\n            let countries = {};\r\n            set.members.forEach(member => {\r\n                let country = this.$store.state.data[member.type][member.idx]\r\n                    .predicted.country;\r\n                if (country === 'United States of America') country = 'USA';\r\n                if (countries.hasOwnProperty(country)) {\r\n                    countries[country].count++;\r\n                    countries[country].members.push(member);\r\n                } else {\r\n                    countries[country] = {\r\n                        count: 1,\r\n                        members: [member]\r\n                    };\r\n                }\r\n                if (this.total_counts.hasOwnProperty(country))\r\n                    this.total_counts[country]++;\r\n                else this.total_counts[country] = 1;\r\n            });\r\n            this.individual_counts[setName] = countries;\r\n            // Create items array & sort based on the second element & slice\r\n            this.redrawChart();\r\n        },\r\n        redrawChart() {\r\n            // Create items array & sort based on the second element & slice\r\n            this.sorted = [];\r\n            Object.keys(this.total_counts).forEach(country => {\r\n                this.sorted.push({\r\n                    country: country,\r\n                    count: this.total_counts[country]\r\n                });\r\n            });\r\n            this.sorted.sort(function(first, second) {\r\n                return second.count - first.count;\r\n            });\r\n            this.data = [];\r\n            Object.keys(this.individual_counts).forEach(setName => {\r\n                this.addDatum(setName);\r\n            });\r\n        },\r\n        goToPreviousPage() {\r\n            if (this.range[0] === 0) return;\r\n            this.range[1] = this.range[0];\r\n            this.range[0] -= 10;\r\n            this.data = [];\r\n            Object.keys(this.individual_counts).forEach(setName => {\r\n                this.addDatum(setName);\r\n            });\r\n        },\r\n        goToNextPage() {\r\n            if (this.range[1] >= this.n_items) return;\r\n            this.range[0] = this.range[1];\r\n            this.range[1] += 10;\r\n            this.data = [];\r\n            Object.keys(this.individual_counts).forEach(setName => {\r\n                this.addDatum(setName);\r\n            });\r\n        },\r\n        addDatum(setName) {\r\n            let result = this.individual_counts[setName];\r\n            // let y = [];\r\n            let counts = [];\r\n            let countries = [];\r\n\r\n            let end = this.range[1];\r\n            if (this.range[1] > this.n_items) end = this.n_items;\r\n            // this.layout.annotations = [];\r\n            // let annotation = {};\r\n            for (let i = this.range[0]; i < end; i++) {\r\n                let country = this.sorted[i].country;\r\n                countries.push(country);\r\n                if (result.hasOwnProperty(country)) {\r\n                    counts.push(result[country].count);\r\n                } else {\r\n                    counts.push(NaN); // value 0 makes a tiny line\r\n                }\r\n                // annotation = {\r\n                //     xref: 'x',\r\n                //     y: country,\r\n                //     text: this.sorted[i].count,\r\n                //     xanchor: 'right',\r\n                //     yanchor: 'middle',\r\n                //     showarrow: false,\r\n                //     font: {\r\n                //         family: 'Arial',\r\n                //         size: 16,\r\n                //         color: 'black'\r\n                //     }\r\n                // };\r\n            }\r\n            // this.layout.annotations.push(annotation);\r\n            let datum = {\r\n                type: 'bar',\r\n                orientation: 'h',\r\n                name: setName,\r\n                marker: {\r\n                    color: this.$store.state.sets[setName].color,\r\n                    opacity: this.opacity\r\n                },\r\n                x: counts,\r\n                y: countries,\r\n                hoverinfo: 'x'\r\n            };\r\n            this.data.push(datum);\r\n        },\r\n\r\n        clickHandler(data) {\r\n            let country = data.points[0].y;\r\n            let selected = [];\r\n            // make the clicked one more opaque\r\n            data.points.forEach(setPoint => {\r\n                this.data.forEach(datum => {\r\n                    let opacities = [];\r\n                    for (let i = 0; i < 10; i++) {\r\n                        if (i === setPoint.pointIndex) opacities.push(0.8);\r\n                        else opacities.push(0.5);\r\n                    }\r\n                    datum.marker.opacity = opacities;\r\n                });\r\n                let setName = setPoint.data.name;\r\n                selected = selected.concat(\r\n                    this.individual_counts[setName][country].members\r\n                );\r\n            });\r\n            this.$store.commit('updateSelection', selected);\r\n        }\r\n    },\r\n    watch: {\r\n        update(payload) {\r\n            if (payload.type === 'delete') this.deleteSet(payload.set);\r\n            else this.addSet(payload.set);\r\n        },\r\n        resizeInfo(height) {\r\n            let childPos = document.getElementById(this.chartContainerId).offsetTop;\r\n            let parentPos = document.getElementById(this.chartContainerId).parentElement.offsetTop;\r\n            let offset = childPos - parentPos;\r\n            document.getElementById(this.chartContainerId).style.height =\r\n                height - offset + 'px';\r\n        },\r\n\r\n        selected(selected) {\r\n            // selection got reset perhaps by ESC key\r\n            if (selected.length === 0 && this.selectionMode) {\r\n                this.data.forEach(datum => {\r\n                    this.opacity = 0.5;\r\n                    datum.marker.opacity = this.opacity;\r\n                });\r\n            }\r\n        },\r\n\r\n        selectionMode(value) {\r\n            if (value) {\r\n                this.data.forEach(datum => {\r\n                    this.opacity = 0.5;\r\n                    datum.marker.opacity = this.opacity;\r\n                });\r\n                let chart = document.getElementById(this.chartId);\r\n                chart.on('plotly_click', this.clickHandler);\r\n            } else {\r\n                this.data.forEach(datum => {\r\n                    this.opacity = 0.8;\r\n                    datum.marker.opacity = this.opacity;\r\n                });\r\n                let chart = document.getElementById(this.chartId);\r\n                chart.removeListener('plotly_click', this.clickHandler);\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.text-center {\r\n    font-family: 'Varela Round', sans-serif;\r\n    font-size: 16px;\r\n}\r\n\r\n.js-plotly-plot,\r\n.plot-container {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocatedCountries.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocatedCountries.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LocatedCountries.vue?vue&type=template&id=cb3b76e8&scoped=true&\"\nimport script from \"./LocatedCountries.vue?vue&type=script&lang=js&\"\nexport * from \"./LocatedCountries.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LocatedCountries.vue?vue&type=style&index=0&id=cb3b76e8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cb3b76e8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.length != 0),expression:\"data.length != 0\"}],staticClass:\"flex-grow-1 ma-0 pa-0\"},[_c('Plotly',{attrs:{\"data\":_vm.data,\"layout\":_vm.layout,\"display-mode-bar\":false}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div v-show=\"data.length != 0\" class=\"flex-grow-1 ma-0 pa-0\">\r\n        <Plotly :data=\"data\" :layout=\"layout\" :display-mode-bar=\"false\"></Plotly>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Plotly } from 'vue-plotly';\r\n\r\nexport default {\r\n    name: 'TextLength',\r\n    components: {\r\n        Plotly\r\n    },\r\n    props: ['chartId', 'componentId', 'selected', 'selectionMode', 'update', 'resizeInfo'],\r\n    data: function() {\r\n        return {\r\n            data: [],\r\n            layout: {\r\n                margin: {\r\n                    l: 50,\r\n                    r: 30,\r\n                    b: 50,\r\n                    t: 20,\r\n                    pad: 0\r\n                },\r\n                font: {\r\n                    family: 'Varela Round',\r\n                    size: 14,\r\n                    color: '#7f7f7f'\r\n                },\r\n                yaxis: {\r\n                    zeroline: false\r\n                },\r\n                xaxis: {\r\n                    visible: false\r\n                },\r\n                showlegend: false,\r\n                hoverlabel: {\r\n                    font: {\r\n                        family: 'Varela Round'\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        deleteSet(setName) {\r\n            if (setName == 'all') this.data = [];\r\n            else\r\n                for (let i in this.data)\r\n                    if (this.data[i].name == setName) this.data.splice(i, 1);\r\n        },\r\n        addSet(setName) {\r\n            // set already exists\r\n            for (let i in this.data) if (this.data[i].name == setName) return;\r\n            let set = this.$store.state.sets[setName];\r\n            let datum = {\r\n                type: 'box',\r\n                name: setName,\r\n                boxpoints: 'Outliers',\r\n                boxmean: true,\r\n                marker: { color: set.color }\r\n            };\r\n            let y = [];\r\n            set.members.forEach(member => {\r\n                y.push(\r\n                    this.$store.state.data[member.type][member.idx].text.length\r\n                );\r\n            });\r\n            datum.y = y;\r\n            this.data.push(datum);\r\n        }\r\n    },\r\n    watch: {\r\n        update(payload) {\r\n            if (payload.type === 'delete') this.deleteSet(payload.set);\r\n            else this.addSet(payload.set);\r\n        },\r\n        resizeInfo(height) {\r\n            document.getElementById(this.componentId).style.height =\r\n                height + 'px';\r\n        },\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.js-plotly-plot,\r\n.plot-container {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextLength.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextLength.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextLength.vue?vue&type=template&id=1fb98c0e&scoped=true&\"\nimport script from \"./TextLength.vue?vue&type=script&lang=js&\"\nexport * from \"./TextLength.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextLength.vue?vue&type=style&index=0&id=1fb98c0e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fb98c0e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',{staticClass:\"d-flex flex-column ma-0 pa-0\"},[_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sets.length != 0),expression:\"sets.length != 0\"}],staticClass:\"flex-grow-0 flex-shrink-0 mx-7 mb-5 pa-0\",staticStyle:{\"font-family\":\"'Varela Round', sans-serif\"},attrs:{\"align\":\"end\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"ma-0 py-0 px-5\",attrs:{\"cols\":\"12\",\"sm\":\"2\",\"align\":\"center\"}},[_c('v-switch',{staticClass:\"ma-0 pa-0\",attrs:{\"label\":\"TF bar\",\"color\":\"grey darken-3\",\"hide-details\":\"\"},model:{value:(_vm.tfBar),callback:function ($$v) {_vm.tfBar=$$v},expression:\"tfBar\"}}),_c('v-radio-group',{staticClass:\"mt-3 my-0 pa-0\",attrs:{\"mandatory\":true,\"hide-details\":\"\"},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},[_c('v-radio',{attrs:{\"label\":\"TF\",\"value\":\"tf\",\"color\":\"grey darken-1\"}}),_c('v-radio',{attrs:{\"label\":\"TF-IDF\",\"value\":\"tfidf\",\"color\":\"grey darken-1\"}})],1),_c('v-card',{staticClass:\"mt-3 pa-0 font-weight-bold\",attrs:{\"align\":\"center\",\"color\":\"grey darken-3\",\"dark\":\"\",\"round\":\"\",\"flat\":\"\"}},[_c('div',[_vm._v(\"Type\")])])],1),_c('v-col',{staticClass:\"ma-0 py-0 px-5\",attrs:{\"cols\":\"12\",\"sm\":\"2\",\"align\":\"center\"}},[_c('v-radio-group',{staticClass:\"ma-0 pa-0\",attrs:{\"mandatory\":true,\"hide-details\":\"\"},model:{value:(_vm.N),callback:function ($$v) {_vm.N=$$v},expression:\"N\"}},[_c('v-radio',{attrs:{\"label\":\"unigram\",\"value\":\"1\",\"color\":\"grey darken-1\"}}),_c('v-radio',{attrs:{\"label\":\"bigram\",\"value\":\"2\",\"color\":\"grey darken-1\"}}),_c('v-radio',{attrs:{\"label\":\"trigram\",\"value\":\"3\",\"color\":\"grey darken-1\"}})],1),_c('v-card',{staticClass:\"mt-3 pa-0 font-weight-bold\",attrs:{\"align\":\"center\",\"color\":\"grey darken-3\",\"dark\":\"\",\"round\":\"\",\"flat\":\"\"}},[_c('div',[_vm._v(\"n-gram\")])])],1),_c('v-col',{staticClass:\"ma-0 py-0 px-5\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"justify\":\"center\"}},[_c('v-row',{staticClass:\"ma-0 pa-0\"},[_c('Plotly',{attrs:{\"id\":\"slider_plot\",\"data\":_vm.slider_data,\"layout\":_vm.slider_layout,\"displayModeBar\":false}})],1),_c('v-row',{staticClass:\"ma-0 pa-0\"},[_c('v-slider',{staticClass:\"ma-0 pa-0\",attrs:{\"color\":\"grey darken-3\",\"track-color\":\"grey lighten-2\",\"min\":\"1\",\"max\":\"99\",\"step\":\"1\",\"height\":\"20\",\"thumb-label\":\"\",\"dense\":\"\",\"hide-details\":\"\"},model:{value:(_vm.topPercent),callback:function ($$v) {_vm.topPercent=$$v},expression:\"topPercent\"}})],1),_c('v-card',{staticClass:\"mt-3 pa-0 font-weight-bold\",attrs:{\"align\":\"center\",\"color\":\"grey darken-3\",\"dark\":\"\",\"round\":\"\",\"flat\":\"\"}},[_c('div',[_vm._v(\"top %\")])])],1),_c('v-col',{staticClass:\"ma-0 py-0 px-5\",attrs:{\"cols\":\"12\",\"sm\":\"4\"}},[_c('v-chip-group',{attrs:{\"mandatory\":\"\",\"max\":\"1\",\"show-arrows\":\"\",\"column\":\"\"},model:{value:(_vm.sortIndex),callback:function ($$v) {_vm.sortIndex=$$v},expression:\"sortIndex\"}},[_c('v-chip',{attrs:{\"color\":_vm.colorAll,\"outlined\":\"\",\"filter\":\"\",\"disabled\":_vm.type === 'tfidf'}},[_vm._v(\"_all\")]),_vm._l((_vm.sets),function(set){return _c('v-chip',{key:set,attrs:{\"color\":_vm.$store.state.sets[set].color,\"outlined\":\"\",\"filter\":\"\"}},[_vm._v(_vm._s(set))])})],2),_c('v-card',{staticClass:\"mt-3 pa-0 font-weight-bold\",attrs:{\"align\":\"center\",\"color\":\"grey darken-3\",\"dark\":\"\",\"round\":\"\",\"flat\":\"\"}},[_c('div',[_vm._v(\"sort by\")])])],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sets.length != 0),expression:\"sets.length != 0\"}],staticClass:\"flex-grow-0 flex-shrink-0 mx-6 pa-0\",staticStyle:{\"font-family\":\"'Varela Round', sans-serif\"},attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"}},[_c('v-btn',{staticClass:\"mx-5\",attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"grey darken-1\",\"disabled\":_vm.range[0] === 0},on:{\"click\":_vm.goToFirstPage}},[_c('v-icon',[_vm._v(\"fas fa-angle-double-left\")])],1),_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"grey darken-1\",\"disabled\":_vm.range[0] === 0},on:{\"click\":_vm.goToPreviousPage}},[_c('v-icon',[_vm._v(\"fas fa-angle-left\")])],1)],1),_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"}},[_c('p',{staticClass:\"text-center ma-0\"},[_vm._v(\" \"+_vm._s(_vm.range[0] + 1)+\" - \"+_vm._s(_vm.range[1])+\" \")])]),_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\",\"sm\":\"4\",\"align\":\"center\",\"justify\":\"center\"}},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"grey darken-1\",\"disabled\":_vm.range[1] == _vm.lengths[this.N]},on:{\"click\":_vm.goToNextPage}},[_c('v-icon',[_vm._v(\"fas fa-angle-right\")])],1),_c('v-btn',{staticClass:\"mx-5\",attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"grey darken-1\",\"disabled\":_vm.range[1] == _vm.lengths[this.N]},on:{\"click\":_vm.goToLastPage}},[_c('v-icon',[_vm._v(\"fas fa-angle-double-right\")])],1)],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sets.length != 0),expression:\"sets.length != 0\"}],staticClass:\"flex-grow-1 ma-0 pa-0\",attrs:{\"id\":_vm.chartContainerId}},[_c('Plotly',{attrs:{\"id\":_vm.chartId,\"data\":_vm.data,\"layout\":_vm.layout,\"displayModeBar\":false}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-col class=\"d-flex flex-column ma-0 pa-0\">\r\n        <v-row\r\n            v-show=\"sets.length != 0\"\r\n            class=\"flex-grow-0 flex-shrink-0 mx-7 mb-5 pa-0\"\r\n            align=\"end\"\r\n            justify=\"center\"\r\n            style=\"font-family: 'Varela Round', sans-serif;\"\r\n        >\r\n            <v-col cols=\"12\" sm=\"2\" align=\"center\" class=\"ma-0 py-0 px-5\">\r\n                <v-switch\r\n                    v-model=\"tfBar\"\r\n                    label=\"TF bar\"\r\n                    color=\"grey darken-3\"\r\n                    class=\"ma-0 pa-0\"\r\n                    hide-details\r\n                ></v-switch>\r\n                <v-radio-group\r\n                    v-model=\"type\"\r\n                    :mandatory=\"true\"\r\n                    class=\"mt-3 my-0 pa-0\"\r\n                    hide-details\r\n                >\r\n                    <v-radio\r\n                        label=\"TF\"\r\n                        value=\"tf\"\r\n                        color=\"grey darken-1\"\r\n                    ></v-radio>\r\n                    <v-radio\r\n                        label=\"TF-IDF\"\r\n                        value=\"tfidf\"\r\n                        color=\"grey darken-1\"\r\n                    ></v-radio>\r\n                </v-radio-group>\r\n                <v-card\r\n                    class=\"mt-3 pa-0 font-weight-bold\"\r\n                    align=\"center\"\r\n                    color=\"grey darken-3\"\r\n                    dark\r\n                    round\r\n                    flat\r\n                >\r\n                    <div>Type</div>\r\n                </v-card>\r\n            </v-col>\r\n            <v-col cols=\"12\" sm=\"2\" align=\"center\" class=\"ma-0 py-0 px-5\">\r\n                <v-radio-group\r\n                    v-model=\"N\"\r\n                    :mandatory=\"true\"\r\n                    class=\"ma-0 pa-0\"\r\n                    hide-details\r\n                >\r\n                    <v-radio\r\n                        label=\"unigram\"\r\n                        value=\"1\"\r\n                        color=\"grey darken-1\"\r\n                    ></v-radio>\r\n                    <v-radio\r\n                        label=\"bigram\"\r\n                        value=\"2\"\r\n                        color=\"grey darken-1\"\r\n                    ></v-radio>\r\n                    <v-radio\r\n                        label=\"trigram\"\r\n                        value=\"3\"\r\n                        color=\"grey darken-1\"\r\n                    ></v-radio>\r\n                </v-radio-group>\r\n                <v-card\r\n                    class=\"mt-3 pa-0 font-weight-bold\"\r\n                    align=\"center\"\r\n                    color=\"grey darken-3\"\r\n                    dark\r\n                    round\r\n                    flat\r\n                >\r\n                    <div>n-gram</div>\r\n                </v-card>\r\n            </v-col>\r\n            <v-col cols=\"12\" sm=\"4\" justify=\"center\" class=\"ma-0 py-0 px-5\">\r\n                <v-row class=\"ma-0 pa-0\">\r\n                    <Plotly\r\n                        id=\"slider_plot\"\r\n                        :data=\"slider_data\"\r\n                        :layout=\"slider_layout\"\r\n                        :displayModeBar=\"false\"\r\n                    ></Plotly>\r\n                </v-row>\r\n                <v-row class=\"ma-0 pa-0\">\r\n                    <v-slider\r\n                        v-model=\"topPercent\"\r\n                        color=\"grey darken-3\"\r\n                        track-color=\"grey lighten-2\"\r\n                        min=\"1\"\r\n                        max=\"99\"\r\n                        step=\"1\"\r\n                        height=\"20\"\r\n                        thumb-label\r\n                        dense\r\n                        class=\"ma-0 pa-0\"\r\n                        hide-details\r\n                    ></v-slider>\r\n                </v-row>\r\n                <v-card\r\n                    class=\"mt-3 pa-0 font-weight-bold\"\r\n                    align=\"center\"\r\n                    color=\"grey darken-3\"\r\n                    dark\r\n                    round\r\n                    flat\r\n                >\r\n                    <div>top %</div>\r\n                </v-card>\r\n            </v-col>\r\n            <v-col cols=\"12\" sm=\"4\" class=\"ma-0 py-0 px-5\">\r\n                <v-chip-group\r\n                    mandatory\r\n                    v-model=\"sortIndex\"\r\n                    max=\"1\"\r\n                    show-arrows\r\n                    column\r\n                >\r\n                    <v-chip\r\n                        :color=\"colorAll\"\r\n                        outlined\r\n                        filter\r\n                        :disabled=\"type === 'tfidf'\"\r\n                        >_all</v-chip\r\n                    >\r\n                    <v-chip\r\n                        v-for=\"set in sets\"\r\n                        :key=\"set\"\r\n                        :color=\"$store.state.sets[set].color\"\r\n                        outlined\r\n                        filter\r\n                        >{{ set }}</v-chip\r\n                    >\r\n                </v-chip-group>\r\n                <v-card\r\n                    class=\"mt-3 pa-0 font-weight-bold\"\r\n                    align=\"center\"\r\n                    color=\"grey darken-3\"\r\n                    dark\r\n                    round\r\n                    flat\r\n                >\r\n                    <div>sort by</div>\r\n                </v-card>\r\n            </v-col>\r\n        </v-row>\r\n        <v-row\r\n            v-show=\"sets.length != 0\"\r\n            class=\"flex-grow-0 flex-shrink-0 mx-6 pa-0\"\r\n            align=\"center\"\r\n            justify=\"center\"\r\n            style=\"font-family: 'Varela Round', sans-serif;\"\r\n        >\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n                justify=\"center\"\r\n            >\r\n                <v-btn\r\n                    text\r\n                    icon\r\n                    color=\"grey darken-1\"\r\n                    :disabled=\"range[0] === 0\"\r\n                    @click=\"goToFirstPage\"\r\n                    class=\"mx-5\"\r\n                >\r\n                    <v-icon>fas fa-angle-double-left</v-icon>\r\n                </v-btn>\r\n                <v-btn\r\n                    text\r\n                    icon\r\n                    color=\"grey darken-1\"\r\n                    :disabled=\"range[0] === 0\"\r\n                    @click=\"goToPreviousPage\"\r\n                >\r\n                    <v-icon>fas fa-angle-left</v-icon>\r\n                </v-btn>\r\n            </v-col>\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n                justify=\"center\"\r\n            >\r\n                <p class=\"text-center ma-0\">\r\n                    {{ range[0] + 1 }} - {{ range[1] }}\r\n                </p>\r\n            </v-col>\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"4\"\r\n                align=\"center\"\r\n                justify=\"center\"\r\n                class=\"ma-0 pa-0\"\r\n            >\r\n                <v-btn\r\n                    text\r\n                    icon\r\n                    color=\"grey darken-1\"\r\n                    :disabled=\"range[1] == lengths[this.N]\"\r\n                    @click=\"goToNextPage\"\r\n                >\r\n                    <v-icon>fas fa-angle-right</v-icon>\r\n                </v-btn>\r\n                <v-btn\r\n                    text\r\n                    icon\r\n                    color=\"grey darken-1\"\r\n                    :disabled=\"range[1] == lengths[this.N]\"\r\n                    @click=\"goToLastPage\"\r\n                    class=\"mx-5\"\r\n                >\r\n                    <v-icon>fas fa-angle-double-right</v-icon>\r\n                </v-btn>\r\n            </v-col>\r\n        </v-row>\r\n        <v-row\r\n            v-show=\"sets.length != 0\"\r\n            class=\"flex-grow-1 ma-0 pa-0\"\r\n            :id=\"chartContainerId\"\r\n        >\r\n            <Plotly\r\n                :id=\"chartId\"\r\n                :data=\"data\"\r\n                :layout=\"layout\"\r\n                :displayModeBar=\"false\"\r\n            ></Plotly>\r\n        </v-row>\r\n    </v-col>\r\n</template>\r\n\r\n<script>\r\nimport { Plotly } from 'vue-plotly';\r\nimport * as _ from 'underscore';\r\nimport { quantile } from 'simple-statistics';\r\nimport chroma from 'chroma-js';\r\n\r\nexport default {\r\n    name: 'NGramFrequency',\r\n    components: {\r\n        Plotly\r\n    },\r\n    props: [\r\n        'chartId',\r\n        'sets',\r\n        'selected',\r\n        'selectionMode',\r\n        'update',\r\n        'resizeInfo'\r\n    ],\r\n    data: function() {\r\n        return {\r\n            tf_all: { 1: [], 2: [], 3: [] },\r\n            tfidfs: {},\r\n            lengths: { 1: 0, 2: 0, 3: 0 },\r\n            quantiles: { tf_all: { 1: [], 2: [], 3: [] }, tfidf: {} },\r\n            quantiles_hist_tfidf: {},\r\n            range: [0, 10],\r\n            // user options\r\n            type: 'tf',\r\n            tfBar: true,\r\n            topPercent: 10,\r\n            sortIndex: 0,\r\n            N: '1',\r\n            terms: [],\r\n            colorAll: '#202020',\r\n            dotSize: 12,\r\n            // slider chart variables\r\n            slider_data: [],\r\n            slider_layout: {\r\n                height: 80,\r\n                margin: {\r\n                    l: 8,\r\n                    r: 8,\r\n                    b: 0,\r\n                    t: 0,\r\n                    pad: 0,\r\n                    autoexpand: false\r\n                },\r\n                font: {\r\n                    family: 'Varela Round',\r\n                    size: 14,\r\n                    color: '#7f7f7f'\r\n                },\r\n                xaxis: {\r\n                    visible: false,\r\n                    fixedrange: true\r\n                },\r\n                yaxis: {\r\n                    visible: false,\r\n                    fixedrange: true,\r\n                    type: 'log'\r\n                },\r\n                fixedrange: true,\r\n                showlegend: false,\r\n                hoverlabel: {\r\n                    font: {\r\n                        family: 'Varela Round'\r\n                    }\r\n                }\r\n            },\r\n            // chart variables\r\n            data: [],\r\n            layout: {\r\n                margin: {\r\n                    l: 50,\r\n                    r: 30,\r\n                    b: 50,\r\n                    t: 20,\r\n                    pad: 0\r\n                },\r\n                font: {\r\n                    family: 'Varela Round',\r\n                    size: 14,\r\n                    color: '#7f7f7f'\r\n                },\r\n                xaxis: {\r\n                    zeroline: false,\r\n                    fixedrange: true\r\n                },\r\n                yaxis: {\r\n                    automargin: true,\r\n                    type: 'category',\r\n                    fixedrange: true,\r\n                    showgrid: true\r\n                },\r\n                xaxis2: {\r\n                    visible: false,\r\n                    fixedrange: true,\r\n                    overlaying: 'x'\r\n                },\r\n                showlegend: false,\r\n                hoverlabel: {\r\n                    font: {\r\n                        family: 'Varela Round'\r\n                    }\r\n                },\r\n                hovermode: 'closest'\r\n            }\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        chartContainerId() {\r\n            return 'container-' + this.chartId;\r\n        },\r\n        sort() {\r\n            if (this.sortIndex == 0) return '_all';\r\n            else return this.sets[this.sortIndex - 1];\r\n        }\r\n    },\r\n    created() {\r\n        this.topPercents = [];\r\n        for (let i = 1; i < 100; i++) {\r\n            this.topPercents.push(i);\r\n        }\r\n    },\r\n    methods: {\r\n        addSet(setName) {\r\n            // update the term frequency for all sets combined\r\n            this.getTFforAll();\r\n            // get tf-idf for the new set and update for other sets\r\n            this.getTFIDFs();\r\n            // set the adding set as a sorting option if it's the first set in tfidf type\r\n            if (this.type == 'tfidf' && this.sets.length == 1)\r\n                this.sortIndex = 1;\r\n            // updating slider chart\r\n            if (this.type == 'tf') {\r\n                this.slider_data.push({\r\n                    type: 'bar',\r\n                    name: setName,\r\n                    x: this.topPercents,\r\n                    y: this.$store.state.sets[setName].textStats\r\n                        .tf_quantiles_hist[this.N],\r\n                    marker: {\r\n                        color: this.$store.state.sets[setName].color,\r\n                        opacity: 0.5\r\n                    }\r\n                });\r\n            } else {\r\n                this.slider_data.push({\r\n                    type: 'bar',\r\n                    name: setName,\r\n                    x: this.topPercents,\r\n                    y: this.quantiles_hist_tfidf[setName][this.N],\r\n                    marker: {\r\n                        color: this.$store.state.sets[setName].color,\r\n                        opacity: 0.5\r\n                    }\r\n                });\r\n            }\r\n            this.reorderTerms();\r\n            // adding data to the chart\r\n            this.updateChart();\r\n        },\r\n        deleteSet(setName) {\r\n            // change current sorting if it's the deleting set\r\n            if (this.sort == setName && this.type == 'tf') this.sortIndex = 0;\r\n            else if (\r\n                this.sort == setName &&\r\n                this.type == 'tfidf' &&\r\n                this.sets.length > 0\r\n            )\r\n                this.sortIndex = 1;\r\n            // delete quantiles\r\n            delete this.quantiles.tfidf[setName];\r\n            // delete quantile histogram data from slider chart\r\n            this.slider_data.splice(\r\n                _.find(this.slider_data, function(datum) {\r\n                    return datum.name == 'setName';\r\n                }),\r\n                1\r\n            );\r\n            delete this.quantiles_hist_tfidf[setName];\r\n            // the deleted set isn't the last one\r\n            if (this.sets.length > 0) {\r\n                // update the term frequency for all sets combined\r\n                this.getTFforAll();\r\n                // get tf-idf for the new set and update for other sets\r\n                this.getTFIDFs();\r\n                // change the range when the new terms are less than the previous range\r\n                if (this.range[1] > this.lengths[this.N]) this.goToLastPage();\r\n                this.updateChart();\r\n            } else {\r\n                // set the sorting option to null when there are no sets\r\n                this.sortIndex = 0;\r\n            }\r\n        },\r\n        // reorder all terms to prioritize the main set terms\r\n        reorderTerms() {\r\n            // get all terms first\r\n            let all = this.tf_all[this.N].map(x => x[0]);\r\n            // when the type is tf and sorting option is '_all' (which doesn't exist in tfidf type)\r\n            if (this.sort == '_all') this.terms = all;\r\n            // when the sorting option is a specific set\r\n            else {\r\n                // get the main set terms first\r\n                let main;\r\n                if (this.type == 'tf')\r\n                    main = this.$store.state.sets[\r\n                        this.sort\r\n                    ].textStats.tf_normalized[this.N].map(x => x[0]);\r\n                else main = this.tfidfs[this.sort][this.N].map(x => x[0]);\r\n                // extract the difference and place them after the main set terms\r\n                let remained = _.difference(all, main);\r\n                this.terms = main.concat(remained);\r\n            }\r\n        },\r\n        getTFforAll() {\r\n            let unigrams = {};\r\n            let bigrams = {};\r\n            let trigrams = {};\r\n            let n_unigrams = 0;\r\n            let n_bigrams = 0;\r\n            let n_trigrams = 0;\r\n            // get TF for all\r\n            this.sets.forEach(setName => {\r\n                let setTF = this.$store.state.sets[setName].textStats.tf;\r\n                // unigram\r\n                Object.keys(setTF['1']).forEach(key => {\r\n                    if (unigrams.hasOwnProperty(key))\r\n                        unigrams[key] += setTF['1'][key];\r\n                    else unigrams[key] = setTF['1'][key];\r\n                    n_unigrams += setTF['1'][key];\r\n                });\r\n                // bigrams\r\n                Object.keys(setTF['2']).forEach(key => {\r\n                    if (bigrams.hasOwnProperty(key))\r\n                        bigrams[key] += setTF['2'][key];\r\n                    else bigrams[key] = setTF['2'][key];\r\n                    n_bigrams += setTF['2'][key];\r\n                });\r\n                // trigrams\r\n                Object.keys(setTF['3']).forEach(key => {\r\n                    if (trigrams.hasOwnProperty(key))\r\n                        trigrams[key] += setTF['3'][key];\r\n                    else trigrams[key] = setTF['3'][key];\r\n                    n_trigrams += setTF['3'][key];\r\n                });\r\n            });\r\n            // normalize & sort\r\n            let unigrams_arr = [];\r\n            Object.keys(unigrams).forEach(gram => {\r\n                unigrams_arr.push([gram, unigrams[gram] / n_unigrams]);\r\n            });\r\n            unigrams_arr.sort(function(first, second) {\r\n                return second[1] - first[1];\r\n            });\r\n            let bigrams_arr = [];\r\n            Object.keys(bigrams).forEach(gram => {\r\n                bigrams_arr.push([gram, bigrams[gram] / n_bigrams]);\r\n            });\r\n            bigrams_arr.sort(function(first, second) {\r\n                return second[1] - first[1];\r\n            });\r\n            let trigrams_arr = [];\r\n            Object.keys(trigrams).forEach(gram => {\r\n                trigrams_arr.push([gram, trigrams[gram] / n_trigrams]);\r\n            });\r\n            trigrams_arr.sort(function(first, second) {\r\n                return second[1] - first[1];\r\n            });\r\n            this.tf_all['1'] = unigrams_arr;\r\n            this.tf_all['2'] = bigrams_arr;\r\n            this.tf_all['3'] = trigrams_arr;\r\n            // calculating max length for pagination\r\n            this.lengths['1'] = unigrams_arr.length;\r\n            this.lengths['2'] = bigrams_arr.length;\r\n            this.lengths['3'] = trigrams_arr.length;\r\n\r\n            // get quantiles\r\n            ['1', '2', '3'].forEach(N => {\r\n                this.quantiles.tf_all[N] = [];\r\n                // quantiles are calculated based on unique values (not terms, as many of them have the same values)\r\n                let values = _.uniq(this.tf_all[N].map(x => x[1]));\r\n                // pre-calculate quantiles for all options\r\n                for (let i = 1; i < 100; i++) {\r\n                    this.quantiles.tf_all[N].push(\r\n                        quantile(values, 1 - i / 100)\r\n                    );\r\n                }\r\n            });\r\n        },\r\n        getIDF(term, n) {\r\n            let inclusion = 0;\r\n            this.sets.forEach(setName => {\r\n                let setTF = this.$store.state.sets[setName].textStats.tf;\r\n                if (setTF[n].hasOwnProperty(term)) inclusion++;\r\n            });\r\n            return Math.log(this.sets.length / inclusion);\r\n        },\r\n        getTFIDFs() {\r\n            this.tfidfs = {};\r\n            this.sets.forEach(setName => {\r\n                let unigrams = [];\r\n                let bigrams = [];\r\n                let trigrams = [];\r\n                let setTF = this.$store.state.sets[setName].textStats\r\n                    .tf_normalized;\r\n                // unigram\r\n                setTF['1'].forEach(pair => {\r\n                    let tfidf = pair[1] * this.getIDF(pair[0], '1');\r\n                    unigrams.push([pair[0], tfidf]);\r\n                });\r\n                // bigram\r\n                setTF['2'].forEach(pair => {\r\n                    let tfidf = pair[1] * this.getIDF(pair[0], '2');\r\n                    bigrams.push([pair[0], tfidf]);\r\n                });\r\n                // trigram\r\n                setTF['3'].forEach(pair => {\r\n                    let tfidf = pair[1] * this.getIDF(pair[0], '3');\r\n                    trigrams.push([pair[0], tfidf]);\r\n                });\r\n                // sort\r\n                unigrams.sort(function(first, second) {\r\n                    return second[1] - first[1];\r\n                });\r\n                bigrams.sort(function(first, second) {\r\n                    return second[1] - first[1];\r\n                });\r\n                trigrams.sort(function(first, second) {\r\n                    return second[1] - first[1];\r\n                });\r\n                this.tfidfs[setName] = {\r\n                    1: unigrams,\r\n                    2: bigrams,\r\n                    3: trigrams\r\n                };\r\n                this.quantiles.tfidf[setName] = {};\r\n                this.quantiles_hist_tfidf[setName] = {};\r\n                // get quantiles\r\n                ['1', '2', '3'].forEach(N => {\r\n                    this.quantiles.tfidf[setName][N] = [];\r\n                    this.quantiles_hist_tfidf[setName][N] = [];\r\n                    // quantiles are calculated based on unique values (not terms, as many of them have the same values)\r\n                    let values = _.uniq(this.tfidfs[setName][N].map(x => x[1]));\r\n                    // pre-calculate quantiles for all options\r\n                    for (let i = 1; i < 100; i++) {\r\n                        let value = quantile(values, 1 - i / 100);\r\n                        this.quantiles.tfidf[setName][N].push(value);\r\n                        let hist_count = 0;\r\n                        this.tfidfs[setName][N].forEach(item => {\r\n                            if (i == 1 && item[1] > value) hist_count++;\r\n                            else if (\r\n                                i > 1 &&\r\n                                item[1] > value &&\r\n                                item[1] <=\r\n                                    this.quantiles.tfidf[setName][N][i - 2]\r\n                            )\r\n                                hist_count++;\r\n                            else return;\r\n                        });\r\n                        this.quantiles_hist_tfidf[setName][N].push(hist_count);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        goToFirstPage() {\r\n            if (this.range[0] === 0) return;\r\n            this.range = [0, 10];\r\n            this.updateChart();\r\n        },\r\n        goToPreviousPage() {\r\n            if (this.range[0] === 0) return;\r\n            this.range[1] = this.range[0];\r\n            this.range[0] -= 10;\r\n            this.updateChart();\r\n        },\r\n        goToNextPage() {\r\n            if (this.range[1] >= this.lengths[this.N]) return;\r\n            this.range[0] = this.range[1];\r\n            this.range[1] += 10;\r\n            if (this.range[1] >= this.lengths[this.N])\r\n                this.range[1] = this.lengths[this.N];\r\n            this.updateChart();\r\n        },\r\n        goToLastPage() {\r\n            if (this.range[1] >= this.lengths[this.N]) return;\r\n            this.range[1] = this.lengths[this.N];\r\n            this.range[0] = this.range[1] - (this.range[1] % 10);\r\n            this.updateChart();\r\n        },\r\n        updateChart() {\r\n            this.data = [];\r\n            let terms = [];\r\n            let numbers = [];\r\n            let values;\r\n            let quantile;\r\n            let datum;\r\n            // get terms for y axis\r\n            for (let i = this.range[0]; i < this.range[1]; i++)\r\n                terms.push(this.terms[i]);\r\n            // add data for each sets\r\n            this.sets.forEach(setName => {\r\n                // get all values froma set and quantile\r\n                if (this.type == 'tf') {\r\n                    values = this.$store.state.sets[setName].textStats\r\n                        .tf_normalized[this.N];\r\n                    quantile = this.$store.state.sets[setName].textStats\r\n                        .tf_quantiles[this.N][this.topPercent - 1];\r\n                } else {\r\n                    // tf-idf\r\n                    values = this.tfidfs[setName][this.N];\r\n                    quantile = this.quantiles.tfidf[setName][this.N][\r\n                        this.topPercent - 1\r\n                    ];\r\n                }\r\n                numbers = [];\r\n                let colors = [];\r\n                let line_colors = [];\r\n                // get values for each term\r\n                terms.forEach(term => {\r\n                    let item = values.find(element => element[0] == term);\r\n                    // if the term exist in the set\r\n                    let number;\r\n                    if (item !== undefined) number = item[1];\r\n                    else if (this.type == 'tf') number = 0;\r\n                    else number = NaN;\r\n                    if (number > quantile) {\r\n                        colors.push(\r\n                            chroma(this.$store.state.sets[setName].color)\r\n                                .alpha(0.7)\r\n                                .css()\r\n                        );\r\n                        line_colors.push(\r\n                            chroma(this.$store.state.sets[setName].color)\r\n                                .alpha(0)\r\n                                .css()\r\n                        );\r\n                    } else {\r\n                        colors.push(\r\n                            chroma(this.$store.state.sets[setName].color)\r\n                                .alpha(0)\r\n                                .css()\r\n                        );\r\n                        line_colors.push(\r\n                            chroma(this.$store.state.sets[setName].color)\r\n                                .alpha(1.0)\r\n                                .css()\r\n                        );\r\n                    }\r\n                    numbers.push(number);\r\n                });\r\n                // construct the marker datum\r\n                datum = {\r\n                    mode: 'markers',\r\n                    orientation: 'h',\r\n                    name: setName,\r\n                    marker: {\r\n                        color: colors,\r\n                        size: this.dotSize,\r\n                        line: {\r\n                            color: line_colors,\r\n                            width: this.dotSize * 0.1\r\n                        }\r\n                    },\r\n                    x: numbers,\r\n                    y: terms,\r\n                    hoverinfo: 'x'\r\n                };\r\n                // add halo around the marker if the set is the sorting option\r\n                if (this.sort == setName)\r\n                    this.data.push({\r\n                        mode: 'markers',\r\n                        orientation: 'h',\r\n                        name: setName + '_sort',\r\n                        marker: {\r\n                            color: 'rgba(255, 255, 255, 0.0)',\r\n                            size: this.dotSize,\r\n                            line: {\r\n                                width: this.dotSize * 0.5,\r\n                                color: chroma(\r\n                                    this.$store.state.sets[setName].color\r\n                                )\r\n                                    .alpha(0.2)\r\n                                    .css()\r\n                            }\r\n                        },\r\n                        x: numbers,\r\n                        y: terms,\r\n                        hoverinfo: 'none'\r\n                    });\r\n                // add to the chart\r\n                this.data.push(datum);\r\n            });\r\n            // add TF bar trace\r\n            values = this.tf_all[this.N];\r\n            quantile = this.quantiles.tf_all[this.N][this.topPercent - 1];\r\n            numbers = [];\r\n            let bar_colors = [];\r\n            let bar_line_colors = [];\r\n            // get values for each term\r\n            terms.forEach(term => {\r\n                // if the term exist in the set\r\n                let number = values.find(element => element[0] == term)[1];\r\n                if (number > quantile) {\r\n                    bar_colors.push(\r\n                        chroma(this.colorAll)\r\n                            .alpha(0.5)\r\n                            .css()\r\n                    );\r\n                    bar_line_colors.push(\r\n                        chroma(this.colorAll)\r\n                            .alpha(0)\r\n                            .css()\r\n                    );\r\n                } else {\r\n                    bar_colors.push(\r\n                        chroma(this.colorAll)\r\n                            .alpha(0)\r\n                            .css()\r\n                    );\r\n                    bar_line_colors.push(\r\n                        chroma(this.colorAll)\r\n                            .alpha(0.2)\r\n                            .css()\r\n                    );\r\n                }\r\n                numbers.push(number);\r\n            });\r\n            // change opacity to control the visibility\r\n            datum = {\r\n                type: 'bar',\r\n                orientation: 'h',\r\n                name: '_all',\r\n                marker: {\r\n                    color: bar_colors,\r\n                    line: {\r\n                        color: bar_line_colors,\r\n                        width: this.dotSize * 0.1\r\n                    }\r\n                },\r\n                x: numbers,\r\n                y: terms\r\n            };\r\n            if (this.type == 'tf') datum.xaxis = 'x';\r\n            else datum.xaxis = 'x2';\r\n            if (this.tfBar) {\r\n                datum.marker.opacity = 1;\r\n                datum.hoverinfo = 'x';\r\n            } else {\r\n                datum.marker.opacity = 0;\r\n                datum.hoverinfo = 'skip';\r\n            }\r\n            this.data.unshift(datum);\r\n        }\r\n    },\r\n    watch: {\r\n        update(payload) {\r\n            if (payload.type === 'delete') this.deleteSet(payload.set);\r\n            else this.addSet(payload.set);\r\n        },\r\n        resizeInfo(height) {\r\n            let childPos = document.getElementById(this.chartContainerId)\r\n                .offsetTop;\r\n            let parentPos = document.getElementById(this.chartContainerId)\r\n                .parentElement.offsetTop;\r\n            let offset = childPos - parentPos;\r\n            document.getElementById(this.chartContainerId).style.height =\r\n                height - offset + 'px';\r\n        },\r\n        N() {\r\n            this.range = [0, 10];\r\n            // reorder the terms\r\n            this.reorderTerms();\r\n            this.updateChart();\r\n        },\r\n        topPercent() {\r\n            this.updateChart();\r\n        },\r\n        type(type) {\r\n            if (type == 'tfidf') {\r\n                // change the sorting option to the first set when the current on is '_all'\r\n                if (this.sortIndex == 0) this.sortIndex = 1;\r\n                this.data[0].xaxis = 'x2';\r\n            } else {\r\n                this.data[0].xaxis = 'x';\r\n            }\r\n            //change the slider plot\r\n            this.slider_data = [];\r\n            this.sets.forEach(setName => {\r\n                let y;\r\n                if (type == 'tf')\r\n                    y = this.$store.state.sets[setName].textStats\r\n                        .tf_quantiles_hist[this.N];\r\n                else y = this.quantiles_hist_tfidf[setName][this.N];\r\n                this.slider_data.push({\r\n                    type: 'bar',\r\n                    name: setName,\r\n                    x: this.topPercents,\r\n                    y: y,\r\n                    marker: {\r\n                        color: this.$store.state.sets[setName].color,\r\n                        opacity: 0.5\r\n                    }\r\n                });\r\n            });\r\n            // reset the range\r\n            this.range = [0, 10];\r\n            // reorder the terms\r\n            this.reorderTerms();\r\n            this.updateChart();\r\n        },\r\n        sortIndex() {\r\n            if (this.sets.length > 0) {\r\n                // reorder the terms\r\n                this.reorderTerms();\r\n                this.updateChart();\r\n            }\r\n        },\r\n        tfBar(value) {\r\n            // add tf bar\r\n            if (value) {\r\n                this.data[0].marker.opacity = 1;\r\n                // disable hover\r\n                this.data[0].hoverinfo = 'x';\r\n                // remove the tf bar\r\n            } else {\r\n                this.data[0].marker.opacity = 0;\r\n                // enable hover\r\n                this.data[0].hoverinfo = 'skip';\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.js-plotly-plot,\r\n.plot-container {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NGramFrequency.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NGramFrequency.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NGramFrequency.vue?vue&type=template&id=211036ea&scoped=true&\"\nimport script from \"./NGramFrequency.vue?vue&type=script&lang=js&\"\nexport * from \"./NGramFrequency.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NGramFrequency.vue?vue&type=style&index=0&id=211036ea&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"211036ea\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',{staticClass:\"d-flex flex-column ma-0 pa-0\"},[_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sets.length != 0),expression:\"sets.length != 0\"}],staticClass:\"flex-grow-0 flex-shrink-0 mx-10 pa-0\",staticStyle:{\"font-family\":\"'Varela Round', sans-serif\"},attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-select',{attrs:{\"items\":_vm.axes,\"label\":\"Choose Axes\",\"chips\":\"\",\"deletable-chips\":\"\",\"multiple\":\"\"},scopedSlots:_vm._u([{key:\"prepend-item\",fn:function(){return [_c('v-list-item',{attrs:{\"ripple\":\"\"},on:{\"click\":_vm.toggle}},[_c('v-list-item-action',[_c('v-icon',{attrs:{\"color\":_vm.selectedAxes.length > 0 ? 'indigo darken-4' : ''}},[_vm._v(_vm._s(_vm.icon))])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Select All\")])],1)],1),_c('v-divider',{staticClass:\"mt-2\"})]},proxy:true},{key:\"append-item\",fn:function(){return undefined},proxy:true}]),model:{value:(_vm.selectedAxes),callback:function ($$v) {_vm.selectedAxes=$$v},expression:\"selectedAxes\"}})],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sets.length != 0),expression:\"sets.length != 0\"}],staticClass:\"flex-grow-1 ma-0 pa-0\",attrs:{\"id\":_vm.chartContainerId}},[_c('Plotly',{attrs:{\"id\":_vm.chartId,\"data\":_vm.data,\"layout\":_vm.layout,\"display-mode-bar\":false}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n\r\n\r\n\r\n<template>\r\n    <v-col class=\"d-flex flex-column ma-0 pa-0\">\r\n        <v-row\r\n            v-show=\"sets.length != 0\"\r\n            class=\"flex-grow-0 flex-shrink-0 mx-10 pa-0\"\r\n            align=\"center\"\r\n            justify=\"center\"\r\n            style=\"font-family: 'Varela Round', sans-serif;\"\r\n        >\r\n            <v-select\r\n                v-model=\"selectedAxes\"\r\n                :items=\"axes\"\r\n                label=\"Choose Axes\"\r\n                chips\r\n                deletable-chips\r\n                multiple\r\n            >\r\n                <template v-slot:prepend-item>\r\n                    <v-list-item ripple @click=\"toggle\">\r\n                        <v-list-item-action>\r\n                            <v-icon\r\n                                :color=\"selectedAxes.length > 0 ? 'indigo darken-4' : ''\"\r\n                            >{{ icon }}</v-icon>\r\n                        </v-list-item-action>\r\n                        <v-list-item-content>\r\n                            <v-list-item-title>Select All</v-list-item-title>\r\n                        </v-list-item-content>\r\n                    </v-list-item>\r\n                    <v-divider class=\"mt-2\"></v-divider>\r\n                </template>\r\n                <template v-slot:append-item></template>\r\n            </v-select>\r\n        </v-row>\r\n        <v-row v-show=\"sets.length != 0\" class=\"flex-grow-1 ma-0 pa-0\" :id=\"chartContainerId\">\r\n            <Plotly :id=\"chartId\" :data=\"data\" :layout=\"layout\" :display-mode-bar=\"false\"></Plotly>\r\n        </v-row>\r\n    </v-col>\r\n</template>\r\n\r\n<script>\r\nimport { Plotly } from 'vue-plotly';\r\nimport * as _ from 'underscore';\r\n\r\nexport default {\r\n\tname: 'SingleMetrics',\r\n\tcomponents: {\r\n\t\tPlotly\r\n\t},\r\n\tprops: [\r\n\t\t'chartId',\r\n\t\t'sets',\r\n\t\t'selected',\r\n\t\t'selectionMode',\r\n\t\t'update',\r\n\t\t'resizeInfo'\r\n\t],\r\n\tdata: function() {\r\n\t\treturn {\r\n\t\t\t// chart variables\r\n\t\t\tdata: [],\r\n\t\t\tcolor: [],\r\n\t\t\tcolorscale: [],\r\n\t\t\tcmin: 1,\r\n\t\t\tsetNames: [],\r\n\t\t\taxes: [\r\n\t\t\t\t'set',\r\n\t\t\t\t'avg num words',\r\n\t\t\t\t'avg word len',\r\n\t\t\t\t'avg text len',\r\n\t\t\t\t'TTR',\r\n\t\t\t\t'tweet count',\r\n\t\t\t\t'user count',\r\n\t\t\t\t'mean ED',\r\n\t\t\t\t'median ED',\r\n\t\t\t\t'acc:country',\r\n\t\t\t\t'acc',\r\n\t\t\t\t'acc@161'\r\n\t\t\t],\r\n\t\t\tselectedAxes: [\r\n\t\t\t\t'set',\r\n\t\t\t\t'avg num words',\r\n\t\t\t\t'avg word len',\r\n\t\t\t\t'avg text len',\r\n\t\t\t\t'TTR',\r\n\t\t\t\t'tweet count',\r\n\t\t\t\t'user count',\r\n\t\t\t\t'mean ED',\r\n\t\t\t\t'median ED',\r\n\t\t\t\t'acc:country',\r\n\t\t\t\t'acc',\r\n\t\t\t\t'acc@161'\r\n\t\t\t],\r\n\t\t\tdimensions: [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'set',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'avg num words',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'avg word len',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'avg text len',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'TTR',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'tweet count',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'user count',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'mean ED',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'median ED',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'acc:country',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'acc',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'acc@161',\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t\tvisible: true\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlayout: {\r\n\t\t\t\tmargin: {\r\n\t\t\t\t\tl: 80,\r\n\t\t\t\t\tr: 80,\r\n\t\t\t\t\tb: 50,\r\n\t\t\t\t\tt: 60,\r\n\t\t\t\t\tpad: 0\r\n\t\t\t\t},\r\n\t\t\t\tfont: {\r\n\t\t\t\t\tfamily: 'Varela Round',\r\n\t\t\t\t\tsize: 14,\r\n\t\t\t\t\tcolor: '#7f7f7f'\r\n\t\t\t\t}\r\n\t\t\t\t// hovermode: 'closest'\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tchartContainerId() {\r\n\t\t\treturn 'container-' + this.chartId;\r\n\t\t},\r\n\t\tselectedAll() {\r\n\t\t\treturn this.selectedAxes.length === this.axes.length;\r\n\t\t},\r\n\t\tselectedSome() {\r\n\t\t\treturn this.selectedAxes.length > 0 && !this.selectedAll;\r\n\t\t},\r\n\t\ticon() {\r\n\t\t\tif (this.likesAllFruit) return 'mdi-close-box';\r\n\t\t\tif (this.likesSomeFruit) return 'mdi-minus-box';\r\n\t\t\treturn 'mdi-checkbox-blank-outline';\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\ttoggle() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (this.selectedAll) {\r\n\t\t\t\t\tthis.selectedAxes = [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.selectedAxes = this.axes.slice();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\taddSet(setName) {\r\n\t\t\tthis.color.push(this.sets.length);\r\n\t\t\tthis.setNames.push(setName);\r\n\t\t\t// add metric values to the chart\r\n\t\t\tlet metrics = this.$store.state.sets[setName].metrics;\r\n\t\t\tObject.keys(metrics).forEach(metric => {\r\n\t\t\t\tlet index = _.findIndex(this.dimensions, {\r\n\t\t\t\t\tlabel: metric\r\n\t\t\t\t});\r\n\t\t\t\tlet value = metrics[metric];\r\n\t\t\t\t// if (value > this.data[0].dimensions[index].range[1])\r\n\t\t\t\t// \trange[1] = value;\r\n\t\t\t\t// if (value < this.data[0].dimensions[index].range[1])\r\n\t\t\t\t// \trange[0] = value;\r\n\t\t\t\tthis.dimensions[index].values.push(value);\r\n\t\t\t});\r\n\t\t\t// only set\r\n\t\t\tif (this.sets.length == 1)\r\n\t\t\t\tthis.data.push({\r\n\t\t\t\t\ttype: 'parcoords',\r\n\t\t\t\t\tline: {\r\n\t\t\t\t\t\tcmin: this.cmin\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlabelfont: {\r\n\t\t\t\t\t\tsize: 14,\r\n\t\t\t\t\t\tcolor: 'black'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tthis.updateChart();\r\n\t\t},\r\n\t\tdeleteSet(setName) {\r\n\t\t\tthis.color.pop();\r\n\t\t\tlet index = this.setNames.indexOf(setName);\r\n\t\t\tthis.dimensions.forEach((dimension, i) => {\r\n\t\t\t\tthis.dimensions[i].values.splice(index, 1);\r\n\t\t\t});\r\n\t\t\tthis.setNames.splice(index, 1);\r\n\t\t\tif (this.sets.length == 0) this.data = [];\r\n\t\t\telse this.updateChart();\r\n\t\t},\r\n\t\tupdateChart() {\r\n\t\t\tthis.colorscale = [];\r\n\t\t\tif (this.sets.length == 1) {\r\n\t\t\t\tthis.colorscale.push([\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tthis.$store.state.sets[this.sets[0]].color\r\n\t\t\t\t]);\r\n\t\t\t\tthis.colorscale.push([\r\n\t\t\t\t\t1,\r\n\t\t\t\t\tthis.$store.state.sets[this.sets[0]].color\r\n\t\t\t\t]);\r\n\t\t\t} else {\r\n\t\t\t\tthis.sets.forEach((set, i) => {\r\n\t\t\t\t\tlet scale = (i * 1) / (this.sets.length - 1);\r\n\t\t\t\t\tthis.colorscale.push([\r\n\t\t\t\t\t\tscale,\r\n\t\t\t\t\t\tthis.$store.state.sets[set].color\r\n\t\t\t\t\t]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.dimensions[0].ticktext = this.setNames;\r\n\t\t\tthis.dimensions[0].values = [];\r\n\t\t\tthis.setNames.forEach((name, i) => {\r\n\t\t\t\tthis.dimensions[0].values.push(i);\r\n\t\t\t});\r\n\t\t\tthis.dimensions.forEach((dimension, i) => {\r\n\t\t\t\tthis.dimensions[i].tickvals = _.uniq(dimension.values);\r\n\t\t\t});\r\n\r\n\t\t\tthis.data[0].line.color = this.color;\r\n\t\t\tthis.data[0].line.colorscale = this.colorscale;\r\n\t\t\tthis.data[0].line.cmax = this.sets.length;\r\n\t\t\tthis.data[0].dimensions = this.dimensions;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tupdate(payload) {\r\n\t\t\tif (payload.type === 'delete') this.deleteSet(payload.set);\r\n\t\t\telse this.addSet(payload.set);\r\n\t\t},\r\n\t\tresizeInfo(height) {\r\n\t\t\tlet childPos = document.getElementById(this.chartContainerId)\r\n\t\t\t\t.offsetTop;\r\n\t\t\tlet parentPos = document.getElementById(this.chartContainerId)\r\n\t\t\t\t.parentElement.offsetTop;\r\n\t\t\tlet offset = childPos - parentPos;\r\n\t\t\tdocument.getElementById(this.chartContainerId).style.height =\r\n\t\t\t\theight - offset + 'px';\r\n\t\t},\r\n\t\tselectedAxes(axes) {\r\n\t\t\tthis.dimensions.forEach((dimension, i) => {\r\n\t\t\t\tif (axes.includes(dimension.label))\r\n\t\t\t\t\tthis.dimensions[i].visible = true;\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.dimensions[i].visible = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (this.data.length == 1)\r\n\t\t\t\tthis.data[0].dimensions = this.dimensions;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.js-plotly-plot,\r\n.plot-container {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMetrics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMetrics.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SingleMetrics.vue?vue&type=template&id=2afc27e5&scoped=true&\"\nimport script from \"./SingleMetrics.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleMetrics.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SingleMetrics.vue?vue&type=style&index=0&id=2afc27e5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2afc27e5\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <v-card flat light @dragover=\"allowDrop\" @drop=\"addSetToWidget\" :id=\"widgetId\" class=\"widget\">\r\n        <v-card-title class=\"ma-0 px-4 pt-2\">\r\n            <span\r\n                class=\"viz-title\"\r\n                v-bind:style=\"titleColor\"\r\n            >{{ $store.state.widgets[widget].type }}</span>\r\n            <v-spacer></v-spacer>\r\n            <div class=\"float-right\">\r\n                <v-avatar\r\n                    v-for=\"(set, idx) in sets\"\r\n                    :color=\"getSetColor(set)\"\r\n                    :key=\"idx\"\r\n                    size=\"16\"\r\n                    class=\"ma-1\"\r\n                    draggable\r\n                    @dragstart=\"dragStart(set, $event)\"\r\n                    style=\"cursor: pointer\"\r\n                >\r\n                    <v-icon\r\n                        v-if=\"$store.state.editMode\"\r\n                        @click=\"delSetFromWidget(set)\"\r\n                        color=\"white\"\r\n                        x-small\r\n                    >fa-times</v-icon>\r\n                </v-avatar>\r\n            </div>\r\n        </v-card-title>\r\n        <component\r\n            :is=\"component\"\r\n            :id=\"componentId\"\r\n            :chartId=\"chartId\"\r\n            :selected=\"selected\"\r\n            :sets=\"sets\"\r\n            :class=\"containerClass\"\r\n            :selectionMode=\"selectionMode\"\r\n            :update=\"update\"\r\n            :resizeInfo=\"resizeInfo\"\r\n            :componentId=\"componentId\"\r\n        />\r\n    </v-card>\r\n</template>\r\n\r\n<script>\r\nimport MapVerOne from '@/components/widgets/MapVerOne';\r\nimport OldMap from '@/components/widgets/OldMap';\r\nimport Map from '@/components/widgets/Map';\r\nimport ErrorDistance from '@/components/widgets/ErrorDistance';\r\nimport OriginCountries from '@/components/widgets/OriginCountries';\r\nimport LocatedCountries from '@/components/widgets/LocatedCountries';\r\nimport TextLength from '@/components/widgets/TextLength';\r\nimport NGramFrequency from '@/components/widgets/NGramFrequency';\r\nimport SingleMetrics from '@/components/widgets/SingleMetrics';\r\n\r\nexport default {\r\n    name: 'VizWidget',\r\n    props: ['widget', 'editable', 'resized'],\r\n    components: {\r\n        MapVerOne,\r\n        OldMap,\r\n        Map,\r\n        ErrorDistance,\r\n        OriginCountries,\r\n        LocatedCountries,\r\n        TextLength,\r\n        NGramFrequency,\r\n        SingleMetrics\r\n    },\r\n    data() {\r\n        return {\r\n            resizeInfo: null\r\n        };\r\n    },\r\n    computed: {\r\n        update() {\r\n            return this.$store.state.widgets[this.widget].update;\r\n        },\r\n        chartId() {\r\n            return 'chart' + this.widget;\r\n        },\r\n        component() {\r\n            // removing white spaces\r\n            let fileName = this.$store.state.widgets[this.widget].type\r\n                .replace(/\\s+/g, '')\r\n                .replace('-', '');\r\n            return fileName;\r\n        },\r\n        containerClass() {\r\n            if (this.component == 'Map') return 'map-container';\r\n            if (this.component == 'OldMap') return 'map-container';\r\n            if (this.component == 'MapVerOne') return 'map-container';\r\n            else return 'component-container';\r\n        },\r\n        componentId() {\r\n            return 'component-' + this.widget;\r\n        },\r\n        sets() {\r\n            return this.$store.state.widgets[this.widget].sets;\r\n        },\r\n        titleColor() {\r\n            if (this.$store.state.widgets[this.widget].type == 'OldMap')\r\n                return { color: 'white' };\r\n            if (this.$store.state.widgets[this.widget].type == 'Map')\r\n                return { color: 'white' };\r\n            if (this.$store.state.widgets[this.widget].type == 'MapVerOne')\r\n                return { color: 'white' };\r\n            else return { color: 'black' };\r\n        },\r\n        selectionMode() {\r\n            return this.$store.state.selectionMode;\r\n        },\r\n        selected() {\r\n            return this.$store.state.selected;\r\n        },\r\n        widgetId() {\r\n            return 'widget' + this.widget;\r\n        }\r\n    },\r\n    methods: {\r\n        dragStart(set, e) {\r\n            e.dataTransfer.setData('set', set);\r\n        },\r\n        delSetFromWidget(set) {\r\n            this.$store.commit('delSetFromWidget', {\r\n                widget: this.widget,\r\n                set: set\r\n            });\r\n        },\r\n        addSetToWidget(e) {\r\n            event.preventDefault();\r\n            let payload = {\r\n                set: e.dataTransfer.getData('set'),\r\n                widget: this.widget\r\n            };\r\n            this.$store.commit('addSetToWidget', payload);\r\n        },\r\n        allowDrop(event) {\r\n            event.preventDefault();\r\n        },\r\n        getSetColor(set) {\r\n            return this.$store.state.sets[set].color;\r\n        },\r\n        addToSelection(member) {\r\n            this.$store.commit('addToSelection', member);\r\n        }\r\n    },\r\n    watch: {\r\n        // needed because chart libs I'm using are not reducing heights automatically\r\n        resized(payload) {\r\n            if (payload.widget == this.widget) {\r\n                let childPos = document.getElementById(this.componentId)\r\n                    .offsetTop;\r\n                let parentPos = document.getElementById(this.componentId)\r\n                    .parentElement.offsetTop;\r\n                let offset = childPos - parentPos;\r\n                this.resizeInfo = payload.height - offset;\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.viz-title {\r\n    font-family: 'Montserrat', sans-serif;\r\n    font-weight: 600;\r\n    font-size: 18px !important;\r\n}\r\n\r\n// added because the these have to be on top of the map\r\n.viz-title,\r\n.v-avatar {\r\n    z-index: 100;\r\n}\r\n\r\n// map takes up all the cell space\r\n.map-container {\r\n    position: absolute;\r\n    top: 0;\r\n    overflow: hidden;\r\n}\r\n\r\n.widget {\r\n    display: flex;\r\n    flex-flow: column;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VizWidget.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VizWidget.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VizWidget.vue?vue&type=template&id=a146e334&scoped=true&\"\nimport script from \"./VizWidget.vue?vue&type=script&lang=js&\"\nexport * from \"./VizWidget.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VizWidget.vue?vue&type=style&index=0&id=a146e334&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a146e334\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <grid-layout\r\n        :layout.sync=\"gridLayout\"\r\n        :col-num=\"12\"\r\n        :row-height=\"100\"\r\n        :is-draggable=\"isDraggable\"\r\n        :is-resizable=\"isResizable\"\r\n        :is-mirrored=\"false\"\r\n        :vertical-compact=\"true\"\r\n        :margin=\"[10, 10]\"\r\n        :use-css-transforms=\"true\"\r\n    >\r\n        <grid-item\r\n            v-for=\"item in gridLayout\"\r\n            :x=\"item.x\"\r\n            :y=\"item.y\"\r\n            :w=\"item.w\"\r\n            :h=\"item.h\"\r\n            :i=\"item.i\"\r\n            :key=\"item.i\"\r\n            @resized=\"onResized\"\r\n        >\r\n            <viz-widget :widget=\"item.widget\" :editable=\"isEditable\" :resized=\"resized\"></viz-widget>\r\n        </grid-item>\r\n    </grid-layout>\r\n</template>\r\n\r\n<script>\r\nimport VueGridLayout from 'vue-grid-layout';\r\nimport VizWidget from './VizWidget.vue';\r\nimport { mapState } from 'vuex';\r\n\r\nexport default {\r\n    name: 'VizGrid',\r\n\r\n    components: {\r\n        GridLayout: VueGridLayout.GridLayout,\r\n        GridItem: VueGridLayout.GridItem,\r\n        VizWidget\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            resized: null\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        onResized(i, newH, newW, newHPx, newWPx) {\r\n            this.resized = {\r\n                widget: i,\r\n                height: newHPx,\r\n                width: newWPx\r\n            }\r\n        }\r\n    },\r\n\r\n    computed: mapState({\r\n        isDraggable: state => state.editMode,\r\n        isResizable: state => state.editMode,\r\n        isEditable: state => state.editMode,\r\n        gridLayout: state => state.gridLayout\r\n    })\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VizGrid.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VizGrid.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VizGrid.vue?vue&type=template&id=d9f1c11c&scoped=true&\"\nimport script from \"./VizGrid.vue?vue&type=script&lang=js&\"\nexport * from \"./VizGrid.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d9f1c11c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"home\">\r\n        <v-app :style=\"{ background: $vuetify.theme.themes[isDark].background }\">\r\n            <v-container fluid class=\"ma-0 pa-0\" app>\r\n                <v-row class=\"mx-10 mt-4 pa-0\">\r\n                    <control-bar></control-bar>\r\n                </v-row>\r\n                <v-row class=\"mx-10 mt-2 pa-0\">\r\n                    <set-bar></set-bar>\r\n                </v-row>\r\n                <v-sheet class=\"mx-7 mt-2 pa-0\" light color=\"background\">\r\n                    <viz-grid></viz-grid>\r\n                </v-sheet>\r\n            </v-container>\r\n\r\n            <v-dialog v-model=\"dialog\" persistent max-width=\"300px\">\r\n                <v-card>\r\n                    <v-card-text class=\"pt-5 pb-0\">\r\n                        <v-text-field v-model=\"setName\" label=\"Enter the set name\" required></v-text-field>\r\n                    </v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn color=\"blue darken-1\" text @click=\"cancelAddSet\">Cancel</v-btn>\r\n                        <v-btn color=\"blue darken-1\" text @click=\"addSet\">Add</v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n        </v-app>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport ControlBar from '@/components/ControlBar.vue';\r\nimport SetBar from '@/components/SetBar.vue';\r\nimport VizGrid from '@/components/VizGrid.vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n\tname: 'home',\r\n\tcomponents: {\r\n\t\tControlBar,\r\n\t\tSetBar,\r\n\t\tVizGrid\r\n\t},\r\n\t// style binding needed to force background color applied from vuetify.js\r\n\tcomputed: {\r\n\t\tisDark() {\r\n\t\t\treturn this.$vuetify.theme.dark ? 'dark' : 'light';\r\n\t\t},\r\n\t\tdirectSetSelectionSignal() {\r\n\t\t\treturn this.$store.state.directSetSelectionSignal;\r\n\t\t}\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdialog: false,\r\n\t\t\tsetName: ''\r\n\t\t};\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tgetTweets() {\r\n\t\t\tconst path = 'http://localhost:3000/init';\r\n\t\t\taxios\r\n\t\t\t\t.get(path)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tdata.forEach(datum => {\r\n\t\t\t\t\t\tthis.$store.commit('dataReceived', datum);\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tonKeyDown(e) {\r\n\t\t\t// If the ESC key is pressed in a selection mode\r\n\t\t\tif (e.keyCode === 27 && this.$store.state.selectionMode) {\r\n\t\t\t\tthis.$store.commit('resetSelection');\r\n\t\t\t} // selection mode toggling\r\n\t\t\telse if (e.keyCode === 16 && !this.dialog) {\r\n\t\t\t\tif (!this.$store.state.selectionMode)\r\n\t\t\t\t\tthis.$store.commit('toggleSelectionMode');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyUp(e) {\r\n\t\t\t// selection mode toggling\r\n\t\t\tif (e.keyCode === 16 && !this.dialog) {\r\n\t\t\t\tif (this.$store.state.selectionMode) {\r\n\t\t\t\t\tthis.$store.commit('toggleSelectionMode');\r\n\t\t\t\t\tif (this.$store.state.selected.length > 0)\r\n\t\t\t\t\t\tthis.dialog = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdirectSetSelection() {\r\n\t\t\tif (!this.dialog)\r\n\t\t\t\tif (this.$store.state.selected.length > 0) this.dialog = true;\r\n\t\t\tthis.$store.commit('updateDirectSetSelectionSignal', false);\r\n\t\t},\r\n\t\taddSet() {\r\n\t\t\tif (this.setName !== '') {\r\n\t\t\t\tlet payload = {\r\n\t\t\t\t\tname: this.setName,\r\n\t\t\t\t\tmembers: this.$store.state.selected\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(payload)\r\n\t\t\t\tthis.$store.commit('addSet', payload);\r\n\r\n\t\t\t\tthis.dialog = false;\r\n\t\t\t\tthis.$store.commit('resetSelection');\r\n\t\t\t}\r\n\t\t},\r\n\t\tcancelAddSet() {\r\n\t\t\tthis.dialog = false;\r\n\t\t\tthis.$store.commit('resetSelection');\r\n\t\t}\r\n\t},\r\n\r\n\tcreated() {\r\n\t\tthis.getTweets();\r\n\t\tdocument.addEventListener('keydown', this.onKeyDown);\r\n\t\tdocument.addEventListener('keyup', this.onKeyUp);\r\n\t},\r\n\r\n\twatch: {\r\n\t\tdialog() {\r\n\t\t\tthis.setName = '';\r\n\t\t},\r\n\t\tdirectSetSelectionSignal(value) {\r\n\t\t\tconsole.log(\"happening\")\r\n\t\t\tif (value) this.directSetSelection();\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=13aadbe5&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13aadbe5\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport VueRouter from 'vue-router';\r\nimport Home from '../views/Home.vue';\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n    {\r\n        path: '/',\r\n        name: 'home',\r\n        component: Home\r\n    },\r\n    {\r\n        path: '/about',\r\n        name: 'about',\r\n        // route level code-splitting\r\n        // this generates a separate chunk (about.[hash].js) for this route\r\n        // which is lazy-loaded when the route is visited.\r\n        component: () =>\r\n            import(/* webpackChunkName: \"about\" */ '../views/About.vue')\r\n    }\r\n];\r\n\r\nconst router = new VueRouter({\r\n    mode: 'history',\r\n    base: process.env.BASE_URL,\r\n    routes\r\n});\r\n\r\nexport default router;\r\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport * as turf from '@turf/turf';\r\nimport chroma from 'chroma-js';\r\nimport * as _ from 'underscore';\r\nimport { quantile, mean, median } from 'simple-statistics';\r\n\r\nVue.use(Vuex);\r\n\r\nfunction getCountryStats(state, members) {\r\n    let origins = {};\r\n    members.forEach(member => {\r\n        let origin = state.data[member.type][member.idx].place.country_code;\r\n        let located =\r\n            state.data[member.type][member.idx].predicted.country_code;\r\n        if (!origins.hasOwnProperty(origin)) origins[origin] = {};\r\n        if (!origins[origin].hasOwnProperty(located))\r\n            origins[origin][located] = {\r\n                count: 1,\r\n                members: [member]\r\n            };\r\n        else {\r\n            origins[origin][located].count++;\r\n            origins[origin][located].members.push(member);\r\n        }\r\n    });\r\n\r\n    // flattening\r\n    let connections = [];\r\n    let min = Infinity;\r\n    let max = 0;\r\n    Object.keys(origins).forEach(origin => {\r\n        Object.keys(origins[origin]).forEach(located => {\r\n            // exclude when origin and located are the same\r\n            if (origin != located) {\r\n                let count = origins[origin][located].count;\r\n                if (count < min) min = count;\r\n                if (count > max) max = count;\r\n                connections.push({\r\n                    origin: origin,\r\n                    located: located,\r\n                    count: count,\r\n                    members: origins[origin][located].members\r\n                });\r\n            }\r\n        });\r\n    });\r\n    return { connections: connections, min: min, max: max };\r\n}\r\n\r\nfunction getTextStats(state, members) {\r\n    let unigrams = {};\r\n    let bigrams = {};\r\n    let trigrams = {};\r\n    let n_unigrams = 0;\r\n    let n_bigrams = 0;\r\n    let n_trigrams = 0;\r\n    members.forEach(member => {\r\n        let ngrams = state.data[member.type][member.idx].grams;\r\n        Object.keys(ngrams).forEach(n => {\r\n            ngrams[n].forEach(gram => {\r\n                if (n == 1) {\r\n                    if (unigrams.hasOwnProperty(gram)) unigrams[gram]++;\r\n                    else unigrams[gram] = 1;\r\n                    n_unigrams++;\r\n                } else if (n == 2) {\r\n                    let token = gram[0] + '_' + gram[1];\r\n                    if (bigrams.hasOwnProperty(token)) bigrams[token]++;\r\n                    else bigrams[token] = 1;\r\n                    n_bigrams++;\r\n                } else {\r\n                    let token = gram[0] + '_' + gram[1] + '_' + gram[2];\r\n                    if (trigrams.hasOwnProperty(token)) trigrams[token]++;\r\n                    else trigrams[token] = 1;\r\n                    n_trigrams++;\r\n                }\r\n            });\r\n        });\r\n    });\r\n    // normalize\r\n    let unigrams_arr = [];\r\n    Object.keys(unigrams).forEach(gram => {\r\n        unigrams_arr.push([gram, unigrams[gram] / n_unigrams]);\r\n    });\r\n    unigrams_arr.sort(function(first, second) {\r\n        return second[1] - first[1];\r\n    });\r\n    let bigrams_arr = [];\r\n    Object.keys(bigrams).forEach(gram => {\r\n        bigrams_arr.push([gram, bigrams[gram] / n_bigrams]);\r\n    });\r\n    // sort\r\n    bigrams_arr.sort(function(first, second) {\r\n        return second[1] - first[1];\r\n    });\r\n    let trigrams_arr = [];\r\n    Object.keys(trigrams).forEach(gram => {\r\n        trigrams_arr.push([gram, trigrams[gram] / n_trigrams]);\r\n    });\r\n    trigrams_arr.sort(function(first, second) {\r\n        return second[1] - first[1];\r\n    });\r\n    // get quantiles from 1 to 99%\r\n    let uniq_unigram = _.uniq(unigrams_arr.map(x => x[1]));\r\n    let uniq_bigram = _.uniq(bigrams_arr.map(x => x[1]));\r\n    let uniq_trigram = _.uniq(trigrams_arr.map(x => x[1]));\r\n    let quantiles_unigram = [];\r\n    let quantiles_bigram = [];\r\n    let quantiles_trigram = [];\r\n    // histogram for each block of quantiles\r\n    let quantiles_unigram_hist = [];\r\n    let quantiles_bigram_hist = [];\r\n    let quantiles_trigram_hist = [];\r\n    let quantile_value;\r\n    let hist_count;\r\n    for (let i = 1; i < 100; i++) {\r\n        quantile_value = quantile(uniq_unigram, 1 - i / 100);\r\n        quantiles_unigram.push(quantile_value);\r\n        hist_count = 0;\r\n        unigrams_arr.forEach(item => {\r\n            if (i == 1 && item[1] > quantile_value) hist_count++;\r\n            else if (\r\n                i > 1 &&\r\n                item[1] > quantile_value &&\r\n                item[1] <= quantiles_unigram[i - 2]\r\n            )\r\n                hist_count++;\r\n            else return;\r\n        });\r\n        quantiles_unigram_hist.push(hist_count);\r\n        quantile_value = quantile(uniq_bigram, 1 - i / 100);\r\n        quantiles_bigram.push(quantile_value);\r\n        hist_count = 0;\r\n        bigrams_arr.forEach(item => {\r\n            if (i == 1 && item[1] > quantile_value) hist_count++;\r\n            else if (\r\n                i > 1 &&\r\n                item[1] > quantile_value &&\r\n                item[1] <= quantiles_bigram[i - 2]\r\n            )\r\n                hist_count++;\r\n            else return;\r\n        });\r\n        quantiles_bigram_hist.push(hist_count);\r\n        quantile_value = quantile(uniq_trigram, 1 - i / 100);\r\n        quantiles_trigram.push(quantile_value);\r\n        hist_count = 0;\r\n        trigrams_arr.forEach(item => {\r\n            if (i == 1 && item[1] > quantile_value) hist_count++;\r\n            else if (\r\n                i > 1 &&\r\n                item[1] > quantile_value &&\r\n                item[1] <= quantiles_trigram[i - 2]\r\n            )\r\n                hist_count++;\r\n            else return;\r\n        });\r\n        quantiles_trigram_hist.push(hist_count);\r\n    }\r\n    // get the last element of the histogram array\r\n    hist_count = 0;\r\n    unigrams_arr.forEach(item => {\r\n        if (item[1] <= quantiles_unigram[98]) hist_count++;\r\n    });\r\n    quantiles_unigram_hist.push(hist_count);\r\n    hist_count = 0;\r\n    bigrams_arr.forEach(item => {\r\n        if (item[1] <= quantiles_bigram[98]) hist_count++;\r\n    });\r\n    quantiles_bigram_hist.push(hist_count);\r\n    hist_count = 0;\r\n    trigrams_arr.forEach(item => {\r\n        if (item[1] <= quantiles_trigram[98]) hist_count++;\r\n    });\r\n    quantiles_trigram_hist.push(hist_count);\r\n    return {\r\n        tf: { 1: unigrams, 2: bigrams, 3: trigrams },\r\n        tf_quantiles: {\r\n            1: quantiles_unigram,\r\n            2: quantiles_bigram,\r\n            3: quantiles_trigram\r\n        },\r\n        tf_quantiles_hist: {\r\n            1: quantiles_unigram_hist,\r\n            2: quantiles_bigram_hist,\r\n            4: quantiles_trigram_hist\r\n        },\r\n        tf_normalized: { 1: unigrams_arr, 2: bigrams_arr, 3: trigrams_arr },\r\n        count: { 1: n_unigrams, 2: n_bigrams, 3: n_trigrams }\r\n    };\r\n}\r\n\r\nfunction getMetrics(state, members, textStats) {\r\n    let result = {};\r\n    let totalNumWords = 0;\r\n    let totalNumLetters = 0;\r\n    let totalTextLen = 0;\r\n    let users = {};\r\n    let dists = [];\r\n    let acc_country = 0;\r\n    let acc = 0;\r\n    let accD = 0;\r\n\r\n    // text statistics\r\n    members.forEach(member => {\r\n        let grams = state.data[member.type][member.idx].grams[1];\r\n        let text = state.data[member.type][member.idx].text;\r\n        let user = state.data[member.type][member.idx].user.id;\r\n        if (!users.hasOwnProperty(user)) users[user] = true;\r\n        let words = text.split(' ');\r\n        let wordLength = 0;\r\n        words.forEach(word => {\r\n            wordLength += word.length;\r\n        });\r\n        let avgWordLength = wordLength / words.length;\r\n        totalNumWords += grams.length;\r\n        totalNumLetters += avgWordLength;\r\n        totalTextLen += text.length;\r\n        // evaluation metrics\r\n        dists.push(state.data[member.type][member.idx].dist);\r\n        if (state.data[member.type][member.idx].dist <= 161) accD++;\r\n        if (\r\n            state.data[member.type][member.idx].place.country_code.toLowerCase() ==\r\n            state.data[member.type][member.idx].predicted.country_code.toLowerCase()\r\n        )\r\n            acc_country++;\r\n        if (\r\n            state.data[member.type][member.idx].place.full_name.toLowerCase().replace(' ', '').replace(',', '') ==\r\n            state.data[member.type][member.idx].predicted.name.toLowerCase().replace(' ', '').replace(',', '')\r\n        )\r\n            acc++;\r\n    });\r\n    let ttr = textStats.tf_quantiles[1].length / textStats.count[1];\r\n    result['avg num words'] = Number.parseFloat(\r\n        (totalNumWords / members.length).toFixed(3)\r\n    );\r\n    result['avg word len'] = Number.parseFloat(\r\n        (totalNumLetters / members.length).toFixed(3)\r\n    );\r\n    result['avg text len'] = Number.parseFloat(\r\n        (totalTextLen / members.length).toFixed(3)\r\n    );\r\n    result['TTR'] = Number.parseFloat(ttr.toFixed(3));\r\n\r\n    // evaluation metrics\r\n    result['mean ED'] = Number.parseFloat(mean(dists).toFixed(3));\r\n    result['median ED'] = Number.parseFloat(median(dists).toFixed(3));\r\n    result['acc:country'] = Number.parseFloat(\r\n        (acc_country / members.length).toFixed(3)\r\n    );\r\n    result['acc'] = Number.parseFloat((acc / members.length).toFixed(3));\r\n    result['acc@161'] = Number.parseFloat((accD / members.length).toFixed(3));\r\n\r\n    // twitter stats\r\n    result['tweet count'] = members.length;\r\n    result['user count'] = Object.keys(users).length;\r\n\r\n    return result;\r\n}\r\n\r\nexport default new Vuex.Store({\r\n    state: {\r\n        data: {},\r\n        sets: {},\r\n        selected: [],\r\n        maxNsets: 20,\r\n        widgets: {\r\n            0: {\r\n                type: 'Map',\r\n                sets: [],\r\n                update: null\r\n            },\r\n            1: {\r\n                type: 'Origin Countries',\r\n                sets: [],\r\n                update: null\r\n            },\r\n            2: {\r\n                type: 'Error Distance',\r\n                sets: [],\r\n                update: null\r\n            },\r\n            3: {\r\n                type: 'Located Countries',\r\n                sets: [],\r\n                update: null\r\n            },\r\n            4: {\r\n                type: 'Text Length',\r\n                sets: [],\r\n                update: null\r\n            },\r\n            5: {\r\n                type: 'N-Gram Frequency',\r\n                sets: [],\r\n                update: null\r\n            },\r\n            6: {\r\n                type: 'Single Metrics',\r\n                sets: [],\r\n                update: null\r\n            },\r\n            7: {\r\n                type: 'OldMap',\r\n                sets: [],\r\n                update: null\r\n            },\r\n            8: {\r\n                type: 'MapVerOne',\r\n                sets: [],\r\n                update: null\r\n            }\r\n        },\r\n        unused_colors: [\r\n            '#F3C300',\r\n            '#875692',\r\n            '#F38400',\r\n            '#A1CAF1',\r\n            '#BE0032',\r\n            '#C2B280',\r\n            '#008856',\r\n            '#E68FAC',\r\n            '#0067A5',\r\n            '#F99379',\r\n            '#604E97',\r\n            '#F6A600',\r\n            '#B3446C',\r\n            '#DCD300',\r\n            '#882D17',\r\n            '#8DB600',\r\n            '#654522',\r\n            '#E25822',\r\n            '#2B3D26'\r\n        ],\r\n        color_for_all: '#848482',\r\n        highlightColor: '#FFCA28',\r\n        editMode: false,\r\n        selectionMode: false,\r\n        directSetSelectionSignal: false,\r\n        gridLayout: [\r\n            { x: 0, y: 0, w: 3, h: 4, i: '0', widget: 1 },\r\n            { x: 3, y: 0, w: 3, h: 4, i: '1', widget: 3 },\r\n            { x: 6, y: 0, w: 3, h: 4, i: '2', widget: 2 },\r\n            { x: 9, y: 0, w: 3, h: 4, i: '4', widget: 4 },\r\n            { x: 0, y: 4, w: 6, h: 3, i: '5', widget: 5 },\r\n            { x: 6, y: 4, w: 6, h: 3, i: '6', widget: 6 },\r\n            { x: 0, y: 7, w: 12, h: 8, i: '3', widget: 0 }\r\n            // { x: 0, y: 0, w: 6, h: 3, i: '0', widget: 1 },\r\n            // { x: 6, y: 0, w: 6, h: 3, i: '1', widget: 3 },\r\n            // { x: 0, y: 3, w: 12, h: 5, i: '5', widget: 5 },\r\n            // { x: 0, y: 8, w: 12, h: 8, i: '3', widget: 8 }\r\n        ]\r\n    },\r\n    mutations: {\r\n        dataReceived(state, payload) {\r\n            let members = [];\r\n            for (let i in payload.data) {\r\n                members.push({ type: payload.type, idx: i });\r\n                let dir;\r\n                // angle from origin to located\r\n                let bearing = turf.bearingToAzimuth(\r\n                    turf.rhumbBearing(\r\n                        turf.point([\r\n                            payload.data[i].place.coordinates[1],\r\n                            payload.data[i].place.coordinates[0]\r\n                        ]),\r\n                        turf.point([\r\n                            payload.data[i].predicted.coordinates[1],\r\n                            payload.data[i].predicted.coordinates[0]\r\n                        ])\r\n                    )\r\n                );\r\n                if (bearing != 0 && (bearing >= 337.5 || bearing < 22.5))\r\n                    dir = 'North';\r\n                else if (bearing >= 22.5 && bearing < 67.5) dir = 'N-E';\r\n                else if (bearing >= 67.5 && bearing < 112.5) dir = 'East';\r\n                else if (bearing >= 112.5 && bearing < 157.5) dir = 'S-E';\r\n                else if (bearing >= 157.5 && bearing < 202.5) dir = 'South';\r\n                else if (bearing >= 202.5 && bearing < 247.5) dir = 'S-W';\r\n                else if (bearing >= 247.5 && bearing < 292.5) dir = 'West';\r\n                else if (bearing >= 292.5 && bearing < 337.5) dir = 'N-W';\r\n                // payload.data[i].place.bearing = bearing;\r\n                payload.data[i].place.dir = dir;\r\n                // angle from located to origin\r\n                bearing = turf.bearingToAzimuth(\r\n                    turf.rhumbBearing(\r\n                        turf.point([\r\n                            payload.data[i].predicted.coordinates[1],\r\n                            payload.data[i].predicted.coordinates[0]\r\n                        ]),\r\n                        turf.point([\r\n                            payload.data[i].place.coordinates[1],\r\n                            payload.data[i].place.coordinates[0]\r\n                        ])\r\n                    )\r\n                );\r\n                if (bearing != 0 && (bearing >= 337.5 || bearing < 22.5))\r\n                    dir = 'North';\r\n                else if (bearing >= 22.5 && bearing < 67.5) dir = 'N-E';\r\n                else if (bearing >= 67.5 && bearing < 112.5) dir = 'East';\r\n                else if (bearing >= 112.5 && bearing < 157.5) dir = 'S-E';\r\n                else if (bearing >= 157.5 && bearing < 202.5) dir = 'South';\r\n                else if (bearing >= 202.5 && bearing < 247.5) dir = 'S-W';\r\n                else if (bearing >= 247.5 && bearing < 292.5) dir = 'West';\r\n                else if (bearing >= 292.5 && bearing < 337.5) dir = 'N-W';\r\n                // payload.data[i].place.bearing = bearing;\r\n                payload.data[i].predicted.dir = dir;\r\n            }\r\n            state.data[payload.type] = payload.data;\r\n            if (!state.sets.hasOwnProperty('all')) {\r\n                let countryStats = getCountryStats(state, members);\r\n                let allSet = {\r\n                    name: 'all',\r\n                    color: state.color_for_all,\r\n                    colors: chroma\r\n                        .scale(['white', state.color_for_all])\r\n                        .colors(7),\r\n                    members: members,\r\n                    widgets: [],\r\n                    stats: { country: countryStats }\r\n                };\r\n                Vue.set(state.sets, 'all', allSet);\r\n            } else {\r\n                let countryStats = getCountryStats(state, members);\r\n                let newMembers = state.sets.all.members.concat(members);\r\n                Vue.set(state.sets.all, 'members', newMembers);\r\n                Vue.set(state.sets.all.stats, 'country', countryStats);\r\n            }\r\n            this.commit('addSet', { name: payload.type, members: members });\r\n        },\r\n        resetSelection(state) {\r\n            state.selected = [];\r\n        },\r\n        updateSelection(state, payload) {\r\n            state.selected = payload;\r\n        },\r\n        toggleEditMode(state, newMode) {\r\n            state.editMode = newMode;\r\n        },\r\n        toggleSelectionMode(state) {\r\n            state.selectionMode = !state.selectionMode;\r\n        },\r\n        updateDirectSetSelectionSignal(state, value) {\r\n            state.directSetSelectionSignal = value;\r\n        },\r\n        triggerSetSelection(state) {\r\n            if (Object.keys(state.data).length === 0) {\r\n                console.log('no data');\r\n            } else if (Object.keys(state.sets).length <= state.maxNsets) {\r\n                this.commit('toggleSelectionMode');\r\n            } else {\r\n                console.log('The number of sets has reached its limit.');\r\n            }\r\n        },\r\n        addSet(state, payload) {\r\n            let name = payload.name;\r\n            let members = payload.members;\r\n            let color = state.unused_colors[0];\r\n            let colors = chroma.scale(['white', color]).colors(7);\r\n            state.unused_colors.shift();\r\n            let countryStats = getCountryStats(state, members);\r\n            let textStats = getTextStats(state, members);\r\n            let metrics = getMetrics(state, members, textStats);\r\n            let newSet = {\r\n                name: name,\r\n                color: color,\r\n                colors: colors,\r\n                members: members,\r\n                widgets: [],\r\n                stats: { country: countryStats },\r\n                textStats: textStats,\r\n                metrics: metrics\r\n            };\r\n            Vue.set(state.sets, name, newSet);\r\n            state.selectionMode = false;\r\n        },\r\n        delSet(state, set) {\r\n            if (state.sets[set] !== 'undefined') {\r\n                // deleting the set from the widget first\r\n                for (let widget in state.sets[set].widgets) {\r\n                    let payload = {\r\n                        widget: state.sets[set].widgets[widget],\r\n                        set: set\r\n                    };\r\n                    this.commit('delSetFromWidget', payload);\r\n                }\r\n                // then delete from the global set lists\r\n                state.unused_colors.unshift(state.sets[set].color);\r\n                Vue.delete(state.sets, set);\r\n            }\r\n        },\r\n        delAllSet(state) {\r\n            for (let set in state.sets)\r\n                if (set != 'all') this.commit('delSet', set);\r\n            this.commit('delSet', 'all');\r\n            Vue.set(state, 'data', {});\r\n        },\r\n        delSetFromWidget(state, payload) {\r\n            let widget = payload.widget;\r\n            let set = payload.set;\r\n            let idx = state.widgets[widget].sets.indexOf(set);\r\n            // set exists in the widget sets\r\n            if (idx > -1) {\r\n                let sets = state.widgets[widget].sets;\r\n                sets.splice(idx, 1);\r\n                Vue.set(state.widgets[widget], 'update', {\r\n                    type: 'delete',\r\n                    set: set\r\n                });\r\n                Vue.set(state.widgets[widget], 'sets', sets);\r\n            }\r\n        },\r\n        addSetToWidget(state, payload) {\r\n            let widget = payload.widget;\r\n            let set = payload.set;\r\n            // check if the set already exists\r\n            if (state.widgets[widget].sets.indexOf(set) == -1) {\r\n                state.widgets[widget].sets.push(set);\r\n                state.sets[set].widgets.push(widget);\r\n                Vue.set(state.widgets[widget], 'update', {\r\n                    type: 'add',\r\n                    set: set\r\n                });\r\n            }\r\n        },\r\n        addToSelection(state, member) {\r\n            state.selected.push(member);\r\n        }\r\n    },\r\n    actions: {},\r\n    modules: {}\r\n});\r\n","import Vue from 'vue';\r\nimport Vuetify from 'vuetify';\r\nimport 'vuetify/dist/vuetify.min.css';\r\nimport colors from 'vuetify/lib/util/colors';\r\n\r\nVue.use(Vuetify);\r\n\r\nexport default new Vuetify({\r\n    icons: {\r\n        iconfont: 'fa'\r\n    },\r\n    theme: {\r\n        light: true,\r\n        themes: {\r\n            light: {\r\n                primary: '#26a7de',\r\n                secondary: '#b03060',\r\n                accent: colors.shades.black,\r\n                background: '#f5f5f5',\r\n            }\r\n        }\r\n    },\r\n});\r\n","import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport router from './router';\r\nimport store from './store';\r\nimport vuetify from './plugins/vuetify';\r\nimport '@babel/polyfill';\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n    router,\r\n    store,\r\n    vuetify,\r\n    render: h => h(App)\r\n}).$mount('#app');\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlBar.vue?vue&type=style&index=0&id=694c4e8f&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMetrics.vue?vue&type=style&index=0&id=2afc27e5&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OldMap.vue?vue&type=style&index=0&id=9983127a&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextLength.vue?vue&type=style&index=0&id=1fb98c0e&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetBar.vue?vue&type=style&index=0&id=57205e04&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerToggle.vue?vue&type=style&index=0&id=50aa2af2&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartTooltip.vue?vue&type=style&index=0&id=5aa4ef46&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=style&index=0&id=fa452c96&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NGramFrequency.vue?vue&type=style&index=0&id=211036ea&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=e3a0404a&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Flower.vue?vue&type=style&index=0&id=b0d2ae2e&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapVerOne.vue?vue&type=style&index=0&id=4ee8ab94&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocatedCountries.vue?vue&type=style&index=0&id=cb3b76e8&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pie.vue?vue&type=style&index=0&id=3842edc2&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorDistance.vue?vue&type=style&index=0&id=8ce1b760&lang=scss&scoped=true&\""],"sourceRoot":""}